{"version":3,"file":"acfwf-edit-advanced-coupon.js","mappings":"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","sources":["webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/templates/condition_field_options.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/toggles.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/helper.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/templates/condition_logic.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/templates/condition_group.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/groups.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/templates/logic.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/templates/product_category.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/templates/customer_logged_in_status.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/templates/customer_user_role.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/templates/disallowed_customer_user_role.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/templates/cart_quantity.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/templates/condition_premium.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/fields.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/templates/cart_subtotal.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/scrapers.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/save.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/table.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/restrictions.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/templates/condition_notice.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/tabs.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/cart_conditions/index.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/templates/upsell.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/templates/combination_products.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/templates/product_categories.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/templates/product_first_column.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/templates/placeholder_row.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/templates/specific_products.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/templates/any_products.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/toggles.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/save.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/templates/add_edit_row.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/templates/table_row.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/templates/category_first_column.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/table.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/bogo_deals/index.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/toggle_fields.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/url_coupons.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/scheduler.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/upsell.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/help_modal/templates/links_list_template.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/help_modal/templates/search_widget_template.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/help_modal/templates/modal_template.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/help_modal/templates/permission_template.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/help_modal/templates/placeholder_template.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/help_modal/templates/video_gallery_template.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/help_modal/videos.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/help_modal/modal.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/help_modal/templates/error_template.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/help_modal/search.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/help_modal/permission.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/help_modal/index.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/send_coupon/labels.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/send_coupon/templates/sendCouponToSection.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/send_coupon/templates/customerDetailsSection.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/send_coupon/state.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/send_coupon/templates/modalMarkup.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/send_coupon/templates/confirmAndSendSection.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/send_coupon/index.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/send_coupon/templates/sendCouponButton.ts","webpack://advanced-coupons-free/./packages/acfwf-edit-advanced-coupon/index.ts"],"sourcesContent":["export default function conditionFieldOptionsTemplate() {\r\n    var cart_condition_fields = acfw_edit_coupon.cart_condition_fields, fieldGroups = acfw_edit_coupon.cart_condition_field_groups, btnLabels = acfw_edit_coupon.product_table_buttons, add_new_and_rule = acfw_edit_coupon.add_new_and_rule;\r\n    var conditionFields = Object.keys(cart_condition_fields).map(function (key) { return cart_condition_fields[key]; });\r\n    return \"\\n    <div class=\\\"condition-group-actions\\\">\\n      <div class=\\\"add-condition-form\\\" style=\\\"display: none;\\\">\\n        <select class=\\\"condition-types\\\" data-placeholder=\\\"Search/select condition fields\\\">\\n          <option value=\\\"\\\">Search</option>\\n          \".concat(fieldGroups\r\n        .map(function (f) {\r\n        return conditionFieldGroupTemplate(f, conditionFields);\r\n    })\r\n        .join(\"\"), \"\\n        </select>\\n        <button type=\\\"button\\\" class=\\\"add-condition-field button-primary\\\">\").concat(btnLabels.add, \"</button>\\n        <button type=\\\"button\\\" class=\\\"cancel-add-condition-field button\\\">\").concat(btnLabels.cancel, \"</button>\\n      </div>\\n      <button type=\\\"button\\\" class=\\\"add-condition-trigger button\\\">\\n        <i class=\\\"dashicons dashicons-plus\\\"></i>\\n        \").concat(add_new_and_rule, \"\\n      </button>\\n    </div>\\n  \");\r\n}\r\nfunction conditionFieldGroupTemplate(fieldGroup, conditionFields) {\r\n    var group = fieldGroup.group, label = fieldGroup.label;\r\n    var matchedFields = conditionFields.filter(function (c) {\r\n        return c.group === group || (group === \"others\" && c.group === undefined);\r\n    });\r\n    if (!matchedFields.length)\r\n        return;\r\n    return \"\\n    <optgroup label=\\\"\".concat(label, \"\\\">\\n      \").concat(matchedFields\r\n        .map(function (c) { return \"<option value=\\\"\".concat(c.key, \"\\\">\").concat(c.title, \"</option>\"); })\r\n        .join(\"\"), \"\\n    </optgroup>\\n  \");\r\n}\r\nexport function enhanceConditionFieldSelector() {\r\n    jQuery(\"select.condition-types\").select2();\r\n}\r\n","import { enhanceConditionFieldSelector } from './templates/condition_field_options';\r\nvar $ = jQuery;\r\nvar module_block = document.querySelector('#acfw_cart_conditions');\r\n/**\r\n * Toggle add condition form.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function toggle_add_condition_form() {\r\n    // @ts-ignore\r\n    var $button = $(this), $condition_actions = $button.closest('div.condition-group-actions');\r\n    if ($button.hasClass('add-condition-trigger')) {\r\n        $condition_actions.find('.add-condition-form').show();\r\n        enhanceConditionFieldSelector();\r\n        $button.hide();\r\n    }\r\n    else {\r\n        $condition_actions.find('.add-condition-form').hide();\r\n        $condition_actions.find('.add-condition-trigger').show();\r\n    }\r\n}\r\n/**\r\n * Toggle editing mode.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function toggle_editing_mode(toggle) {\r\n    $(module_block).data('editing', toggle);\r\n    $(module_block).find('#save-cart-conditions').prop('disabled', !toggle);\r\n}\r\n/**\r\n * Populate custom taxonomy options.\r\n *\r\n * @since 1.4\r\n */\r\nexport function popuplate_taxonomy_term_options() {\r\n    // @ts-ignore\r\n    var $taxonomy = $(this), $condition_block = $taxonomy.closest('.condition-field'), $tax_terms = $condition_block.find('select.condition-value'), taxonomy = $taxonomy.val() + '', terms = $condition_block.data('selected_terms'), tax_options = $(module_block).data('custom_tax_options'), taxonomy_data = tax_options.filter(function (t) { return t.slug == taxonomy; }), taxonomy_terms = taxonomy_data.length ? taxonomy_data[0].terms : [];\r\n    // @ts-ignore\r\n    $tax_terms.val(null).find('option').remove();\r\n    if (!taxonomy_terms.length)\r\n        return;\r\n    for (var _i = 0, taxonomy_terms_1 = taxonomy_terms; _i < taxonomy_terms_1.length; _i++) {\r\n        var term = taxonomy_terms_1[_i];\r\n        var name_1 = term.name, term_id = term.term_id;\r\n        var optionObj = new Option(name_1, term_id);\r\n        $tax_terms.append(optionObj);\r\n    }\r\n    $tax_terms.val(terms).trigger('change');\r\n}\r\n/**\r\n * Populate shipping zone region options.\r\n *\r\n * @since 1.4\r\n */\r\nexport function popuplate_shipping_region_options() {\r\n    // @ts-ignore\r\n    var $shipping_zone = $(this), $condition_block = $shipping_zone.closest('.condition-field'), $shipping_region = $condition_block.find('select.condition-value'), zone_id = $shipping_zone.val() + '';\r\n    if (!zone_id)\r\n        return;\r\n    var regions = $condition_block.data('regions'), region_labels = $(module_block).data('shipping_regions'), region_options = $condition_block.data('zones')[zone_id]['regions'];\r\n    // @ts-ignore\r\n    $shipping_region.val(null).find('option').remove();\r\n    if (typeof region_options != 'object' || !region_options.length)\r\n        return;\r\n    for (var _i = 0, region_options_1 = region_options; _i < region_options_1.length; _i++) {\r\n        var code = region_options_1[_i];\r\n        var optionObj = new Option(region_labels[code], code);\r\n        $shipping_region.append(optionObj);\r\n    }\r\n    $shipping_region.val(regions).trigger('change');\r\n}\r\n/**\r\n * Toggle the cart condition notice type field for auto apply.\r\n *\r\n * @since 4.5.1\r\n */\r\nexport function toggleNoticeTypeField() {\r\n    // @ts-ignore\r\n    var $checkbox = $(this);\r\n    var $noticeTypeField = $('select.non-qualifying-notice-type-field');\r\n    var $wrapper = $noticeTypeField.closest('.condition-settings-field');\r\n    if ($checkbox.is(':checked')) {\r\n        $wrapper.show();\r\n        $noticeTypeField.prop('disabled', false);\r\n    }\r\n    else {\r\n        $wrapper.hide();\r\n        $noticeTypeField.prop('disabled', true);\r\n    }\r\n}\r\n","/**\r\n * Toggle overlay block.\r\n *\r\n * @since 1.0.0\r\n *\r\n * @param object overlay Overlay html element.\r\n * @param string type    Toggle type (show/hide).\r\n */\r\nexport function toggle_overlay(overlay, type) {\r\n    if (type === void 0) { type = ''; }\r\n    if (!type)\r\n        type = 'show';\r\n    var display = type === 'show' ? 'block' : 'none';\r\n    jQuery(overlay).css('display', display);\r\n}\r\n/**\r\n * Escape string to be used on an attribute.\r\n *\r\n * @since 1.0.0\r\n * @param string text String to escape.\r\n */\r\nexport function esc_attr(text) {\r\n    var map = {\r\n        '&': '&amp;',\r\n        '<': '&lt;',\r\n        '>': '&gt;',\r\n        '\"': '&quot;',\r\n        \"'\": '&#039',\r\n    };\r\n    return text.replace(/[&<>\"']/g, function (m) { return map[m]; });\r\n}\r\n/**\r\n * Remove leading zeros from an input field.\r\n *\r\n * @since 1.2\r\n */\r\nexport function remove_leading_zeros() {\r\n    var decimal_separator = acfw_edit_coupon.decimal_separator;\r\n    // @ts-ignore\r\n    var $input = jQuery(this);\r\n    var value = $input.val() + '';\r\n    if (value == '0' + decimal_separator)\r\n        $input.val('0');\r\n    if (value == '0' || value.substring(0, 2) == '0' + decimal_separator)\r\n        return;\r\n    value = value.replace(/^0+/, '');\r\n    value = value.substring(0, 1) == decimal_separator ? '0' + value : value;\r\n    $input.val(value);\r\n}\r\n/**\r\n * Array to select options markup.\r\n *\r\n * @param options\r\n * @param value\r\n * @param key\r\n * @param label\r\n */\r\nexport function array_to_select_options(options, value, key, label) {\r\n    if (key === void 0) { key = 'value'; }\r\n    if (label === void 0) { label = 'label'; }\r\n    return options\r\n        .map(function (option) {\r\n        return \"<option value=\\\"\".concat(option[key], \"\\\" \").concat(option[key] == value ? 'selected' : '', \">\").concat(option[label], \"</option>\");\r\n    })\r\n        .toString()\r\n        .replace(/>,</g, '><');\r\n}\r\n/**\r\n * Get allowed minimum value.\r\n *\r\n * @since 1.0.0\r\n * @since 1.2   Remove unused property.\r\n *\r\n * @param {string} condition\r\n */\r\nexport function get_allowed_minimum_value(condition) {\r\n    return condition == '<' ? 1 : 0;\r\n}\r\n/**\r\n * Compare option values to mark option as selected.\r\n *\r\n * @param value_1\r\n * @param value_2\r\n */\r\nexport function selected(value_1, value_2) {\r\n    return value_1 == value_2 ? 'selected' : '';\r\n}\r\nexport function selected_multiple(array, value) {\r\n    return array.indexOf(value) >= 0 ? 'selected' : '';\r\n}\r\n/**\r\n * Get discount type select options markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param value\r\n */\r\nexport function discount_type_options(value, show_nodiscount) {\r\n    if (value === void 0) { value = ''; }\r\n    if (show_nodiscount === void 0) { show_nodiscount = false; }\r\n    var _a = acfw_edit_coupon.discount_field_options, nodiscount = _a.nodiscount, override = _a.override, percent = _a.percent, fixed = _a.fixed;\r\n    var nodiscount_markup = \"<option value=\\\"nodiscount\\\" \".concat(selected(value, 'nodiscount'), \">= : \").concat(nodiscount, \"</option>\");\r\n    return \"\\n        \".concat(show_nodiscount ? nodiscount_markup : '', \"\\n        <option value=\\\"override\\\" \").concat(selected(value, 'override'), \">$ : \").concat(override, \"</option>\\n        <option value=\\\"percent\\\" \").concat(selected(value, 'percent'), \">% : \").concat(percent, \"</option>\\n        <option value=\\\"fixed\\\" \").concat(selected(value, 'fixed'), \">-$ : \").concat(fixed, \"</option>\\n    \");\r\n}\r\n/**\r\n * Get condition options markup.\r\n *\r\n * @sinc 1.15\r\n * @param condition\r\n */\r\nexport function condition_options(condition) {\r\n    if (condition === void 0) { condition = ''; }\r\n    var _a = acfw_edit_coupon.condition_field_options, exactly = _a.exactly, anyexcept = _a.anyexcept, morethan = _a.morethan, lessthan = _a.lessthan;\r\n    return \"\\n        <option value=\\\"=\\\" \".concat(selected(condition, '='), \">\").concat(exactly, \"</option>\\n        <option value=\\\"!=\\\" \").concat(selected(condition, '!='), \">\").concat(anyexcept, \"</option>\\n        <option value=\\\">\\\" \").concat(selected(condition, '>'), \">\").concat(morethan, \"</option>\\n        <option value=\\\"<\\\" \").concat(selected(condition, '<'), \">\").concat(lessthan, \"</option>\\n    \");\r\n}\r\n/**\r\n * Validate url.\r\n *\r\n * @since 1.15\r\n */\r\nexport function validate_url(url) {\r\n    var pattern = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\r\n    return pattern.test(url);\r\n}\r\n/**\r\n * Format price string to float.\r\n *\r\n * @since 1.3.3\r\n */\r\nexport function price_to_float(price) {\r\n    var decimal_separator = acfw_edit_coupon.decimal_separator;\r\n    return parseFloat(price.replace(decimal_separator, '.'));\r\n}\r\n/**\r\n * Validate discount value by type.\r\n * Make sure that percent and fixed type discounts is not valid when value is not greater than 0.\r\n *\r\n * @param type\r\n * @param value\r\n * @returns\r\n */\r\nexport function validateDiscount(type, value) {\r\n    if ('percent' === type || 'fixed' === type) {\r\n        return 0 < price_to_float(value);\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Validate email address.\r\n *\r\n * @param {string} email\r\n * @returns {boolean}\r\n */\r\nexport function validateEmail(email) {\r\n    var pattern = new RegExp(/^([a-z\\d!#$%&'*+\\-\\/=?^_`{|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+(\\.[a-z\\d!#$%&'*+\\-\\/=?^_`{|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+)*|\"((([ \\t]*\\r\\n)?[ \\t]+)?([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))*(([ \\t]*\\r\\n)?[ \\t]+)?\")@(([a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|[a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF][a-z\\d\\-._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]*[a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])\\.)+([a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|[a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF][a-z\\d\\-._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]*[0-9a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])\\.?$/i);\r\n    return pattern.test(email);\r\n}\r\n","import { selected } from \"../../helper\";\r\n/**\r\n * Return logic template markup.\r\n *\r\n * @since 1.15\r\n */\r\nexport default function condition_logic_template(value) {\r\n    if (value === void 0) { value = \"\"; }\r\n    var logic_field_options = acfw_edit_coupon.logic_field_options;\r\n    var and = logic_field_options.and, or = logic_field_options.or;\r\n    return \"\\n        <div class=\\\"condition-group-logic\\\">\\n            <div class=\\\"field-control\\\">\\n                <select class=\\\"cgroup-logic\\\">\\n                    <option value=\\\"and\\\" \".concat(selected(value, \"and\"), \">\").concat(and, \"</option>\\n                    <option value=\\\"or\\\" \").concat(selected(value, \"or\"), \">\").concat(or, \"</option>\\n                </select>\\n            </div>\\n        </div>\\n    \");\r\n}\r\n","import conditionFieldOptionsTemplate from \"./condition_field_options\";\r\n/**\r\n * Return condition group template markup.\r\n *\r\n * @since 1.15\r\n */\r\nexport default function condition_group_template(fields_markup) {\r\n    if (fields_markup === void 0) { fields_markup = \"\"; }\r\n    var empty_cart_conditions_field = acfw_edit_coupon.empty_cart_conditions_field;\r\n    var cgroup_actions = conditionFieldOptionsTemplate();\r\n    var empty_conditions_markup = \"<div class=\\\"empty-conditions\\\">\".concat(empty_cart_conditions_field, \"</div>\");\r\n    return \"\\n        <div class=\\\"condition-group \".concat(!fields_markup ? \"new\" : \"\", \"\\\">\\n            <a class=\\\"remove-condition-group\\\" href=\\\"javascript:void(0);\\\">\\n                <i class=\\\"dashicons dashicons-trash\\\"></i>\\n            </a>\\n            <div class=\\\"condition-group-fields\\\">\\n                \").concat(fields_markup ? fields_markup : empty_conditions_markup, \"\\n            </div>\\n            \").concat(cgroup_actions, \"\\n        </div>\\n    \");\r\n}\r\n","import { toggle_editing_mode } from './toggles';\r\nimport condition_logic_template from './templates/condition_logic';\r\nimport condition_group_template from './templates/condition_group';\r\nvar $ = jQuery;\r\n/**\r\n * Add condition group callback.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function add_condition_group() {\r\n    var condition_groups = document.querySelector('#acfw_cart_conditions .condition-data-wrap .condition-groups');\r\n    if ($(condition_groups).find('.condition-group').length)\r\n        $(condition_groups).append(condition_logic_template('or'));\r\n    $(condition_groups).find('.no-condition-group').remove();\r\n    $(condition_groups).append(condition_group_template());\r\n    // @ts-ignore\r\n    $(this).blur();\r\n    $(condition_groups).find('.condition-group.new .add-condition-trigger').trigger('click');\r\n    $(condition_groups).find('.condition-group').removeClass('new');\r\n    toggle_editing_mode(true);\r\n}\r\n/**\r\n * Remove condition group callback.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function remove_condition_group() {\r\n    // @ts-ignore\r\n    var $button = $(this), module_block = document.querySelector('#acfw_cart_conditions'), $condition_group = $button.closest('.condition-group'), $cgroup_logic = $condition_group.index() == 0\r\n        ? $condition_group.next('.condition-group-logic')\r\n        : $condition_group.prev('.condition-group-logic');\r\n    var no_condition_group_msg = acfw_edit_coupon.no_condition_group_msg;\r\n    $condition_group.remove();\r\n    $cgroup_logic.remove();\r\n    if ($(module_block).find('.condition-group').length < 1) {\r\n        $(module_block).find('.condition-groups').append(\"\\n            <div class=\\\"no-condition-group\\\">\\n                \".concat(no_condition_group_msg, \"\\n            </div>\\n        \"));\r\n    }\r\n    toggle_editing_mode(true);\r\n}\r\n","import { selected } from \"../../helper\";\r\n/**\r\n * Return logic template markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n */\r\nexport default function logic_template(value) {\r\n    if (value === void 0) { value = \"\"; }\r\n    var logic_field_options = acfw_edit_coupon.logic_field_options;\r\n    var and = logic_field_options.and, or = logic_field_options.or;\r\n    return \"<div class=\\\"logic-condition-field condition-field\\\" data-type=\\\"logic\\\">\\n        <div class=\\\"field-control\\\">\\n            <select class=\\\"condition-logic\\\">\\n                <option value=\\\"and\\\" \".concat(selected(value, \"and\"), \">\").concat(and, \"</option>\\n                <option value=\\\"or\\\" \").concat(selected(value, \"or\"), \">\").concat(or, \"</option>\\n            </select>\\n        </div>\\n    </div>\");\r\n}\r\n","import { selected_multiple } from \"../../helper\";\r\nvar cart_condition_fields = acfw_edit_coupon.cart_condition_fields, condition_field_options = acfw_edit_coupon.condition_field_options;\r\n/**\r\n * Return product category condition field template markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n */\r\nexport default function product_category_template(data) {\r\n    var categories = data.value, condition = data.condition, quantity = data.quantity;\r\n    var _a = cart_condition_fields.product_category, title = _a.title, placeholder = _a.placeholder, field = _a.field;\r\n    var quantityLabel = cart_condition_fields.cart_quantity.field;\r\n    var condition_label = acfw_edit_coupon.condition_label;\r\n    var exactly = condition_field_options.exactly, anyexcept = condition_field_options.anyexcept, morethan = condition_field_options.morethan, lessthan = condition_field_options.lessthan;\r\n    var condOption = condition ? condition : \">\";\r\n    return \"\\n    <div class=\\\"product-category-field condition-field\\\" data-type=\\\"product-category\\\">\\n        <a class=\\\"remove-condition-field\\\" href=\\\"javascript:void(0);\\\"><i class=\\\"dashicons dashicons-trash\\\"></i></a>\\n        <h3 class=\\\"condition-field-title\\\">\".concat(title, \"</h3>\\n        <div class=\\\"field-control categories\\\">\\n            <label>\").concat(field, \"</label>\\n            <select class=\\\"condition-value wc-enhanced-select\\\" multiple data-placeholder=\\\"\").concat(placeholder, \"\\\">\\n                \").concat(category_options(categories), \"\\n            </select>\\n        </div>\\n        <div class=\\\"field-control condition\\\">\\n            <label>\").concat(condition_label, \"</label>\\n            <select class=\\\"condition-select\\\">\\n                <option value=\\\"=\\\" \").concat(condOption == \"=\" ? \"selected\" : \"\", \">\").concat(exactly, \"</option>\\n                <option value=\\\"!=\\\" \").concat(condOption == \"!=\" ? \"selected\" : \"\", \">\").concat(anyexcept, \"</option>\\n                <option value=\\\">\\\" \").concat(condOption == \">\" ? \"selected\" : \"\", \">\").concat(morethan, \"</option>\\n                <option value=\\\"<\\\" \").concat(condOption == \"<\" ? \"selected\" : \"\", \">\").concat(lessthan, \"</option>\\n            </select>\\n        </div>\\n        <div class=\\\"field-control quantity\\\">\\n            <label>\").concat(quantityLabel, \"</label>\\n            <input type=\\\"number\\\" class=\\\"condition-quantity\\\" value=\\\"\").concat(typeof quantity ? quantity : 0, \"\\\" min=\\\"\").concat(condition == \"<\" ? 1 : 0, \"\\\">\\n        </div>\\n    </div>\\n    \");\r\n}\r\n/**\r\n * Get category options markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n */\r\nfunction category_options(data) {\r\n    if (data === void 0) { data = []; }\r\n    var options = cart_condition_fields.product_category.options;\r\n    var markup = '';\r\n    for (var x in options) {\r\n        markup += \"<option value=\\\"\".concat(x, \"\\\" \").concat(selected_multiple(data, x), \">\").concat(options[x], \"</option>\");\r\n    }\r\n    return markup;\r\n}\r\n","import { selected } from \"../../helper\";\r\nvar cart_condition_fields = acfw_edit_coupon.cart_condition_fields;\r\n/**\r\n * Return customer logged in status condition field template markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n */\r\nexport default function customer_logged_in_status_template(data) {\r\n    var title = cart_condition_fields.customer_logged_in_status.title;\r\n    return \"\\n        <div class=\\\"customer-logged-in-status-field condition-field\\\" data-type=\\\"customer-logged-in-status\\\">\\n\\n        <a class=\\\"remove-condition-field\\\" href=\\\"javascript:void(0);\\\"><i class=\\\"dashicons dashicons-trash\\\"></i></a>\\n\\n        <h3 class=\\\"condition-field-title\\\">\".concat(title, \"</h3>\\n\\n        <div class=\\\"field-control\\\">\\n            <select class=\\\"condition-value\\\">\\n                \").concat(get_options(data), \"\\n            </select>\\n        </div>\\n    </div>\");\r\n}\r\n/**\r\n * Get condition field options.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n */\r\nfunction get_options(data) {\r\n    var options = cart_condition_fields.customer_logged_in_status.options;\r\n    var markup = '';\r\n    for (var x in options) {\r\n        markup += \"<option value=\\\"\".concat(x, \"\\\" \").concat(selected(x, data), \">\").concat(options[x], \"</option>\");\r\n    }\r\n    return markup;\r\n}\r\n","import { selected_multiple } from \"../../helper\";\r\nvar cart_condition_fields = acfw_edit_coupon.cart_condition_fields;\r\n/**\r\n * Return customer user role condition field template markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n */\r\nexport default function customer_user_role_template(data) {\r\n    var _a = cart_condition_fields.customer_user_role, title = _a.title, placeholder = _a.placeholder;\r\n    return \"\\n        <div class=\\\"customer-user-role-field condition-field\\\" data-type=\\\"customer-user-role\\\">\\n            <a class=\\\"remove-condition-field\\\" href=\\\"javascript:void(0);\\\"><i class=\\\"dashicons dashicons-trash\\\"></i></a>\\n            <h3 class=\\\"condition-field-title\\\">\".concat(title, \"</h3>\\n            <div class=\\\"field-control\\\">\\n                <select class=\\\"wc-enhanced-select condition-value\\\" multiple data-placeholder=\\\"\").concat(placeholder, \"\\\">\\n                    \").concat(get_options(data), \"\\n                </select>\\n            </div>\\n        </div>\\n    \");\r\n}\r\n/**\r\n * Get condition field options markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n */\r\nfunction get_options(data) {\r\n    var user_role_options = acfw_edit_coupon.user_role_options;\r\n    var markup = '';\r\n    for (var x in user_role_options)\r\n        markup += \"<option value=\\\"\".concat(x, \"\\\" \").concat(selected_multiple(data, x), \">\").concat(user_role_options[x], \"</option>\");\r\n    return markup;\r\n}\r\n","import { selected_multiple } from \"../../helper\";\r\nvar cart_condition_fields = acfw_edit_coupon.cart_condition_fields;\r\n/**\r\n * Return disallowed customer user role condition field template markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n */\r\nexport default function disallowed_customer_user_role_template(data) {\r\n    var _a = cart_condition_fields.disallowed_customer_user_role, title = _a.title, placeholder = _a.placeholder;\r\n    return \"\\n        <div class=\\\"disallowed-customer-user-role-field condition-field\\\" data-type=\\\"disallowed-customer-user-role\\\">\\n            <a class=\\\"remove-condition-field\\\" href=\\\"javascript:void(0);\\\"><i class=\\\"dashicons dashicons-trash\\\"></i></a>\\n            <h3 class=\\\"condition-field-title\\\">\".concat(title, \"</h3>\\n            <div class=\\\"field-control\\\">\\n                <select class=\\\"wc-enhanced-select condition-value\\\" multiple data-placeholder=\\\"\").concat(placeholder, \"\\\">\\n                    \").concat(get_options(data), \"\\n                </select>\\n            </div>\\n        </div>\\n    \");\r\n}\r\n/**\r\n * Get condition field options markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n */\r\nfunction get_options(data) {\r\n    var user_role_options = acfw_edit_coupon.user_role_options;\r\n    var markup = '';\r\n    for (var x in user_role_options)\r\n        markup += \"<option value=\\\"\".concat(x, \"\\\" \").concat(selected_multiple(data, x), \">\").concat(user_role_options[x], \"</option>\");\r\n    return markup;\r\n}\r\n","import { condition_options } from \"../../helper\";\r\nvar cart_condition_fields = acfw_edit_coupon.cart_condition_fields;\r\n/**\r\n * Return cart quantity condition field template markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n */\r\nexport default function cart_quantity_template(data) {\r\n    var condition = data.condition, value = data.value;\r\n    var _a = cart_condition_fields.cart_quantity, title = _a.title, desc = _a.desc, field = _a.field;\r\n    var condition_label = acfw_edit_coupon.condition_label;\r\n    return \"\\n    <div class=\\\"cart-quantity-field condition-field\\\" data-type=\\\"cart-quantity\\\">\\n        <a class=\\\"remove-condition-field\\\" href=\\\"javascript:void(0);\\\"><i class=\\\"dashicons dashicons-trash\\\"></i></a>\\n        <h3 class=\\\"condition-field-title\\\">\".concat(title, \"</h3>\\n        <label>\").concat(desc, \"</label>\\n        <div class=\\\"field-control\\\">\\n            <label>\").concat(condition_label, \"</label>\\n            <select class=\\\"condition-select\\\">\\n                \").concat(condition_options(condition), \"\\n            </select>\\n        </div>\\n        <div class=\\\"field-control\\\">\\n            <label>\").concat(field, \"</label>\\n            <input class=\\\"condition-value\\\" type=\\\"number\\\" min=\\\"0\\\" value=\\\"\").concat(value >= 0 ? value : \"\", \"\\\">\\n        </div>\\n    </div>\\n    \");\r\n}\r\n","var cart_condition_fields = acfw_edit_coupon.cart_condition_fields;\r\n/**\r\n * Return condition premium template markup.\r\n *\r\n * @since 4.5.4\r\n *\r\n * @param data\r\n * @param type\r\n */\r\nexport default function condition_premium_template(data, type) {\r\n    var field_key = type.replace(/-/g, \"_\");\r\n    var title = cart_condition_fields[field_key].title;\r\n    var cart_condition_field_premium_notice = acfw_edit_coupon.cart_condition_field_premium_notice;\r\n    return \"\\n  <div class=\\\"\".concat(type, \" condition-field condition-field-premium\\\" data-type=\\\"\").concat(type, \"\\\" data-premium='\").concat(JSON.stringify(data), \"'>\\n      <a class=\\\"remove-condition-field\\\" href=\\\"javascript:void(0);\\\"><i class=\\\"dashicons dashicons-trash\\\"></i></a>\\n      <h3 class=\\\"condition-field-title\\\">\").concat(title, \"</h3>\\n      <div class=\\\"field-control\\\">\\n          \").concat(cart_condition_field_premium_notice.label, \"\\n      </div>\\n  </div>\\n  \");\r\n}\r\n","import { toggle_overlay } from '../helper';\r\nimport { toggle_editing_mode } from './toggles';\r\n// templates\r\nimport logic_template from './templates/logic';\r\nimport product_category_template from './templates/product_category';\r\nimport customer_logged_in_status_template from './templates/customer_logged_in_status';\r\nimport customer_user_role_template from './templates/customer_user_role';\r\nimport disallowed_customer_user_role_template from './templates/disallowed_customer_user_role';\r\nimport cart_quantity_template from './templates/cart_quantity';\r\nimport cart_subtotal_template from './templates/cart_subtotal';\r\nimport condition_premium_template from './templates/condition_premium';\r\nvar $ = jQuery;\r\nvar cart_condition_premium_notice = acfw_edit_coupon.cart_condition_premium_notice, cart_condition_fields = acfw_edit_coupon.cart_condition_fields, upsell = acfw_edit_coupon.upsell;\r\n/**\r\n * Add condition field.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function add_condition_field() {\r\n    // @ts-ignore\r\n    var $button = $(this), $condition_type = $button.closest('.condition-group-actions').find('select.condition-types'), $condition_group = $button.closest('.condition-group'), $condition_fields = $condition_group.find('.condition-group-fields'), overlay = document.querySelector('#acfw_cart_conditions .acfw-overlay');\r\n    var premiumConditions = $('#acfw_cart_conditions').data('premium-conditions');\r\n    var condition_type = $condition_type.val() + '';\r\n    var fields_count = $condition_fields.find('.condition-field,.condition-set').length;\r\n    toggle_overlay(overlay, 'show');\r\n    if (premiumConditions && premiumConditions.indexOf(condition_type) > -1) {\r\n        // upsell\r\n        vex.dialog.alert({ unsafeMessage: upsell.cart_condition_field });\r\n    }\r\n    else {\r\n        var condition_field_markup = get_condition_field(condition_type, null, fields_count);\r\n        if (condition_field_markup) {\r\n            $condition_fields.find('.empty-conditions').remove();\r\n            $condition_fields.show().append(condition_field_markup);\r\n            $condition_fields.find(\".\".concat(condition_type, \"-field\")).find('input,select').trigger('change');\r\n            $('body').trigger('wc-enhanced-select-init');\r\n            toggle_editing_mode(true);\r\n        }\r\n        else\r\n            vex.dialog.alert(acfw_edit_coupon.fail_add_condition_field);\r\n    }\r\n    toggle_overlay(overlay, 'hide');\r\n    $condition_group.find('.condition-group-actions .add-condition-form').hide();\r\n    $condition_group.find('.condition-group-actions .add-condition-trigger').show();\r\n}\r\n/**\r\n * Remove condition field.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function remove_condition_field() {\r\n    // @ts-ignore\r\n    var $button = $(this), $condition_field = $button.closest('.condition-field,.condition-set'), $condition_group = $condition_field.closest('.condition-group'), $cfield_logic = $condition_field.index() == 0\r\n        ? $condition_field.next('.logic-condition-field')\r\n        : $condition_field.prev('.logic-condition-field');\r\n    var empty_cart_conditions_field = acfw_edit_coupon.empty_cart_conditions_field;\r\n    $condition_field.remove();\r\n    $cfield_logic.remove();\r\n    if ($condition_group.find('.condition-field,.condition-set').length < 1) {\r\n        $condition_group.find('.condition-group-fields').append(\"\\n            <div class=\\\"empty-conditions\\\">\\n                \".concat(empty_cart_conditions_field, \"\\n            </div>\\n        \"));\r\n    }\r\n    toggle_editing_mode(true);\r\n}\r\n/**\r\n * Get condition field markup.\r\n *\r\n * @param condition_type string\r\n * @param fields_count number\r\n * @return string\r\n */\r\nexport function get_condition_field(condition_type, data, fields_count) {\r\n    if (data === void 0) { data = null; }\r\n    if (fields_count === void 0) { fields_count = 0; }\r\n    var markup = '';\r\n    switch (condition_type) {\r\n        case 'product-category':\r\n            data = data ? data : {};\r\n            // if data is an array (old format) then we build\r\n            if (data.length)\r\n                data = { condition: '>', value: data, quantity: 0 };\r\n            markup += product_category_template(data);\r\n            break;\r\n        case 'customer-logged-in-status':\r\n            markup += customer_logged_in_status_template(data);\r\n            break;\r\n        case 'customer-user-role':\r\n            data = data ? data : [];\r\n            markup += customer_user_role_template(data);\r\n            break;\r\n        case 'disallowed-customer-user-role':\r\n            data = data ? data : [];\r\n            markup += disallowed_customer_user_role_template(data);\r\n            break;\r\n        case 'cart-quantity':\r\n            data = data ? data : {};\r\n            markup += cart_quantity_template(data);\r\n            break;\r\n        case 'cart-subtotal':\r\n            data = data ? data : {};\r\n            markup += cart_subtotal_template(data);\r\n            break;\r\n        default:\r\n            var field_key = condition_type.replace(/-/g, '_');\r\n            if (cart_condition_fields[field_key]) {\r\n                var _a = cart_condition_fields[field_key], template_callback = _a.template_callback, default_data_value = _a.default_data_value, title = _a.title;\r\n                if (default_data_value)\r\n                    data = data ? data : default_data_value;\r\n                if (template_callback)\r\n                    markup += template_callback(data, field_key);\r\n                // Handle Premium Conditions.\r\n                if (cart_condition_premium_notice) {\r\n                    var label_premium = cart_condition_premium_notice.label_premium;\r\n                    if (title && title.includes(label_premium)) {\r\n                        data = data ? data : {};\r\n                        markup += condition_premium_template(data, condition_type);\r\n                    }\r\n                }\r\n            }\r\n            break;\r\n    }\r\n    return markup && fields_count ? logic_template() + markup : markup;\r\n}\r\n/**\r\n * Check if condition field type is supported.\r\n *\r\n * @param type string\r\n */\r\nexport function is_condition_field(type) {\r\n    return acfw_edit_coupon.cart_conditon_field_options.indexOf(type) > -1;\r\n}\r\n","import { condition_options } from \"../../helper\";\r\n/**\r\n * Return cart subtotal condition field template markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n */\r\nexport default function cart_subtotal_template(data) {\r\n    var condition = data.condition, value = data.value, include_tax = data.include_tax;\r\n    var cart_condition_fields = acfw_edit_coupon.cart_condition_fields, condition_label = acfw_edit_coupon.condition_label;\r\n    var _a = cart_condition_fields.cart_subtotal, title = _a.title, desc = _a.desc, field = _a.field, tax_label = _a.tax_label;\r\n    return \"\\n    <div class=\\\"cart-subtotal-field condition-field\\\" data-type=\\\"cart-subtotal\\\">\\n    <a class=\\\"remove-condition-field\\\" href=\\\"javascript:void(0);\\\"><i class=\\\"dashicons dashicons-trash\\\"></i></a>\\n    <h3 class=\\\"condition-field-title\\\">\".concat(title, \"</h3>\\n    <label>\").concat(desc, \"</label>\\n    <div class=\\\"field-control\\\">\\n      <label>\").concat(condition_label, \"</label>\\n      <select class=\\\"condition-select\\\">\\n        \").concat(condition_options(condition), \"\\n      </select>\\n    </div>\\n    <div class=\\\"field-control\\\">\\n      <label>\").concat(field, \"</label>\\n      <input class=\\\"condition-value wc_input_price\\\" type=\\\"text\\\" value=\\\"\").concat(value ? value : \"\", \"\\\">\\n    </div>\\n    <div class=\\\"field-control no-label\\\">\\n      <label><input type=\\\"checkbox\\\" class=\\\"condition-include-tax\\\" type=\\\"checkbox\\\" \").concat(\"yes\" === include_tax ? \"checked\" : \"\", \" /> \").concat(tax_label, \"</label>\\n    </div>\\n    </div>\\n    \");\r\n}\r\n","var $ = jQuery;\r\nvar cart_condition_premium_notice = acfw_edit_coupon.cart_condition_premium_notice, cart_condition_fields = acfw_edit_coupon.cart_condition_fields;\r\n/**\r\n * Scrape condition group data.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function scrape_condition_group_data(condition_group) {\r\n    var _a;\r\n    var condition_fields = condition_group.querySelectorAll('.condition-set,.condition-field');\r\n    var fields = [];\r\n    if (condition_group.classList.contains('condition-group-logic'))\r\n        return {\r\n            type: 'group_logic',\r\n            value: (_a = condition_group.querySelector('select')) === null || _a === void 0 ? void 0 : _a.value,\r\n        };\r\n    condition_fields.forEach(function (condition_field) {\r\n        return fields.push(scrape_condition_field_data(condition_field));\r\n    });\r\n    return fields.length ? { type: 'group', fields: fields } : null;\r\n}\r\n/**\r\n * Scrape condition field data.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function scrape_condition_field_data(condition_field) {\r\n    var type = condition_field.dataset.type;\r\n    var field_data = { type: type, data: null };\r\n    var temp, temp2, temp3, temp4;\r\n    switch (type) {\r\n        case 'logic':\r\n            temp = condition_field.querySelector('select.condition-logic');\r\n            field_data.data = temp.value;\r\n            break;\r\n        case 'product-category':\r\n            temp = condition_field.querySelector('.condition-value');\r\n            temp2 = condition_field.querySelector('.condition-select');\r\n            temp3 = condition_field.querySelector('.condition-quantity');\r\n            field_data.data = {\r\n                condition: $(temp2).val(),\r\n                value: $(temp).val(),\r\n                quantity: $(temp3).val(),\r\n            };\r\n            break;\r\n        case 'customer-logged-in-status':\r\n        case 'customer-user-role':\r\n        case 'disallowed-customer-user-role':\r\n            temp = condition_field.querySelector('.condition-value');\r\n            field_data.data = $(temp).val();\r\n            break;\r\n        case 'cart-quantity':\r\n            temp = condition_field.querySelector('.condition-select');\r\n            temp2 = condition_field.querySelector('.condition-value');\r\n            field_data.data = {\r\n                condition: $(temp).val(),\r\n                value: parseInt($(temp2).val()),\r\n            };\r\n            break;\r\n        case 'cart-subtotal':\r\n            var includeTax = condition_field.querySelector('input.condition-include-tax');\r\n            temp = condition_field.querySelector('.condition-select');\r\n            temp2 = condition_field.querySelector('.condition-value');\r\n            field_data.data = {\r\n                condition: $(temp).val(),\r\n                value: $(temp2).val(),\r\n                include_tax: includeTax.checked ? 'yes' : 'no',\r\n            };\r\n            break;\r\n        default:\r\n            var field_key = type === null || type === void 0 ? void 0 : type.replace(/-/g, '_');\r\n            if (cart_condition_fields[field_key]) {\r\n                var _a = cart_condition_fields[field_key], scraper_callback = _a.scraper_callback, title = _a.title;\r\n                if (scraper_callback)\r\n                    field_data.data = scraper_callback(condition_field);\r\n                // Handle Premium Conditions.\r\n                if (cart_condition_premium_notice) {\r\n                    var label_premium = cart_condition_premium_notice.label_premium;\r\n                    if (title && title.includes(label_premium)) {\r\n                        var premium = condition_field.dataset.premium;\r\n                        field_data.data = premium ? JSON.parse(premium) : '';\r\n                    }\r\n                }\r\n            }\r\n            break;\r\n    }\r\n    return field_data;\r\n}\r\n","import { get_allowed_minimum_value, toggle_overlay, validate_url } from '../helper';\r\nimport { toggle_editing_mode } from './toggles';\r\nimport { scrape_condition_group_data } from './scrapers';\r\nvar $ = jQuery;\r\nvar post_id = woocommerce_admin_meta_boxes.post_id;\r\n/**\r\n * Save cart conditions.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function save_cart_conditions() {\r\n    var module_block = document.querySelector('#acfw_cart_conditions'), condition_groups = module_block.querySelectorAll('.condition-groups .condition-group, .condition-groups .condition-group-logic'), overlay = module_block.querySelector('.acfw-overlay');\r\n    var post_status = acfw_edit_coupon.post_status;\r\n    var post_id = woocommerce_admin_meta_boxes.post_id;\r\n    var form_data = [];\r\n    // remove product table edit form rows.\r\n    $(module_block).find('.acfw-styled-table tr.add-edit-form button.cancel').trigger('click');\r\n    condition_groups.forEach(function (condition_group) {\r\n        var data = scrape_condition_group_data(condition_group);\r\n        if (data)\r\n            form_data.push(data);\r\n    });\r\n    if (!validate_form_data(form_data)) {\r\n        vex.dialog.alert(acfw_edit_coupon.cart_conditions_invalid);\r\n        // Add save error flag class in #acfw_cart_conditions\r\n        $(module_block).addClass('save-error');\r\n        return;\r\n    }\r\n    var notice_settings = {\r\n        message: $(module_block).find('.text-input.non-qualifying-message-field').val(),\r\n        btn_text: $(module_block).find('.text-input.non-qualifying-btn-text-field').val(),\r\n        btn_url: $(module_block).find('.text-input.non-qualifying-btn-url-field').val(),\r\n        notice_type: $(module_block).find('.non-qualifying-notice-type-field').val(),\r\n    };\r\n    var auto_apply_display = $(module_block).find('.display-notice-auto-apply-field').is(':checked') ? 'yes' : '';\r\n    if (notice_settings.btn_url && !validate_url(notice_settings.btn_url)) {\r\n        vex.dialog.alert(acfw_edit_coupon.cart_notice_url_invalid);\r\n        $(module_block).addClass('save-error');\r\n        return;\r\n    }\r\n    toggle_overlay(overlay, 'show');\r\n    ajax_save({\r\n        cart_conditions: form_data,\r\n        notice_settings: notice_settings,\r\n        auto_apply_display: auto_apply_display,\r\n        nonce: $(module_block).data('nonce'),\r\n    }, function (response) {\r\n        if (response.status == 'success') {\r\n            // if coupon is not published yet, then save it as draft.\r\n            if (post_status !== 'publish') {\r\n                if (!$(\"input[name='post_title']\").val())\r\n                    $(\"input[name='post_title']\").val('coupon-' + post_id);\r\n                $(\"select[name='post_status']\").append(new Option('Published', 'publish')).val('publish');\r\n                $('#publishing-action').append(\"\\n                    <input type=\\\"hidden\\\" name=\\\"publish\\\" value=\\\"Publish\\\">\\n                \");\r\n                $('input#publish').click();\r\n            }\r\n        }\r\n        else {\r\n            if (response.error_msg)\r\n                vex.dialog.alert(response.error_msg);\r\n        }\r\n        toggle_editing_mode(false);\r\n        $(module_block).find('#save-cart-conditions').prop('disabled', true);\r\n        toggle_overlay(overlay, 'hide');\r\n    });\r\n}\r\n/**\r\n * Save on coupon publish.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function save_on_coupon_publish(e) {\r\n    var module_block = document.querySelector('#acfw_cart_conditions');\r\n    if (!$(module_block).data('editing'))\r\n        return;\r\n    e.preventDefault();\r\n    $(module_block).find('#save-cart-conditions').trigger('click');\r\n    // delay for 1 second to give time for\r\n    setTimeout(function () {\r\n        // If Cart Condition displays an error message then don't save the coupon\r\n        if ($(module_block).hasClass('save-error'))\r\n            $(module_block).removeClass('save-error');\r\n        else\r\n            $('form#post').submit();\r\n    }, 1000);\r\n}\r\n/**\r\n * Trigger AJAX save.\r\n *\r\n * @since 1.0.0\r\n *\r\n * @param form_data\r\n * @param callback\r\n * @return jQuery AJAX\r\n */\r\nfunction ajax_save(data, callback) {\r\n    data.action = 'acfw_save_cart_conditions';\r\n    data.coupon_id = post_id;\r\n    return $.post(ajaxurl, data, callback, 'json');\r\n}\r\n/**\r\n * Validate cart conditions form data.\r\n *\r\n * @since 1.0.0\r\n */\r\nfunction validate_form_data(form_data) {\r\n    var _a;\r\n    var group, field, data, type, objects, condition, value, min;\r\n    // return true if form data has a single empty group (initial layout).\r\n    if (form_data.length === 1 && ((_a = form_data[0].fields) === null || _a === void 0 ? void 0 : _a.length) < 1)\r\n        return true;\r\n    var prevGroupType = '';\r\n    for (var _i = 0, form_data_1 = form_data; _i < form_data_1.length; _i++) {\r\n        group = form_data_1[_i];\r\n        if (group['type'] === 'group_logic') {\r\n            // invalidate if the previous group of the logic is still a logic or non-existent.\r\n            if (!prevGroupType || prevGroupType === 'group_logic') {\r\n                return false;\r\n            }\r\n            prevGroupType = 'group_logic';\r\n            // skip validation for group logic fields.\r\n            continue;\r\n        }\r\n        prevGroupType = group['type'];\r\n        // invalidate if no fields detected.\r\n        if (group['fields'] === undefined || group['fields'].length < 1)\r\n            return false;\r\n        for (var _b = 0, _c = group['fields']; _b < _c.length; _b++) {\r\n            field = _c[_b];\r\n            type = field['type'];\r\n            data = field['data'];\r\n            // invalidate if atleast a single field has invalid data.\r\n            if (data === undefined || data === '' || data === null)\r\n                return false;\r\n            if (typeof data == 'object' && typeof data.length == 'number')\r\n                // product quantities field validation\r\n                objects = data;\r\n            else if (type === 'product-category') {\r\n                // product category validation\r\n                objects = data['value'];\r\n                condition = data['condition'];\r\n                value = data['quantity'];\r\n            }\r\n            else if (typeof data == 'object' && data.length === undefined) {\r\n                // has ordered before validation\r\n                objects = data['products'];\r\n                condition = data['condition'];\r\n                value = data['value'];\r\n            }\r\n            else\r\n                value = data;\r\n            min = get_allowed_minimum_value(condition);\r\n            if ((objects !== undefined && objects.length < 1) ||\r\n                (condition !== undefined && !condition) ||\r\n                (!Number.isInteger(value) && value !== undefined && !value) ||\r\n                (Number.isInteger(value) && value < min) ||\r\n                (typeof value == 'number' && value < min))\r\n                return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n","import { esc_attr } from '../helper';\r\nimport { toggle_editing_mode } from './toggles';\r\nvar $ = jQuery;\r\nvar product_table_buttons = acfw_edit_coupon.product_table_buttons, condition_field_options = acfw_edit_coupon.condition_field_options, bogo_form_fields = acfw_edit_coupon.bogo_form_fields;\r\n/**\r\n * Trigger the add table row form event.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function trigger_add_table_row_form() {\r\n    // @ts-ignore\r\n    var $button = $(this), $table = $button.closest('.acfw-styled-table'), $tbody = $table.find('tbody'), exclude = $table.data('exclude');\r\n    $tbody.find('tr.no-result').remove();\r\n    $tbody.append(get_add_edit_form_row_markup(exclude));\r\n    $('body').trigger('wc-enhanced-select-init');\r\n}\r\n/**\r\n * Trigger the edit table row form event.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function trigger_edit_table_row_form() {\r\n    // @ts-ignore\r\n    var $button = $(this), $row = $button.closest('tr'), $table = $button.closest('table'), $tbody = $row.closest('tbody'), data = $row.find('td.product').data('product');\r\n    var exclude = $table.data('exclude');\r\n    exclude.splice(exclude.indexOf(data.product_id), 1);\r\n    $tbody.find('tr.no-result').remove();\r\n    $row.replaceWith(get_add_edit_form_row_markup(exclude, data));\r\n    $table.data('exclude', exclude);\r\n    $table.find('.wc-product-search').data('exclude', exclude);\r\n    $('body').trigger('wc-enhanced-select-init');\r\n}\r\n/**\r\n * Actual function that saves/edits the table row.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function add_edit_table_row() {\r\n    // @ts-ignore\r\n    var $button = $(this), $row = $button.closest('tr'), $table = $button.closest('table.acfw-styled-table'), $search = $row.find('.wc-product-search'), $condition = $row.find('.condition-select'), $quantity = $row.find('.condition-quantity'), minimum = $condition.val() === '<' ? 1 : 0;\r\n    var exclude = $table.data('exclude');\r\n    if (!$search.val() || !$condition.val() || !$quantity.val() || parseInt($quantity.val()) < minimum) {\r\n        vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg);\r\n        return;\r\n    }\r\n    var productId = parseInt($search.val());\r\n    // don't proceed if product has already been added to the table.\r\n    // this happens when the same product has been added to a new row and trying to cancel the row that already has the same value.\r\n    if (exclude.includes(productId)) {\r\n        vex.dialog.alert(acfw_edit_coupon.product_exists_in_table);\r\n        return;\r\n    }\r\n    var data = {\r\n        product_id: productId,\r\n        condition: $condition.val(),\r\n        quantity: parseInt($quantity.val() + ''),\r\n        product_label: $search.find('option:selected').text(),\r\n        condition_label: $condition.find('option:selected').text(),\r\n    };\r\n    var markup = \"\\n        <tr>\\n            <td class=\\\"product\\\" data-product=\\\"\".concat(esc_attr(JSON.stringify(data)), \"\\\">\").concat(data.product_label, \"</td>\\n            <td class=\\\"condition\\\">\").concat(data.condition_label, \"</td>\\n            <td class=\\\"quantity\\\">\").concat(data.quantity, \"</td>\\n            <td class=\\\"actions\\\">\\n                <a class=\\\"edit\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"dashicons dashicons-edit\\\"></span></a>\\n                <a class=\\\"remove\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"dashicons dashicons-no\\\"></span></a>\\n            </td>\\n        </tr>\\n    \");\r\n    exclude.push(data.product_id);\r\n    $row.replaceWith(markup);\r\n    $table.data('exclude', exclude);\r\n    $table.find('.wc-product-search').data('exclude', exclude);\r\n    toggle_editing_mode(true);\r\n}\r\n/**\r\n * Trigger the cancel add/edit table row form event.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function cancel_add_edit_table_row() {\r\n    // @ts-ignore\r\n    var $button = jQuery(this), $row = $button.closest('tr'), $table = $button.closest('table'), $tbody = $row.closest('tbody'), data = $row.find('td.product').data('product'), colspan = $row.find('td').length;\r\n    var exclude = $table.data('exclude');\r\n    // don't proceed if product has already been added to the table.\r\n    // this happens when the same product has been added to a new row and trying to cancel the row that already has the same value.\r\n    if (exclude.includes(data.product_id)) {\r\n        vex.dialog.alert(acfw_edit_coupon.product_exists_in_table);\r\n        return;\r\n    }\r\n    if (typeof data == 'object') {\r\n        var product_id = data.product_id, product_label = data.product_label, condition_label = data.condition_label, quantity = data.quantity;\r\n        var markup = \"\\n            <tr>\\n                <td class=\\\"product\\\" data-product=\\\"\".concat(esc_attr(JSON.stringify(data)), \"\\\">\").concat(product_label, \"</td>\\n                <td class=\\\"condition\\\">\").concat(condition_label, \"</td>\\n                <td class=\\\"quantity\\\">\").concat(quantity, \"</td>\\n                <td class=\\\"actions\\\">\\n                    <a class=\\\"edit\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"dashicons dashicons-edit\\\"></span></a>\\n                    <a class=\\\"remove\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"dashicons dashicons-no\\\"></span></a>\\n                </td>\\n            </tr>\\n        \");\r\n        exclude.push(product_id);\r\n        $row.replaceWith(markup);\r\n        $table.data('exclude', exclude);\r\n        $table.find('.wc-product-search').data('exclude', exclude);\r\n    }\r\n    else {\r\n        $row.remove();\r\n        append_blank_placeholder_table_row($tbody, colspan);\r\n    }\r\n}\r\n/**\r\n * Remove product in table.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function product_table_remove_product() {\r\n    // @ts-ignore\r\n    var $button = jQuery(this), $row = $button.closest('tr'), $table = $row.closest('table'), $tbody = $table.find('tbody'), colspan = $row.find('td').length;\r\n    $row.remove();\r\n    var data = $row.find('td.product').data('product'), exclude = $table.data('exclude'), index = exclude.indexOf(parseInt(data.product_id));\r\n    if (index !== -1)\r\n        exclude.splice(index, 1);\r\n    $table.data('exclude', exclude);\r\n    $table.find('.wc-product-search').data('exclude', exclude);\r\n    append_blank_placeholder_table_row($tbody, colspan);\r\n    toggle_editing_mode(true);\r\n}\r\n/**\r\n * Append blank placeholder row on tables that are empty.\r\n *\r\n * @param {object} $tbody  Table tbody jQuery object.\r\n * @param {int}    colspan Number of row columns.\r\n */\r\nfunction append_blank_placeholder_table_row($tbody, colspan) {\r\n    if (colspan === void 0) { colspan = 3; }\r\n    if ($tbody.find('tr').length > 0)\r\n        return;\r\n    $tbody.append(\"\\n        <tr class=\\\"no-result\\\">\\n            <td colspan=\\\"\".concat(colspan, \"\\\">\").concat(acfw_edit_coupon.no_products_added, \"</td>\\n        </tr>\\n    \"));\r\n}\r\n/**\r\n * Get add/edit form row markup.\r\n *\r\n * @since 1.0.0\r\n *\r\n * @param {object} exclude Array of excluded product ids.\r\n * @param {object} data    Product data.\r\n * @return {string} Add/edit form row markup.\r\n */\r\nfunction get_add_edit_form_row_markup(exclude, data) {\r\n    if (exclude === void 0) { exclude = []; }\r\n    if (data === void 0) { data = false; }\r\n    var prodOption = '', condOption = '';\r\n    if (typeof data == 'object') {\r\n        var product_id = data.product_id, product_label = data.product_label;\r\n        prodOption = \"<option value=\\\"\".concat(product_id, \"\\\">\").concat(product_label, \"</option>\");\r\n        condOption = data.condition;\r\n    }\r\n    var add = product_table_buttons.add, edit = product_table_buttons.edit, cancel = product_table_buttons.cancel;\r\n    var exactly = condition_field_options.exactly, anyexcept = condition_field_options.anyexcept, morethan = condition_field_options.morethan, lessthan = condition_field_options.lessthan;\r\n    var type_to_search = bogo_form_fields.type_to_search;\r\n    var btnText = typeof data == 'object' ? edit : add, markup = \"\\n        <tr class=\\\"add-edit-form adding\\\">\\n            <td class=\\\"product\\\" data-product=\\\"\".concat(typeof data == 'object' ? esc_attr(JSON.stringify(data)) : 0, \"\\\">\\n                <div class=\\\"object-search-wrap\\\">\\n                    <select class=\\\"product-in-cart wc-product-search\\\"\\n                        data-placeholder=\\\"\").concat(type_to_search, \"\\\"\\n                        data-action=\\\"acfw_search_products\\\"\\n                        data-exclude=\\\"\").concat(esc_attr(JSON.stringify(exclude)), \"\\\">\").concat(prodOption, \"</select>\\n                </div>\\n            </td>\\n            <td class=\\\"condition\\\">\\n                <select class=\\\"condition-select\\\">\\n                    <option value=\\\"=\\\" \").concat(condOption == '=' ? 'selected' : '', \">\").concat(exactly, \"</option>\\n                    <option value=\\\"!=\\\" \").concat(condOption == '!=' ? 'selected' : '', \">\").concat(anyexcept, \"</option>\\n                    <option value=\\\">\\\" \").concat(condOption == '>' ? 'selected' : '', \">\").concat(morethan, \"</option>\\n                    <option value=\\\"<\\\" \").concat(condOption == '<' ? 'selected' : '', \">\").concat(lessthan, \"</option>\\n                </select>\\n            </td>\\n            <td class=\\\"quantity\\\">\\n                <input type=\\\"number\\\" class=\\\"condition-quantity\\\" value=\\\"\").concat(typeof data == 'object' ? data.quantity : 1, \"\\\" min=\\\"\").concat(condOption == '<' ? 1 : 0, \"\\\">\\n            </td>\\n            <td class=\\\"actions\\\">\\n                <button type=\\\"button\\\" class=\\\"condition-product-add button-primary\\\">\").concat(btnText, \"</button>\\n                <button type=\\\"button\\\" class=\\\"cancel button\\\">\").concat(cancel, \"</button>\\n            </td>\\n        </tr>\\n        \");\r\n    return markup;\r\n}\r\n","import { get_allowed_minimum_value } from '../helper';\r\nvar $ = jQuery;\r\n/**\r\n * Restrict number input minimum value.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function restrict_number_min_value() {\r\n    // @ts-ignore\r\n    var $input = $(this), min = parseInt($input.attr('min')), value = parseFloat($input.val() + '');\r\n    if (value < min)\r\n        $input.val(min);\r\n}\r\n/**\r\n * Restrict number input minimum value.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function update_input_minimum_value() {\r\n    // @ts-ignore\r\n    var $select = $(this), $field = $select.closest('.condition-field,.condition-set'), field_type = $field.data('type'), selector = field_type == 'product-quantity' || field_type == 'has-ordered-before' || field_type == 'product-category'\r\n        ? 'input.condition-quantity'\r\n        : 'input.condition-value', $input = $field.find(selector), condition = $select.val() + '';\r\n    var min = get_allowed_minimum_value(condition);\r\n    $input.attr('min', min).trigger('change');\r\n}\r\n/**\r\n * Updated has ordered before condition label.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function update_has_ordered_before_condition_label() {\r\n    var within_a_period_label = acfw_edit_coupon.within_a_period_label, number_of_orders_label = acfw_edit_coupon.number_of_orders_label;\r\n    // @ts-ignore\r\n    var $select = $(this), $field = $select.closest('.cart-quantity-field'), $label = $field.find('.condition-type-value label');\r\n    if ($select.val() == 'within-a-period')\r\n        $label.text(within_a_period_label);\r\n    else\r\n        $label.text(number_of_orders_label);\r\n}\r\n/**\r\n * Validate price field value on change.\r\n *\r\n * @since 1.2\r\n */\r\nexport function validate_price_field_value() {\r\n    // @ts-ignore\r\n    var $input = $(this), $condition_block = $input.closest('.condition-field'), $condition_field = $condition_block.find('select.condition-select'), condition_type = $condition_field.val() + '';\r\n    var input_price = $input.val() + '', minimum_price = get_allowed_minimum_value(condition_type);\r\n    if (acfw_edit_coupon.decimal_separator !== '.')\r\n        input_price = input_price.replace(acfw_edit_coupon.decimal_separator, '.');\r\n    if (!$condition_field || parseFloat(input_price) > minimum_price - 1)\r\n        return;\r\n    $input.val(minimum_price);\r\n}\r\n/**\r\n * Remove leading zeros from an input field.\r\n *\r\n * @since 1.2\r\n */\r\nexport function remove_leading_zeros() {\r\n    // @ts-ignore\r\n    var $input = $(this);\r\n    var value = $input.val();\r\n    if (value == '0' + acfw_edit_coupon.decimal_separator)\r\n        $input.val('0');\r\n    if (value == '0' || value.substring(0, 2) == '0' + acfw_edit_coupon.decimal_separator)\r\n        return;\r\n    value = value.replace(/^0+/, '');\r\n    value = value.substring(0, 1) == acfw_edit_coupon.decimal_separator ? '0' + value : value;\r\n    $input.val(value);\r\n}\r\n/**\r\n * Condition value type change (used in user and cart item meta condition fields).\r\n *\r\n * @since 1.4\r\n */\r\nexport function condition_value_type_change() {\r\n    // @ts-ignore\r\n    var $type = $(this), $field = $type.closest('.condition-field'), $condition = $field.find('select.condition-select'), $value = $field.find('input.condition-value');\r\n    switch ($type.val()) {\r\n        case 'string':\r\n            $value.prop('type', 'text');\r\n            $value.removeClass('wc_input_price');\r\n            if ($condition.val() == '>' || $condition.val() == '<')\r\n                $condition.val('=');\r\n            $condition.find(\"option[value='>'],option[value='<']\").prop('disabled', true);\r\n            break;\r\n        case 'number':\r\n            $value.prop('type', 'number');\r\n            $value.removeClass('wc_input_price');\r\n            $condition.find(\"option[value='>'],option[value='<']\").prop('disabled', false);\r\n            break;\r\n        case 'price':\r\n            $value.prop('type', 'text');\r\n            $value.addClass('wc_input_price');\r\n            $condition.find(\"option[value='>'],option[value='<']\").prop('disabled', false);\r\n            break;\r\n    }\r\n    $condition.trigger('change');\r\n}\r\n","/**\r\n * Condition notice template.\r\n *\r\n * @since 4.5.4\r\n * @page Admin Edit Coupon\r\n * @section Cart Conditions\r\n * */\r\n/**\r\n * Register Trigger - Remove all premium button\r\n *\r\n * @since 4.5.4\r\n * */\r\nfunction register_trigger_remove_all_premium() {\r\n    window.acfw_edit_coupon_triggers = window.acfw_edit_coupon_triggers || {};\r\n    window.acfw_edit_coupon_triggers.remove_all_premium_condition = function () {\r\n        // Remove all premium conditions.\r\n        jQuery(\".condition-field-premium .remove-condition-field\").each(function () {\r\n            // @ts-ignore\r\n            jQuery(this).trigger('click');\r\n        });\r\n        // Remove notice.\r\n        jQuery(\".condition-notice\").remove();\r\n        // Remove empty condition group.\r\n        jQuery(\".empty-conditions\").each(function () {\r\n            // @ts-ignore\r\n            jQuery(this).closest(\".condition-group\").find(\".remove-condition-group\").trigger('click');\r\n        });\r\n    };\r\n}\r\n/**\r\n * Extract premium cart conditions from cart condition data.\r\n *\r\n * @since 4.5.4\r\n * @param conditions IConditions - Cart conditions object.\r\n * @param data IData - Cart condition data that is stored in database.\r\n * */\r\nvar extract_premium_cart_conditions = function (conditions, data) {\r\n    var cart_condition_premium_notice = acfw_edit_coupon.cart_condition_premium_notice;\r\n    if (!cart_condition_premium_notice)\r\n        return {};\r\n    var premium = {};\r\n    for (var _i = 0, _a = Object.entries(data); _i < _a.length; _i++) {\r\n        var _b = _a[_i], index = _b[0], row = _b[1];\r\n        if (row.type === 'group_logic')\r\n            continue;\r\n        var _loop_1 = function (index_1, field) {\r\n            // Find condition object by key.\r\n            var condition = Object.entries(conditions).find(function (_a) {\r\n                var key = _a[0], condition = _a[1];\r\n                return condition.key === field.type;\r\n            });\r\n            // Check if the condition exists & premium.\r\n            if (condition) {\r\n                var key = condition[0], value = condition[1];\r\n                var label_premium = cart_condition_premium_notice.label_premium;\r\n                if (value.title.includes(label_premium)) {\r\n                    premium[key] = value;\r\n                }\r\n            }\r\n        };\r\n        for (var _c = 0, _d = Object.entries(row.fields); _c < _d.length; _c++) {\r\n            var _e = _d[_c], index_1 = _e[0], field = _e[1];\r\n            _loop_1(index_1, field);\r\n        }\r\n    }\r\n    return premium;\r\n};\r\n/**\r\n * Generate markup for premium cart condition notice.\r\n *\r\n * @since 4.5.4\r\n * */\r\nvar premium_cart_condition_notice = function (conditions, premium_cart_conditions) {\r\n    var cart_condition_premium_notice = acfw_edit_coupon.cart_condition_premium_notice;\r\n    var premium = [];\r\n    var markup = '';\r\n    markup = \"<div class=\\\"condition-notice\\\">\";\r\n    // Generate Remove All Button.\r\n    markup += \"<a id=\\\"remove-all-premium-condition\\\" href=\\\"javascript:void(0);\\\" onclick=\\\"acfw_edit_coupon_triggers.remove_all_premium_condition()\\\"><i class=\\\"dashicons dashicons-trash\\\"></i></a>\";\r\n    // Generate logo markup.\r\n    markup += \"<img src=\\\"\".concat(cart_condition_premium_notice.logo_img, \"\\\">\");\r\n    // Generate list of premium cart conditions.\r\n    var label_premium = cart_condition_premium_notice.label_premium;\r\n    Object.keys(premium_cart_conditions).map(function (key) {\r\n        var value = premium_cart_conditions[key];\r\n        premium.push(\"<b>\".concat(value.title.replace(\" (\".concat(label_premium, \")\"), ''), \"</b>\"));\r\n    });\r\n    // Generate notice markup.\r\n    cart_condition_premium_notice.label.map(function (label) {\r\n        label = premium.length && label.includes('{{premium}}') ? label.replace('{{premium}}', premium.join(', ')) : label;\r\n        markup += \"<p>\".concat(label, \"</p>\");\r\n    });\r\n    // Generate button markup.\r\n    markup += \"<div class=\\\"action-wrap\\\">\";\r\n    cart_condition_premium_notice.actions.map(function (action) {\r\n        var external = !action.url.includes('action=') ? \"target='_blank'\" : '';\r\n        markup += \"<a href=\\\"\".concat(action.url, \"\\\" \").concat(external, \" class=\\\"action-button primary\\\">\").concat(action.label, \"</a>\");\r\n    });\r\n    markup += \"</div>\";\r\n    markup += \"</div>\";\r\n    return markup;\r\n};\r\n/**\r\n * Return condition notice template markup.\r\n *\r\n * @since 4.5.4\r\n * @param data any[] - Cart condition data that is stored in database.\r\n */\r\nexport default function condition_notice_template(data) {\r\n    var cart_condition_fields = acfw_edit_coupon.cart_condition_fields;\r\n    var markup = '';\r\n    // If there's cart condition data, check if there's premium cart condition.\r\n    if (data.length) {\r\n        // Check if there's any premium cart condition.\r\n        var premium_cart_conditions = extract_premium_cart_conditions(cart_condition_fields, data);\r\n        // If there's premium cart condition, show notice.\r\n        if (Object.keys(premium_cart_conditions).length) {\r\n            markup += premium_cart_condition_notice(cart_condition_fields, premium_cart_conditions);\r\n            // Register trigger to remove all premium button.\r\n            register_trigger_remove_all_premium();\r\n        }\r\n    }\r\n    return markup;\r\n}\r\n","var $ = jQuery;\r\nexport function navigate_tabs() {\r\n    // @ts-ignore\r\n    var $tab = $(this), $module_block = $tab.closest('.woocommerce').find('#acfw_cart_conditions'), tab = $tab.data('tab');\r\n    $module_block.find('.panel').hide();\r\n    $module_block.find(\".panel[data-tab=\\\"\".concat(tab, \"\\\"]\")).show();\r\n    set_active_tab($tab);\r\n}\r\nfunction set_active_tab($tab) {\r\n    $('.acfw-cart-condition-tabs li').removeClass('active');\r\n    $tab.closest('li').addClass('active');\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { add_condition_group, remove_condition_group } from './groups';\r\nimport { add_condition_field, remove_condition_field, get_condition_field, is_condition_field } from './fields';\r\nimport { save_cart_conditions, save_on_coupon_publish } from './save';\r\nimport { toggle_add_condition_form, toggle_editing_mode, popuplate_taxonomy_term_options, popuplate_shipping_region_options, toggleNoticeTypeField, } from './toggles';\r\nimport { trigger_add_table_row_form, trigger_edit_table_row_form, add_edit_table_row, cancel_add_edit_table_row, product_table_remove_product, } from './table';\r\nimport { restrict_number_min_value, update_input_minimum_value, update_has_ordered_before_condition_label, validate_price_field_value, remove_leading_zeros, condition_value_type_change, } from './restrictions';\r\nimport logic_template from './templates/logic';\r\nimport condition_logic_template from './templates/condition_logic';\r\nimport condition_notice_template from './templates/condition_notice';\r\nimport condition_group_template from './templates/condition_group';\r\nimport { navigate_tabs } from './tabs';\r\nvar $ = jQuery;\r\nvar module_block = document.querySelector('#acfw_cart_conditions');\r\n/**\r\n * Add free products module events script.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport default function cart_conditions_module_events() {\r\n    $(module_block).on('click', '#add-cart-condition-group', add_condition_group);\r\n    $(module_block).on('click', 'a.remove-condition-group', remove_condition_group);\r\n    $(module_block).on('click', '.add-condition-field', add_condition_field);\r\n    $(module_block).on('click', 'a.remove-condition-field', remove_condition_field);\r\n    $(module_block).on('click', '.add-condition-trigger', toggle_add_condition_form);\r\n    $(module_block).on('click', '.cancel-add-condition-field', toggle_add_condition_form);\r\n    $(module_block).on('click', '.acfw-styled-table tfoot .add-table-row', trigger_add_table_row_form);\r\n    $(module_block).on('click', '.acfw-styled-table td.actions a.edit', trigger_edit_table_row_form);\r\n    $(module_block).on('click', 'tr.add-edit-form .actions .condition-product-add', add_edit_table_row);\r\n    $(module_block).on('click', 'tr.add-edit-form .actions .cancel', cancel_add_edit_table_row);\r\n    $(module_block).on('click', '.acfw-styled-table td.actions a.remove', product_table_remove_product);\r\n    $(module_block).on('click', '#save-cart-conditions', save_cart_conditions);\r\n    $(module_block).on('change', \"input[type='number']\", restrict_number_min_value);\r\n    $(module_block).on('change', 'select.condition-select', update_input_minimum_value);\r\n    $(module_block).on('change', 'select.has-ordered-before-type', update_has_ordered_before_condition_label);\r\n    $(module_block).on('change', '.wc_input_price', validate_price_field_value);\r\n    $(module_block).on('change', 'select.custom-taxonomy', popuplate_taxonomy_term_options);\r\n    $(module_block).on('change', '.shipping-zone-region-field select.condition-select', popuplate_shipping_region_options);\r\n    $(module_block).on('blur', '.wc_input_price', remove_leading_zeros);\r\n    $(module_block).on('change', 'select.value-type', condition_value_type_change);\r\n    $('form#post').on('submit', save_on_coupon_publish);\r\n    $(module_block).find('select').trigger('change');\r\n    $(module_block).css('min-height', $('#coupon_options').height());\r\n    $(module_block).on('change', 'input,select,textarea', function () {\r\n        toggle_editing_mode(true);\r\n    });\r\n    $(module_block)\r\n        .find('.condition-groups')\r\n        .each(function () {\r\n        // @ts-ignore\r\n        if ($(this).find('.condition-group-fields').length)\r\n            $(this).show();\r\n    });\r\n    $('.acfw-cart-condition-tabs').on('click', 'li a', navigate_tabs);\r\n    $(module_block).on('change', 'input.display-notice-auto-apply-field', toggleNoticeTypeField);\r\n    $(module_block).find('input.display-notice-auto-apply-field').trigger('change');\r\n    setTimeout(init_cart_conditions, 500);\r\n}\r\n/**\r\n * Init cart conditions. Save the current cart conditions data.\r\n *\r\n * @since 1.0.0\r\n */\r\nfunction init_cart_conditions() {\r\n    var _this = this;\r\n    var condition_groups = module_block.querySelector('.condition-groups');\r\n    var data = $(module_block).data('cart_conditions');\r\n    var asyncFunc = function () { return __awaiter(_this, void 0, void 0, function () {\r\n        var cart_conditions, markup, _i, data_1, row, fields_markup;\r\n        return __generator(this, function (_a) {\r\n            cart_conditions = [];\r\n            markup = '';\r\n            // Set cart condition notice if there's premium cart condition but the plugin is not active.\r\n            markup += condition_notice_template(data);\r\n            // Get condition group markup.\r\n            if (data.length) {\r\n                for (_i = 0, data_1 = data; _i < data_1.length; _i++) {\r\n                    row = data_1[_i];\r\n                    if (row.type == 'group') {\r\n                        fields_markup = load_condition_group_fields(row.fields);\r\n                        markup += condition_group_template(fields_markup);\r\n                    }\r\n                    else\r\n                        markup += condition_logic_template(row.value);\r\n                }\r\n            }\r\n            else\r\n                markup = condition_group_template();\r\n            // Output condition groups.\r\n            $(condition_groups).html(markup);\r\n            $(condition_groups).find('input,select').trigger('change');\r\n            $(condition_groups).find('.condition-group.new .add-condition-trigger').trigger('click');\r\n            $(condition_groups).find('.condition-group').removeClass('new');\r\n            return [2 /*return*/];\r\n        });\r\n    }); };\r\n    asyncFunc().then(function () {\r\n        setTimeout(function () { return $('body').trigger('wc-enhanced-select-init'); }, 1500);\r\n        toggle_editing_mode(false);\r\n    });\r\n}\r\n/**\r\n * Load condition group fields.\r\n *\r\n * @since 1.0.0\r\n *\r\n * @param fields\r\n */\r\nfunction load_condition_group_fields(fields) {\r\n    var markup = '';\r\n    var temp = '';\r\n    var addLogic = true;\r\n    for (var _i = 0, fields_1 = fields; _i < fields_1.length; _i++) {\r\n        var field = fields_1[_i];\r\n        var type = field.type, data = field.data;\r\n        if (!is_condition_field(type)) {\r\n            addLogic = false;\r\n            continue;\r\n        }\r\n        if (type == 'logic') {\r\n            temp = addLogic ? logic_template(data) : '';\r\n            continue;\r\n        }\r\n        var field_markup = get_condition_field(type, data);\r\n        if (field_markup) {\r\n            markup += temp + field_markup;\r\n            addLogic = true;\r\n        }\r\n        else {\r\n            addLogic = false;\r\n        }\r\n        temp = '';\r\n    }\r\n    return markup;\r\n}\r\n","export default function upsell_template() {\r\n    var upsell = acfw_edit_coupon.upsell;\r\n    if (!upsell)\r\n        return '';\r\n    return \"\\n  <div class=\\\"upsell\\\">\\n    \".concat(upsell.bogo_deals_type, \"\\n  </div>\");\r\n}\r\n","import { esc_attr } from '../../helper';\r\nimport upsell_template from './upsell';\r\n/**\r\n * Specific products condition type.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport default function combination_products_template(data, is_deals) {\r\n    if (is_deals === void 0) { is_deals = false; }\r\n    var products = data.products, quantity = data.quantity, discount_type = data.discount_type, discount_value = data.discount_value;\r\n    var bogo_form_fields = acfw_edit_coupon.bogo_form_fields, bogo_instructions = acfw_edit_coupon.bogo_instructions;\r\n    var quantityLabel = bogo_form_fields.quantity, productsLabel = bogo_form_fields.products, priceDiscountLabel = bogo_form_fields.price_discount, type_to_search = bogo_form_fields.type_to_search;\r\n    var priceType = discount_type ? data.discount_type : 'override';\r\n    var priceCol = is_deals ? get_price_column(priceType, discount_value) : '';\r\n    var priceTh = is_deals ? \"<th class=\\\"price\\\">\".concat(priceDiscountLabel, \"</th>\") : '';\r\n    var options = get_options(products);\r\n    var instructions = is_deals\r\n        ? \"\".concat(bogo_instructions.combination_get, \" \").concat(bogo_instructions.combination_get_2)\r\n        : bogo_instructions.combination_buy;\r\n    var markup = \"\\n      <p class=\\\"instructions\\\">\".concat(instructions, \"</p>\\n      <table class=\\\"acfw-styled-table combined-objects-form\\\" \\n          data-combined=\\\"\").concat(esc_attr(JSON.stringify(data)), \"\\\"\\n          data-isdeals=\\\"\").concat(is_deals, \"\\\"\\n          data-type=\\\"product\\\">\\n          <thead>\\n              <tr>\\n                  <th class=\\\"objects-list\\\">\").concat(productsLabel, \"</th>\\n                  <th class=\\\"quantity\\\">\").concat(quantityLabel, \"</th>\\n                  \").concat(priceTh, \"\\n              </tr>\\n          </thead>\\n          <tbody>\\n              <tr>\\n                  <td class=\\\"objects-list object\\\">\\n                      <select class=\\\"combined-products-list wc-product-search\\\"\\n                      data-placeholder=\\\"\").concat(type_to_search, \"\\\"\\n                      data-action=\\\"acfw_search_products\\\"\\n                      data-exclude=\\\"\\\" multiple>\").concat(options, \"</select>\\n                  </td>\\n                  <td class=\\\"quantity\\\">\\n                      <input type=\\\"number\\\" class=\\\"condition-quantity\\\" value=\\\"\").concat(quantity, \"\\\" min=\\\"1\\\">\\n                  </td>\\n                  \").concat(priceCol, \"\\n              </tr>\\n          </tbody>\\n      </table>\\n      \").concat(upsell_template(), \"\\n    \");\r\n    return markup;\r\n}\r\n/**\r\n * Get product(s) price column.\r\n *\r\n * @since 1.15\r\n *\r\n * @param priceType\r\n * @param discount_value\r\n */\r\nfunction get_price_column(priceType, discount_value) {\r\n    if (discount_value === void 0) { discount_value = '0'; }\r\n    var currency_symbol = acfw_edit_coupon.currency_symbol, discount_field_options = acfw_edit_coupon.discount_field_options;\r\n    var override = discount_field_options.override, percent = discount_field_options.percent, fixed = discount_field_options.fixed;\r\n    return \"\\n    <td class=\\\"price\\\">\\n        <div>\\n        <select class=\\\"discount_type\\\">\\n            <option value=\\\"override\\\" \".concat(priceType == 'override' ? 'selected' : '', \">\").concat(currency_symbol, \" : \").concat(override, \"</option>\\n            <option value=\\\"percent\\\" \").concat(priceType == 'percent' ? 'selected' : '', \">% : \").concat(percent, \"</option>\\n            <option value=\\\"fixed\\\" \").concat(priceType == 'fixed' ? 'selected' : '', \">-\").concat(currency_symbol, \" : \").concat(fixed, \"</option>\\n        </select>\\n        <input type=\\\"text\\\" class=\\\"discount_value short wc_input_price\\\" value=\\\"\").concat(discount_value, \"\\\">\\n        </div>\\n    </td>\\n    \");\r\n}\r\n/**\r\n * Get product(s) row options.\r\n *\r\n * @since 1.15\r\n *\r\n * @param products\r\n */\r\nfunction get_options(products) {\r\n    if (typeof products != 'object' || !products.length)\r\n        return '';\r\n    var options = '';\r\n    for (var _i = 0, products_1 = products; _i < products_1.length; _i++) {\r\n        var p = products_1[_i];\r\n        options += \"<option value=\\\"\".concat(p.product_id, \"\\\" selected>\").concat(p.label, \"</option>\");\r\n    }\r\n    return options;\r\n}\r\n","import { esc_attr } from '../../helper';\r\nimport upsell_template from './upsell';\r\n/**\r\n * Product cagtegories condition type.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport default function product_categories_template(data, is_deals) {\r\n    if (is_deals === void 0) { is_deals = false; }\r\n    var categories = data.categories, quantity = data.quantity, discount_type = data.discount_type, discount_value = data.discount_value;\r\n    var bogo_form_fields = acfw_edit_coupon.bogo_form_fields, bogo_instructions = acfw_edit_coupon.bogo_instructions;\r\n    var quantityLabel = bogo_form_fields.quantity, categoriesLabel = bogo_form_fields.categories, priceDiscountLabel = bogo_form_fields.price_discount, type_to_search = bogo_form_fields.type_to_search;\r\n    var priceType = discount_type ? data.discount_type : 'override';\r\n    var priceCol = is_deals ? get_price_column(priceType, discount_value) : '';\r\n    var priceTh = is_deals ? \"<th class=\\\"price\\\">\".concat(priceDiscountLabel, \"</th>\") : '';\r\n    var options = get_options(categories);\r\n    var instructions = is_deals ? \"\".concat(bogo_instructions.categories_get) : bogo_instructions.categories_buy;\r\n    var markup = \"\\n      <p class=\\\"instructions\\\">\".concat(instructions, \"</p>\\n      <table class=\\\"acfw-styled-table combined-objects-form\\\" \\n          data-combined=\\\"\").concat(esc_attr(JSON.stringify(data)), \"\\\"\\n          data-isdeals=\\\"\").concat(is_deals, \"\\\"\\n          data-type=\\\"category\\\">\\n          <thead>\\n              <tr>\\n                  <th class=\\\"objects-list\\\">\").concat(categoriesLabel, \"</th>\\n                  <th class=\\\"quantity\\\">\").concat(quantityLabel, \"</th>\\n                  \").concat(priceTh, \"\\n              </tr>\\n          </thead>\\n          <tbody>\\n              <tr>\\n                  <td class=\\\"objects-list object\\\">\\n                      <select class=\\\"product-categories-list wc-product-search\\\"\\n                      data-placeholder=\\\"\").concat(type_to_search, \"\\\"\\n                      data-action=\\\"acfw_search_product_category\\\"\\n                      data-exclude=\\\"\\\" multiple>\").concat(options, \"</select>\\n                  </td>\\n                  <td class=\\\"quantity\\\">\\n                      <input type=\\\"number\\\" class=\\\"condition-quantity\\\" value=\\\"\").concat(quantity, \"\\\" min=\\\"1\\\">\\n                  </td>\\n                  \").concat(priceCol, \"\\n              </tr>\\n          </tbody>\\n      </table>\\n      \").concat(upsell_template(), \"\\n    \");\r\n    return markup;\r\n}\r\n/**\r\n * Get product(s) price column.\r\n *\r\n * @since 1.15\r\n *\r\n * @param priceType\r\n * @param discount_value\r\n */\r\nfunction get_price_column(priceType, discount_value) {\r\n    if (discount_value === void 0) { discount_value = '0'; }\r\n    var currency_symbol = acfw_edit_coupon.currency_symbol, discount_field_options = acfw_edit_coupon.discount_field_options;\r\n    var override = discount_field_options.override, percent = discount_field_options.percent, fixed = discount_field_options.fixed;\r\n    return \"\\n    <td class=\\\"price\\\">\\n        <div>\\n        <select class=\\\"discount_type\\\">\\n            <option value=\\\"override\\\" \".concat(priceType == 'override' ? 'selected' : '', \">\").concat(currency_symbol, \" : \").concat(override, \"</option>\\n            <option value=\\\"percent\\\" \").concat(priceType == 'percent' ? 'selected' : '', \">% : \").concat(percent, \"</option>\\n            <option value=\\\"fixed\\\" \").concat(priceType == 'fixed' ? 'selected' : '', \">-\").concat(currency_symbol, \" : \").concat(fixed, \"</option>\\n        </select>\\n        <input type=\\\"text\\\" class=\\\"discount_value short wc_input_price\\\" value=\\\"\").concat(discount_value, \"\\\">\\n        </div>\\n    </td>\\n    \");\r\n}\r\n/**\r\n * Get product(s) row options.\r\n *\r\n * @since 1.15\r\n *\r\n * @param categories\r\n */\r\nfunction get_options(categories) {\r\n    if (typeof categories != 'object' || !categories.length)\r\n        return '';\r\n    var options = '';\r\n    for (var _i = 0, categories_1 = categories; _i < categories_1.length; _i++) {\r\n        var c = categories_1[_i];\r\n        options += \"<option value=\\\"\".concat(c.category_id, \"\\\" selected>\").concat(c.label, \"</option>\");\r\n    }\r\n    return options;\r\n}\r\n","import { esc_attr } from \"../../helper\";\r\n/**\r\n * Product table row first column template.\r\n *\r\n * @param data\r\n */\r\nexport default function product_first_column_template(data) {\r\n    var product_id = data.product_id, product_label = data.product_label;\r\n    return \"\\n    <td class=\\\"product product-\".concat(product_id, \" object\\\" data-product=\\\"\").concat(esc_attr(JSON.stringify(data)), \"\\\">\\n        \").concat(product_label, \"\\n    </td>\\n    \");\r\n}\r\n","/**\r\n * Placeholder table row.\r\n *\r\n * @since 1.15\r\n *\r\n * @param colspan\r\n */\r\nexport default function placeholder_table_row_template(colspan, type) {\r\n    if (colspan === void 0) { colspan = 3; }\r\n    if (type === void 0) { type = \"product\"; }\r\n    var no_products_added = acfw_edit_coupon.no_products_added, no_categories_added = acfw_edit_coupon.no_categories_added;\r\n    return \"\\n    <tr class=\\\"no-result\\\">\\n        <td colspan=\\\"\".concat(colspan, \"\\\">\").concat(type == \"category\" ? no_categories_added : no_products_added, \"</td>\\n    </tr>\\n    \");\r\n}\r\n","import { esc_attr } from \"../../helper\";\r\nimport product_first_column_template from \"./product_first_column\";\r\nimport placeholder_row_template from \"./placeholder_row\";\r\n/**\r\n * Specific products condition type.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport default function specific_products_template(data, data_type, is_deals) {\r\n    if (is_deals === void 0) { is_deals = false; }\r\n    var add_product_label = acfw_edit_coupon.add_product_label, bogo_form_fields = acfw_edit_coupon.bogo_form_fields, bogo_instructions = acfw_edit_coupon.bogo_instructions;\r\n    var quantityLabel = bogo_form_fields.quantity, productLabel = bogo_form_fields.product;\r\n    var instructions = is_deals ? \"\".concat(bogo_instructions.specific_get) : bogo_instructions.specific_buy;\r\n    var colspan = is_deals ? 4 : 3;\r\n    var priceTh = is_deals ? \"<th class=\\\"price\\\">Price/Discount</th>\" : \"\";\r\n    var tbody = \"\";\r\n    var exclude = [];\r\n    if (data.length >= 1 && data_type == \"specific-products\") {\r\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\r\n            var product = data_1[_i];\r\n            var quantity = product.quantity, discount_type = product.discount_type, discount_value = product.discount_value;\r\n            var priceCol = is_deals ? get_price_column(discount_type, discount_value) : \"\";\r\n            exclude.push(product.product_id);\r\n            tbody += \"\\n        <tr>\\n          \".concat(product_first_column_template(product), \"\\n          <td class=\\\"quantity\\\">\").concat(quantity, \"</td>\\n          \").concat(priceCol, \"\\n          <td class=\\\"actions\\\">\\n            <a class=\\\"edit\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"dashicons dashicons-edit\\\"></span></a>\\n            <a class=\\\"remove\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"dashicons dashicons-no\\\"></span></a>\\n          </td>\\n        </tr>\\n      \");\r\n        }\r\n    }\r\n    else {\r\n        tbody = placeholder_row_template(colspan);\r\n    }\r\n    var markup = \"\\n    <p class=\\\"instructions\\\">\".concat(instructions, \"</p>\\n    <table class=\\\"product-quantity-condition-table acfw-styled-table\\\" \\n      data-type=\\\"product\\\" data-exclude=\\\"\").concat(esc_attr(JSON.stringify(exclude)), \"\\\" \\n      data-isdeals=\\\"\").concat(is_deals, \"\\\">\\n      <thead>\\n        <tr>\\n          <th class=\\\"product\\\">\").concat(productLabel, \"</th>\\n          <th class=\\\"quantity\\\">\").concat(quantityLabel, \"</th>\\n          \").concat(priceTh, \"\\n          <th class=\\\"actions\\\"></th>\\n        </tr>\\n      </thead>\\n      <tbody>\").concat(tbody, \"</tbody>\\n      <tfoot>\\n        <tr>\\n          <td colspan=\\\"\").concat(colspan, \"\\\">\\n            <a class=\\\"add-table-row\\\" href=\\\"javascript:void(0);\\\">\\n              <i class=\\\"dashicons dashicons-plus\\\"></i>\\n              \").concat(add_product_label, \"\\n            </a>\\n          </td>\\n        </tr>\\n      </tfoot>\\n    </table>\\n  \");\r\n    return markup;\r\n}\r\n/**\r\n * Get price column.\r\n *\r\n * @param discount_type\r\n * @param discount_value\r\n */\r\nfunction get_price_column(discount_type, discount_value) {\r\n    if (discount_type === void 0) { discount_type = \"override\"; }\r\n    if (discount_value === void 0) { discount_value = \"0\"; }\r\n    return \"<td class=\\\"price\\\">\\n    (\".concat(discount_type, \") \").concat(discount_value, \"\\n  </td>\");\r\n}\r\n","import { esc_attr } from \"../../helper\";\r\nimport upsell_template from \"./upsell\";\r\n/**\r\n * Any Products template.\r\n */\r\nexport default function any_products_template(data, isDeals) {\r\n    if (isDeals === void 0) { isDeals = false; }\r\n    if (isDeals)\r\n        return apply_template(data);\r\n    else\r\n        return trigger_template(data);\r\n}\r\n/**\r\n * Any products trigger template.\r\n *\r\n * @since 2.6\r\n *\r\n * @param data\r\n */\r\nfunction trigger_template(data) {\r\n    var quantity = data.quantity;\r\n    var bogo_instructions = acfw_edit_coupon.bogo_instructions, bogo_form_fields = acfw_edit_coupon.bogo_form_fields;\r\n    return \"\\n    <p class=\\\"instructions\\\">\".concat(bogo_instructions.anyproducts_buy, \"</p>\\n    <div class=\\\"any-products-trigger-form any-products-form\\\" data-anyproducts=\\\"\").concat(esc_attr(JSON.stringify(data)), \"\\\">\\n      <div class=\\\"trigger-field-row trigger-quantity-field-row\\\">\\n        <label for=\\\"any_products_trigger_qty\\\">\").concat(bogo_form_fields.trigger_quantity, \"</label>\\n        <input type=\\\"number\\\" id=\\\"any_products_trigger_qty\\\" class=\\\"condition-quantity\\\" value=\\\"\").concat(quantity !== null && quantity !== void 0 ? quantity : \"1\", \"\\\" min=\\\"1\\\" />\\n      </div>\\n    </div>\\n    \").concat(upsell_template(), \"\\n  \");\r\n}\r\n/**\r\n * Any products apply template.\r\n *\r\n * @since 2.6\r\n *\r\n * @param data\r\n */\r\nfunction apply_template(data) {\r\n    var quantity = data.quantity, discount_type = data.discount_type, discount_value = data.discount_value;\r\n    var currency_symbol = acfw_edit_coupon.currency_symbol, discount_field_options = acfw_edit_coupon.discount_field_options, bogo_form_fields = acfw_edit_coupon.bogo_form_fields, bogo_instructions = acfw_edit_coupon.bogo_instructions;\r\n    var override = discount_field_options.override, percent = discount_field_options.percent, fixed = discount_field_options.fixed;\r\n    var quantityLabel = bogo_form_fields.quantity, priceDiscountLabel = bogo_form_fields.price_discount, discountTypeLabel = bogo_form_fields.discount_type;\r\n    var priceType = discount_type ? data.discount_type : \"override\";\r\n    return \"\\n    <p class=\\\"instructions\\\">\".concat(bogo_instructions.anyproducts_get, \"</p>\\n    <table class=\\\"acfw-styled-table any-products-apply-form any-products-form\\\" data-anyproducts=\\\"\").concat(esc_attr(JSON.stringify(data)), \"\\\">\\n      <thead>\\n        <tr>\\n          <th class=\\\"quantity\\\">\").concat(quantityLabel, \"</th>\\n          <th class=\\\"type\\\">\").concat(discountTypeLabel, \"</th>\\n          <th class=\\\"price\\\">\").concat(priceDiscountLabel, \"</th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        <tr>\\n          <td class=\\\"quantity object\\\">\\n            <input type=\\\"number\\\" class=\\\"condition-quantity\\\" value=\\\"\").concat(quantity !== null && quantity !== void 0 ? quantity : \"1\", \"\\\" min=\\\"1\\\">\\n          </td>\\n          <td class=\\\"type\\\">\\n            <select class=\\\"discount_type\\\">\\n              <option value=\\\"override\\\" \").concat(priceType == \"override\" ? \"selected\" : \"\", \">\").concat(currency_symbol, \" : \").concat(override, \"</option>\\n              <option value=\\\"percent\\\" \").concat(priceType == \"percent\" ? \"selected\" : \"\", \">% : \").concat(percent, \"</option>\\n              <option value=\\\"fixed\\\" \").concat(priceType == \"fixed\" ? \"selected\" : \"\", \">-\").concat(currency_symbol, \" : \").concat(fixed, \"</option>\\n            </select>\\n          </td>\\n          <td class=\\\"price\\\">\\n            <input type=\\\"text\\\" class=\\\"discount_value short wc_input_price\\\" value=\\\"\").concat(discount_value !== null && discount_value !== void 0 ? discount_value : \"0\", \"\\\">\\n          </td>\\n        </tr>\\n      </tbody>\\n    </table>\\n    \").concat(upsell_template(), \"\\n  \");\r\n}\r\n","import combination_products_template from './templates/combination_products';\r\nimport product_categories_template from './templates/product_categories';\r\nimport specific_products_template from './templates/specific_products';\r\nimport any_products_template from './templates/any_products';\r\nvar $ = jQuery;\r\nvar module_block = document.querySelector('#acfw_bogo_deals');\r\n/**\r\n * Toggle editing mode.\r\n *\r\n * @since 1.0.0\r\n *\r\n * @param {toggle} bool True to toggle editing mode, false otherwise.\r\n */\r\nexport function toggle_editing_mode(toggle) {\r\n    $(module_block).data('editing', toggle);\r\n    $(module_block).find('#save-bogo-deals').prop('disabled', !toggle);\r\n}\r\n/**\r\n * Toggle condition type.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function toggle_block_data_type(e) {\r\n    // @ts-ignore\r\n    var $select = $(this), block_type = $select.data('block'), condition_block = module_block.querySelector('.bogo-conditions-block'), deals_block = module_block.querySelector('.bogo-product-deals-block'), bogo_deals = $(module_block).data('bogo_deals'), conditions = bogo_deals.conditions ? bogo_deals.conditions : null, deals = bogo_deals.deals ? bogo_deals.deals : null, block_data_type = block_type == 'conditions' ? bogo_deals.conditions_type : bogo_deals.deals_type;\r\n    // get correct block data.\r\n    var block_data = null;\r\n    if ('conditions' === block_type)\r\n        block_data = bogo_deals.conditions_type == $select.val() ? conditions : block_data;\r\n    else\r\n        block_data = bogo_deals.deals_type == $select.val() ? deals : block_data;\r\n    var isDeal = block_type == 'deals';\r\n    var isPremium = false, markup, tempBlock;\r\n    switch ($select.val()) {\r\n        case 'combination-products':\r\n            markup = combination_products_template(block_data !== null && block_data !== void 0 ? block_data : {}, isDeal);\r\n            isPremium = true;\r\n            break;\r\n        case 'product-categories':\r\n            markup = product_categories_template(block_data !== null && block_data !== void 0 ? block_data : [], isDeal);\r\n            isPremium = true;\r\n            break;\r\n        case 'any-products':\r\n            markup = any_products_template(block_data !== null && block_data !== void 0 ? block_data : {}, isDeal);\r\n            isPremium = true;\r\n            break;\r\n        case 'specific-products':\r\n        default:\r\n            markup = specific_products_template(block_data !== null && block_data !== void 0 ? block_data : {}, block_data_type, isDeal);\r\n            isPremium = false;\r\n            break;\r\n    }\r\n    if (block_type == 'conditions') {\r\n        $(condition_block)\r\n            .html(markup)\r\n            .find('input.condition-quantity')\r\n            .trigger('change' === e.type ? 'change' : 'acfw_fetch_data');\r\n        tempBlock = condition_block;\r\n    }\r\n    else {\r\n        var $multipleDesc = $(module_block).find('.multiple-items-desc');\r\n        if ('specific-products' !== $select.val())\r\n            $multipleDesc.show();\r\n        else\r\n            $multipleDesc.hide();\r\n        $(deals_block)\r\n            .html(markup)\r\n            .find('input.condition-quantity')\r\n            .trigger('change' === e.type ? 'change' : 'acfw_fetch_data');\r\n        tempBlock = deals_block;\r\n    }\r\n    if (isPremium && undefined !== acfw_edit_coupon.upsell)\r\n        $(tempBlock).addClass('premium-only');\r\n    else\r\n        $(tempBlock).removeClass('premium-only');\r\n    $('body').trigger('wc-enhanced-select-init');\r\n    $('body').trigger('init_tooltips');\r\n}\r\n/**\r\n * Force apply type to \"Same Product\" block when \"each-product\" is selected as base for Any Products trigger.\r\n *\r\n * @since 1.4\r\n */\r\nexport function forceApplyToSameProductForEachProductBase() {\r\n    // @ts-ignore\r\n    var $this = $(this);\r\n    var $module = $this.closest('#acfw_bogo_deals');\r\n    var $applySelect = $module.find('#bogo-deals-type');\r\n    var base = $this.val();\r\n    if ('each-product' === base) {\r\n        $applySelect.val('same-products').trigger('change');\r\n    }\r\n}\r\nexport function toggleRepeatLimitField() {\r\n    // @ts-ignore\r\n    var $this = $(this);\r\n    var $module = $this.closest('#acfw_bogo_deals');\r\n    if ('repeat' === $this.val()) {\r\n        $module.find('.repeat-limit-field-wrap').addClass('show');\r\n        $module.find('#bogo-repeat-limit').prop('disabled', false);\r\n    }\r\n    else {\r\n        $module.find('.repeat-limit-field-wrap').removeClass('show');\r\n        $module.find('#bogo-repeat-limit').prop('disabled', true);\r\n    }\r\n}\r\n/**\r\n * Validate trigger and apply type compatibility.\r\n *\r\n * @param {JQuery} $select Trigger/apply type select element.\r\n * @param {isDeals} isDeals Flag if it's for deals or not.\r\n * @returns\r\n */\r\nfunction validateTriggerApplyCompatibility($select, isDeals) {\r\n    var $module = $select.closest('#acfw_bogo_deals');\r\n    var triggerType = $module.find('select#bogo-condition-type').val();\r\n    var applyType = $module.find('select#bogo-deals-type').val();\r\n    var baseType = $module.find(\"input[name='acfw_bogo_trigger_base']:checked\").val();\r\n    if (isDeals && 'any-products' === triggerType && 'each-product' === baseType && 'same-products' !== applyType) {\r\n        $select.val('same-products');\r\n        vex.dialog.alert({\r\n            unsafeMessage: \"Any products trigger type based on each product's quantity can only work with <code>Same Products</code> apply type.\",\r\n        });\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport { toggle_overlay, validateDiscount } from '../helper';\r\nimport { toggle_editing_mode } from './toggles';\r\nimport placeholder_table_row_template from './templates/placeholder_row';\r\nvar $ = jQuery;\r\nvar module_block = document.querySelector('#acfw_bogo_deals');\r\nvar post_id = woocommerce_admin_meta_boxes.post_id;\r\n/**\r\n * Save BOGO Deals.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function save_bogo_deals() {\r\n    var _a, _b;\r\n    // cancel product table edit form rows.\r\n    $('#acfw_bogo_deals').find('.acfw-styled-table tr.add-edit-form button.cancel').trigger('click');\r\n    var post_status = acfw_edit_coupon.post_status, upsell = acfw_edit_coupon.upsell;\r\n    var condition_rows = module_block.querySelectorAll('.bogo-conditions-block table.acfw-styled-table tbody td.object,.bogo-conditions-block .any-products-trigger-form'), deal_rows = module_block.querySelectorAll('.bogo-product-deals-block table.acfw-styled-table tbody td.object'), overlay = module_block.querySelector('.acfw-overlay'), type_field = module_block.querySelector(\"input[name='bogo_type']:checked\"), conditions_type = $(module_block).find('#bogo-condition-type').val(), deals_type = $(module_block).find('#bogo-deals-type').val(), repeat_limit = parseInt($(module_block).find('#bogo-repeat-limit').val()), $notice_options = $(module_block).find('.notice-option');\r\n    var conditions = get_data(condition_rows, conditions_type);\r\n    var deals = get_data(deal_rows, deals_type);\r\n    var type = type_field ? type_field.value : null;\r\n    // error flag variables.\r\n    var isTriggerError = false;\r\n    var isApplyError = false;\r\n    // validate any products trigger data.\r\n    if ('any-products' === conditions_type) {\r\n        isTriggerError = (conditions === null || conditions === void 0 ? void 0 : conditions.quantity) < 1;\r\n    }\r\n    // validate any products apply data.\r\n    if ('any-products' === deals_type) {\r\n        isApplyError = !(deals === null || deals === void 0 ? void 0 : deals.discount_type) || !(deals === null || deals === void 0 ? void 0 : deals.discount_value) || (deals === null || deals === void 0 ? void 0 : deals.quantity) < 1;\r\n    }\r\n    // validate combination products trigger data.\r\n    if ('combination-products' === conditions_type) {\r\n        isTriggerError = !((_a = conditions === null || conditions === void 0 ? void 0 : conditions.products) === null || _a === void 0 ? void 0 : _a.length) || (conditions === null || conditions === void 0 ? void 0 : conditions.quantity) < 1;\r\n    }\r\n    // validate combination products apply data.\r\n    if ('combination-products' === deals_type) {\r\n        isApplyError = !((_b = deals === null || deals === void 0 ? void 0 : deals.products) === null || _b === void 0 ? void 0 : _b.length) || !(deals === null || deals === void 0 ? void 0 : deals.discount_type) || !(deals === null || deals === void 0 ? void 0 : deals.discount_value) || (deals === null || deals === void 0 ? void 0 : deals.quantity) < 1;\r\n    }\r\n    if ((conditions === null || conditions === void 0 ? void 0 : conditions.length) < 1 || (deals === null || deals === void 0 ? void 0 : deals.length) < 1 || !type || isTriggerError || isApplyError) {\r\n        vex.dialog.alert(acfw_edit_coupon.bogo_deals_save_error_msg);\r\n        // Add save error flag class in #acfw_bogo_deals\r\n        $(module_block).addClass('save-error');\r\n        return;\r\n    }\r\n    if (upsell !== undefined && (conditions_type !== 'specific-products' || deals_type !== 'specific-products')) {\r\n        vex.dialog.alert(acfw_edit_coupon.bogo_deals_save_error_msg);\r\n        // Add save error flag class in #acfw_bogo_deals\r\n        $(module_block).addClass('save-error');\r\n        return;\r\n    }\r\n    // validate discount by type for any products and combination products deal type.\r\n    if (['any-products', 'combination-products'].includes(deals_type) &&\r\n        !validateDiscount(deals === null || deals === void 0 ? void 0 : deals.discount_type, deals === null || deals === void 0 ? void 0 : deals.discount_value)) {\r\n        vex.dialog.alert(acfw_edit_coupon.discount_type_value_error_msg);\r\n        // Add save error flag class in #acfw_bogo_deals\r\n        $(module_block).addClass('save-error');\r\n        return;\r\n    }\r\n    var notice_settings = {\r\n        message: $notice_options.find(\"textarea[name='acfw_bogo_notice_message_text']\").val(),\r\n        button_text: $notice_options.find(\"input[name='acfw_bogo_notice_button_text']\").val(),\r\n        button_url: $notice_options.find(\"input[name='acfw_bogo_notice_button_url']\").val(),\r\n        notice_type: $notice_options.find(\"select[name='acfw_bogo_notice_type']\").val(),\r\n    };\r\n    toggle_overlay(overlay, 'show');\r\n    $(module_block).trigger('save_bogo_deals');\r\n    var dataToSave = {\r\n        conditions: conditions,\r\n        deals: deals,\r\n        conditions_type: conditions_type,\r\n        deals_type: deals_type,\r\n        repeat_limit: repeat_limit,\r\n        type: type,\r\n        notice_settings: notice_settings,\r\n        nonce: $(module_block).data('nonce'),\r\n    };\r\n    $.post(ajaxurl, __assign({ action: 'acfw_save_bogo_deals', coupon_id: post_id }, dataToSave), function (response) {\r\n        if (response.status == 'success') {\r\n            // replace data in state with latest one.\r\n            $(module_block).data('bogo_deals', dataToSave);\r\n            // if coupon is not published yet, then save it as draft.\r\n            if (post_status !== 'publish') {\r\n                if (!$(\"input[name='post_title']\").val())\r\n                    $(\"input[name='post_title']\").val('coupon-' + post_id);\r\n                $(\"select[name='post_status']\").append(new Option('Published', 'publish')).val('publish');\r\n                $('#publishing-action').append(\"\\n                    <input type=\\\"hidden\\\" name=\\\"publish\\\" value=\\\"Publish\\\">\\n                \");\r\n                $('input#publish').click();\r\n            }\r\n        }\r\n        else {\r\n            if (response.error_msg)\r\n                vex.dialog.alert(response.error_msg);\r\n        }\r\n        $(module_block).find('#clear-bogo-deals').prop('disabled', false);\r\n        toggle_editing_mode(false);\r\n        toggle_overlay(overlay, 'hide');\r\n    }, 'json');\r\n}\r\n/**\r\n * Get BOGO Deals data.\r\n *\r\n * @since 1.0.0\r\n *\r\n * @param rows\r\n * @param type\r\n */\r\nfunction get_data(rows, type) {\r\n    var data = [], temp;\r\n    switch (type) {\r\n        case 'any-products':\r\n            data = $(rows).closest('.any-products-form').data('anyproducts');\r\n            break;\r\n        case 'combination-products':\r\n        case 'product-categories':\r\n            data = $(rows).closest('table.combined-objects-form').data('combined');\r\n            break;\r\n        case 'specific-products':\r\n        default:\r\n            rows.forEach(function (row) {\r\n                temp = jQuery(row).data('product');\r\n                if (temp)\r\n                    data.push(temp);\r\n            });\r\n            break;\r\n    }\r\n    return data;\r\n}\r\n/**\r\n * Clear BOGO Deals.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function clear_bogo_deals() {\r\n    // @ts-ignore\r\n    var $button = $(this);\r\n    if (!confirm($button.data('prompt')))\r\n        return;\r\n    var condition_rows = module_block.querySelector('.bogo-conditions-block table.acfw-styled-table tbody'), deal_rows = module_block.querySelector('.bogo-product-deals-block table.acfw-styled-table tbody'), overlay = module_block.querySelector('.acfw-overlay'), type_field = module_block.querySelector(\"input[name='bogo_type']:checked\");\r\n    toggle_overlay(overlay, 'show');\r\n    $.post(ajaxurl, {\r\n        action: 'acfw_clear_bogo_deals',\r\n        coupon_id: post_id,\r\n        _wpnonce: $button.data('nonce'),\r\n    }, function (response) {\r\n        if (response.status == 'success') {\r\n            $(condition_rows).html(placeholder_table_row_template(3));\r\n            $(deal_rows).html(placeholder_table_row_template(4));\r\n            $(type_field).prop('checked', false);\r\n            $button.prop('disabled', true);\r\n            toggle_editing_mode(false);\r\n            // if coupon is not published yet, then save it as draft.\r\n            if ($('#post-status-display').text() != 'Published') {\r\n                if (!$(\"input[name='post_title']\").val())\r\n                    $(\"input[name='post_title']\").val('coupon-' + post_id);\r\n                $('input#publish').click();\r\n            }\r\n        }\r\n        else {\r\n            if (response.error_msg)\r\n                vex.dialog.alert(response.error_msg);\r\n        }\r\n        toggle_overlay(overlay, 'hide');\r\n    }, 'json');\r\n}\r\n/**\r\n * Update combined objects list.\r\n *\r\n * @since 1.1\r\n * @since 3.4 renamed function to from \"combined_products\" to \"combined_objects\" so it's not just related to products only.\r\n */\r\nexport function update_combined_objects_list() {\r\n    // @ts-ignore\r\n    var $table = $(this).closest('table.combined-objects-form'), current_data = $table.data('combined'), $options = $table.find('.wc-product-search option:selected'), quantity = parseInt($table.find('input.condition-quantity').val() + ''), dataType = $table.data('type').toString(), conditions = 'category' === dataType ? { categories: [], quantity: quantity } : { products: [], quantity: quantity }, is_deals = $table.data('isdeals');\r\n    if (is_deals) {\r\n        var $discount_type = $table.find('select.discount_type'), $discount_value = $table.find('input.discount_value'), discount_val = parseFloat($discount_value.val());\r\n        if (discount_val < 0 || isNaN(discount_val)) {\r\n            $discount_value.val(current_data ? current_data.discount_value : '');\r\n            vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg);\r\n            return;\r\n        }\r\n        else {\r\n            conditions.discount_type = $discount_type.val();\r\n            conditions.discount_value = $discount_value.val();\r\n        }\r\n    }\r\n    var $temp, x;\r\n    for (x = 0; x < $options.length; x++) {\r\n        $temp = $($options[x]);\r\n        if ('category' === dataType)\r\n            conditions.categories.push({\r\n                category_id: $temp.val(),\r\n                label: $temp.text(),\r\n            });\r\n        else\r\n            conditions.products.push({\r\n                product_id: $temp.val(),\r\n                label: $temp.text(),\r\n            });\r\n    }\r\n    $table.data('combined', conditions);\r\n    toggle_editing_mode(true);\r\n}\r\n/**\r\n * Save on coupon publish.\r\n *\r\n * @since 1.1.0\r\n *\r\n * @param {e} object Event Object.\r\n */\r\nexport function save_on_coupon_publish(e) {\r\n    if (!$(module_block).data('editing'))\r\n        return;\r\n    e.preventDefault();\r\n    $(module_block).find('#save-bogo-deals').trigger('click');\r\n    // delay for 1 second to give time for\r\n    setTimeout(function () {\r\n        // If BOGO Deals displays an error message then don't save the coupon\r\n        if ($(module_block).hasClass('save-error'))\r\n            $(module_block).removeClass('save-error');\r\n        else\r\n            $('form#post').submit();\r\n    }, 1000);\r\n}\r\n/**\r\n * Update any products trigger data when an input in the block's value is changed.\r\n *\r\n * @since 1.4\r\n */\r\nexport function update_any_products_trigger_data(e) {\r\n    // @ts-ignore\r\n    var $block = $(this).closest('.any-products-trigger-form');\r\n    var quantity = parseInt($block.find('input#any_products_trigger_qty').val());\r\n    var data = {\r\n        quantity: quantity && !isNaN(quantity) ? quantity : 0,\r\n    };\r\n    $block.data('anyproducts', data);\r\n    if (e.type === 'change')\r\n        toggle_editing_mode(true);\r\n}\r\n/**\r\n * Update any products apply data when an input in the block's value is changed.\r\n *\r\n * @since 1.4\r\n */\r\nexport function update_any_products_apply_data(e) {\r\n    // @ts-ignore\r\n    var $block = $(this).closest('.any-products-apply-form');\r\n    var quantity = parseInt($block.find('input.condition-quantity').val());\r\n    var discountType = $block.find('select.discount_type').val().toString();\r\n    var discountValue = $block.find('input.discount_value').val().toString();\r\n    var data = {\r\n        quantity: quantity && !isNaN(quantity) ? quantity : 0,\r\n        discount_type: discountType !== null && discountType !== void 0 ? discountType : '',\r\n        discount_value: discountValue !== null && discountValue !== void 0 ? discountValue : '',\r\n    };\r\n    $block.data('anyproducts', data);\r\n    if (e.type === 'change')\r\n        toggle_editing_mode(true);\r\n}\r\n","import { esc_attr } from \"../../helper\";\r\n/**\r\n * Add edit row template.\r\n *\r\n * @since 1.15\r\n *\r\n * @param type\r\n * @param exclude\r\n * @param is_deals\r\n */\r\nexport default function add_edit_row_template(type, exclude, is_deals, data) {\r\n    if (data === void 0) { data = false; }\r\n    var type_to_search = acfw_edit_coupon.bogo_form_fields.type_to_search;\r\n    var _a = acfw_edit_coupon.product_table_buttons, add = _a.add, edit = _a.edit, cancel = _a.cancel;\r\n    var quantity = data.quantity;\r\n    var option = typeof data == \"object\" ? get_option(type, data) : \"\";\r\n    var priceCol = is_deals ? get_price_column(data) : \"\";\r\n    var btnText = typeof data == \"object\" ? edit : add;\r\n    return \"\\n    <tr class=\\\"add-edit-form adding\\\">\\n        <td class=\\\"product\\\" data-object=\\\"\".concat(typeof data == \"object\" ? esc_attr(JSON.stringify(data)) : 0, \"\\\">\\n            <div class=\\\"object-search-wrap\\\">\\n                <select class=\\\"\").concat(type == \"category\"\r\n        ? \"product-category-in-cart\"\r\n        : \"product-in-cart\", \" wc-product-search\\\"\\n                    data-placeholder=\\\"\").concat(type_to_search, \"\\\"\\n                    data-action=\\\"\").concat(type == \"category\"\r\n        ? \"acfw_search_product_category\"\r\n        : \"acfw_search_products\", \"\\\"\\n                    data-exclude=\\\"\").concat(esc_attr(JSON.stringify(exclude)), \"\\\">\").concat(option, \"</select>\\n            </div>\\n        </td>\\n        <td class=\\\"quantity\\\">\\n            <input type=\\\"number\\\" class=\\\"condition-quantity\\\" value=\\\"\").concat(typeof data == \"object\" ? quantity : 1, \"\\\" min=\\\"1\\\">\\n        </td>\\n        \").concat(priceCol, \"\\n        <td class=\\\"actions\\\">\\n            <button type=\\\"button\\\" class=\\\"condition-product-add button-primary\\\">\").concat(btnText, \"</button>\\n            <button type=\\\"button\\\" class=\\\"cancel button\\\">\").concat(cancel, \"</button>\\n        </td>\\n    </tr>\\n    \");\r\n}\r\n/**\r\n * Get option markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param type\r\n * @param data\r\n */\r\nfunction get_option(type, data) {\r\n    var category_id = data.category_id, product_id = data.product_id, category_label = data.category_label, product_label = data.product_label;\r\n    var value = type == \"category\" ? category_id : product_id;\r\n    var label = type == \"category\" ? category_label : product_label;\r\n    return \"<option value=\\\"\".concat(value, \"\\\">\").concat(label, \"</option>\");\r\n}\r\nfunction get_price_column(data) {\r\n    var currency_symbol = acfw_edit_coupon.currency_symbol, discount_field_options = acfw_edit_coupon.discount_field_options;\r\n    var override = discount_field_options.override, percent = discount_field_options.percent, fixed = discount_field_options.fixed;\r\n    var discount_type = data.discount_type, discount_value = data.discount_value;\r\n    var value = typeof data == \"object\" && discount_value ? discount_value : \"0\";\r\n    return \"\\n    <td class=\\\"price\\\">\\n        <div>\\n        <select class=\\\"discount_type\\\">\\n            <option value=\\\"override\\\" \".concat(discount_type == \"override\" ? \"selected\" : \"\", \">\").concat(currency_symbol, \" : \").concat(override, \"</option>\\n            <option value=\\\"percent\\\" \").concat(discount_type == \"percent\" ? \"selected\" : \"\", \">% : \").concat(percent, \"</option>\\n            <option value=\\\"fixed\\\" \").concat(discount_type == \"fixed\" ? \"selected\" : \"\", \">-\").concat(currency_symbol, \" : \").concat(fixed, \"</option>\\n        </select>\\n        <input type=\\\"text\\\" class=\\\"discount_value short wc_input_price\\\" value=\\\"\").concat(value, \"\\\">\\n        </div>\\n    </td>\\n    \");\r\n}\r\n","import category_first_column_template from './category_first_column';\r\nimport product_first_column_template from './product_first_column';\r\n/**\r\n * Table single row markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n * @param type\r\n * @param is_deals\r\n */\r\nexport default function table_row_template(data, type, is_deals) {\r\n    var quantity = data.quantity, discount_type = data.discount_type, discount_value = data.discount_value;\r\n    var priceCol = is_deals ? \"<td class=\\\"price\\\">(\".concat(discount_type, \") \").concat(discount_value, \"</td>\") : '';\r\n    return \"\\n    <tr>\\n      \".concat(get_first_column_markup(data, type), \"\\n      <td class=\\\"quantity\\\">\").concat(quantity, \"</td>\\n      \").concat(priceCol, \"\\n      <td class=\\\"actions\\\">\\n        <a class=\\\"edit\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"dashicons dashicons-edit\\\"></span></a>\\n        <a class=\\\"remove\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"dashicons dashicons-no\\\"></span></a>\\n      </td>\\n    </tr>\");\r\n}\r\n/**\r\n * Get first column markup.\r\n *\r\n * @since 1.15\r\n *\r\n * @param data\r\n * @param type\r\n */\r\nfunction get_first_column_markup(data, type) {\r\n    switch (type) {\r\n        case 'category':\r\n            return category_first_column_template(data);\r\n        case 'product':\r\n            return product_first_column_template(data);\r\n    }\r\n    return '';\r\n}\r\n","import { esc_attr } from \"../../helper\";\r\n/**\r\n * Category table row first column template.\r\n *\r\n * @param data\r\n */\r\nexport default function category_first_column_template(data) {\r\n    var category_id = data.category_id, category_label = data.category_label;\r\n    return \"\\n    <td class=\\\"category category-\".concat(category_id, \" object\\\" data-category=\\\"\").concat(esc_attr(JSON.stringify(data)), \"\\\">\\n        \").concat(category_label, \"\\n    </td>\\n    \");\r\n}\r\n","import { toggle_editing_mode } from './toggles';\r\nimport { price_to_float, validateDiscount } from '../helper';\r\nimport add_edit_row_template from './templates/add_edit_row';\r\nimport table_row_template from './templates/table_row';\r\nimport placeholder_table_row_template from './templates/placeholder_row';\r\nvar $ = jQuery;\r\nvar bogo_form_fields = acfw_edit_coupon.bogo_form_fields;\r\n/**\r\n * Trigger the add table row form event.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function trigger_add_table_row_form() {\r\n    // @ts-ignore\r\n    var $button = $(this), $table = $button.closest('.acfw-styled-table'), $tbody = $table.find('tbody'), is_deals = $table.data('isdeals'), type = $table.data('type'), exclude = $table.data('exclude');\r\n    $tbody.find('tr.no-result').remove();\r\n    $tbody.append(add_edit_row_template(type, exclude, is_deals));\r\n    $('body').trigger('wc-enhanced-select-init');\r\n    $tbody.find('tr.add-edit-form select.enhanced').trigger('focus');\r\n}\r\n/**\r\n * Trigger the edit table row form event.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function trigger_edit_table_row_form() {\r\n    // @ts-ignore\r\n    var $button = jQuery(this), $row = $button.closest('tr'), $table = $button.closest('.acfw-styled-table'), $tbody = $table.find('tbody'), is_deals = $table.data('isdeals'), type = $table.data('type'), data = $row.find('.object').data(type);\r\n    var category_id = data.category_id, product_id = data.product_id;\r\n    var exclude = $table.data('exclude');\r\n    var object_id = type == 'category' ? category_id : product_id;\r\n    exclude.splice(exclude.indexOf(object_id), 1);\r\n    $tbody.find('tr.no-result').remove();\r\n    $row.replaceWith(add_edit_row_template(type, exclude, is_deals, data));\r\n    $table.data('exclude', exclude);\r\n    $table.find('.wc-product-search').data('exclude', exclude);\r\n    $('body').trigger('wc-enhanced-select-init');\r\n}\r\n/**\r\n * Trigger the cancel add/edit table row form event.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function cancel_add_edit_table_row() {\r\n    // @ts-ignore\r\n    var $button = $(this), $row = $button.closest('tr'), $table = $button.closest('table'), $tbody = $row.closest('tbody'), is_deals = $table.data('isdeals'), colspan = $row.find('td').length, type = $table.data('type'), data = $row.find('td.product').data('object');\r\n    var category_id = data.category_id, product_id = data.product_id;\r\n    var exclude = $table.data('exclude');\r\n    var object_id = type == 'category' ? category_id : product_id;\r\n    // don't proceed if product has already been added to the table.\r\n    // this happens when the same product/category has been added to a new row and trying to cancel the row that already has the same value.\r\n    if (exclude.includes(object_id)) {\r\n        vex.dialog.alert(acfw_edit_coupon.product_exists_in_table);\r\n        return;\r\n    }\r\n    if (typeof data == 'object') {\r\n        exclude.push(object_id);\r\n        $row.replaceWith(table_row_template(data, type, is_deals));\r\n        $table.data('exclude', exclude);\r\n        $table.find('.wc-product-search').data('exclude', exclude);\r\n    }\r\n    else {\r\n        $row.remove();\r\n        if ($tbody.find('tr').length <= 0)\r\n            $tbody.append(placeholder_table_row_template(colspan, type));\r\n    }\r\n}\r\n/**\r\n * Actual function that saves/edits the table row.\r\n *\r\n * @since 1.1.0\r\n */\r\nexport function add_edit_table_row() {\r\n    // @ts-ignore\r\n    var $button = $(this), $row = $button.closest('tr'), $table = $button.closest('table.acfw-styled-table'), is_deals = $table.data('isdeals'), type = $table.data('type'), $search = $row.find('.wc-product-search'), $quantity = $row.find('.condition-quantity');\r\n    var exclude = $table.data('exclude');\r\n    if (!$search.val() || !$quantity.val() || $quantity.val() < 1) {\r\n        vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg);\r\n        return;\r\n    }\r\n    // don't proceed if product has already been added to the table.\r\n    if (exclude.includes(parseInt($search.val()))) {\r\n        vex.dialog.alert(acfw_edit_coupon.product_exists_in_table);\r\n        return;\r\n    }\r\n    // dont allow negative value for discount/price field.\r\n    if (is_deals) {\r\n        var discount_val = $row.find('input.discount_value').val();\r\n        // validate discount by type.\r\n        if (!validateDiscount($row.find('select.discount_type').val(), discount_val)) {\r\n            vex.dialog.alert(acfw_edit_coupon.discount_type_value_error_msg);\r\n            return;\r\n        }\r\n        if (price_to_float(discount_val) < 0 || isNaN(price_to_float(discount_val))) {\r\n            vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg);\r\n            return;\r\n        }\r\n    }\r\n    var data = get_table_row_data($row, type, is_deals);\r\n    var category_id = data.category_id, product_id = data.product_id;\r\n    exclude.push(type == 'category' ? category_id : product_id);\r\n    $row.replaceWith(table_row_template(data, type, is_deals));\r\n    $table.data('exclude', exclude);\r\n    $table.find('.wc-product-search').data('exclude', exclude);\r\n    toggle_editing_mode(true);\r\n}\r\n/**\r\n * Remove product in table.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport function product_table_remove_product() {\r\n    // @ts-ignore\r\n    var $button = $(this), $object_row = $button.closest('tr'), $table = $object_row.closest('table'), $tbody = $object_row.closest('tbody'), colspan = $object_row.find('td').length, type = $table.data('type');\r\n    var data = $object_row.find('td.object').data(type);\r\n    var exclude = $table.data('exclude');\r\n    var index;\r\n    switch (type) {\r\n        case 'category':\r\n            index = exclude.indexOf(parseInt(data.category_id));\r\n            break;\r\n        case 'product':\r\n        default:\r\n            index = exclude.indexOf(parseInt(data.product_id));\r\n            break;\r\n    }\r\n    if (index !== -1)\r\n        exclude.splice(index, 1);\r\n    $table.data('exclude', exclude);\r\n    $table.find('.wc-product-search').data('exclude', exclude);\r\n    $object_row.remove();\r\n    if ($tbody.find('tr').length <= 0)\r\n        $tbody.append(placeholder_table_row_template(colspan, type));\r\n    toggle_editing_mode(true);\r\n}\r\n/**\r\n * Get table row data.\r\n *\r\n * @since 1.15\r\n *\r\n * @param $row\r\n * @param type\r\n * @param is_deals\r\n */\r\nfunction get_table_row_data($row, type, is_deals) {\r\n    var object = {};\r\n    if (type == 'category') {\r\n        object = {\r\n            category_id: parseInt($row.find('.wc-product-search').val() + ''),\r\n            quantity: parseInt($row.find('.condition-quantity').val() + ''),\r\n            category_label: $row.find('.wc-product-search option:selected').text(),\r\n        };\r\n    }\r\n    else {\r\n        object = {\r\n            product_id: parseInt($row.find('.wc-product-search').val() + ''),\r\n            quantity: parseInt($row.find('.condition-quantity').val() + ''),\r\n            product_label: $row.find('.wc-product-search option:selected').text(),\r\n        };\r\n    }\r\n    if (is_deals) {\r\n        object.discount_type = $row.find('select.discount_type').val();\r\n        object.discount_value = $row.find('input.discount_value').val();\r\n    }\r\n    return object;\r\n}\r\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport { remove_leading_zeros } from '../helper';\r\nimport { toggle_editing_mode, toggle_block_data_type, toggleRepeatLimitField, } from './toggles';\r\nimport { save_bogo_deals, clear_bogo_deals, update_combined_objects_list, update_any_products_trigger_data, update_any_products_apply_data, save_on_coupon_publish, } from './save';\r\nimport { trigger_add_table_row_form, trigger_edit_table_row_form, cancel_add_edit_table_row, add_edit_table_row, product_table_remove_product, } from './table';\r\nvar $ = jQuery;\r\nvar module_block = document.querySelector('#acfw_bogo_deals');\r\n/**\r\n * Export functions to be accessed by ACFWP.\r\n */\r\nacfw_edit_coupon = __assign(__assign({}, acfw_edit_coupon), { bogo_toggle_editing_mode: toggle_editing_mode });\r\n/**\r\n * Add free products module events script.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport default function bogo_deals_module_events() {\r\n    $(module_block).on('click', '.acfw-styled-table tfoot .add-table-row', trigger_add_table_row_form);\r\n    $(module_block).on('click', '.acfw-styled-table td.actions a.edit', trigger_edit_table_row_form);\r\n    $(module_block).on('click', 'tr.add-edit-form .actions .cancel', cancel_add_edit_table_row);\r\n    $(module_block).on('click', 'tr.add-edit-form .actions .condition-product-add', add_edit_table_row);\r\n    $(module_block).on('click', '.acfw-styled-table td.actions a.remove', product_table_remove_product);\r\n    $(module_block).on('click', 'button#save-bogo-deals', save_bogo_deals);\r\n    $(module_block).on('click', 'button#clear-bogo-deals', clear_bogo_deals);\r\n    $(module_block).on('change acfw_load', 'select#bogo-condition-type,select#bogo-deals-type', toggle_block_data_type);\r\n    $(module_block).on('change acfw_fetch_data', '.combined-objects-form select,.combined-objects-form input', update_combined_objects_list);\r\n    $(module_block).on('change acfw_fetch_data', '.any-products-trigger-form input', update_any_products_trigger_data);\r\n    $(module_block).on('change acfw_fetch_data', '.any-products-apply-form input,.any-products-apply-form select', update_any_products_apply_data);\r\n    $(module_block).on('change', '.condition-quantity', restrict_quantity_value);\r\n    $(module_block).on('blur', '.wc_input_price', remove_leading_zeros);\r\n    $(module_block).css('min-height', $('#coupon_options').height());\r\n    $(module_block).on('change', \"input[name='bogo_type']\", trigger_toggle);\r\n    $(module_block).on('change acfw_load', \"input[name='bogo_type']\", toggleRepeatLimitField);\r\n    $(module_block).on('change', '#bogo-repeat-limit', trigger_toggle);\r\n    $(module_block).on('click', '.acfw-styled-table .actions .remove', trigger_toggle);\r\n    $(module_block).find('.notice-option').on('change', 'input,textarea,select', trigger_toggle);\r\n    $('form#post').on('submit', save_on_coupon_publish);\r\n    $(module_block).find('select#bogo-condition-type,select#bogo-deals-type').trigger('acfw_load');\r\n    $('#woocommerce-coupon-data').on('change acfw_load', 'select#discount_type', toggleBogoInterface);\r\n    $('#woocommerce-coupon-data select#discount_type').trigger('acfw_load');\r\n    $(module_block).find(\"input[name='bogo_type']:checked\").trigger('acfw_load');\r\n}\r\nfunction toggleBogoInterface() {\r\n    // @ts-ignore\r\n    var $discountType = $(this);\r\n    var $general = $discountType.closest('#general_coupon_data');\r\n    var $inputs = $general.find('p.form-field input');\r\n    if ('acfw_bogo' === $discountType.val()) {\r\n        $general.addClass('acfw-bogo-type');\r\n        $('#acfw_bogo_deals').show();\r\n        // disable fields under general tab that cannot be used in conjunction with BOGO\r\n        for (var x = 0; x <= $inputs.length; x++) {\r\n            if (![\r\n                'expiry_date',\r\n                '_acfw_coupon_sort_priority',\r\n                'coupon_amount', // we don't disable the coupon_amount field as it will trigger a PHP notice log in WC\r\n            ].includes($($inputs[x]).prop('name'))) {\r\n                $($inputs[x]).prop('disabled', true);\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        $general.removeClass('acfw-bogo-type');\r\n        $('#acfw_bogo_deals').hide();\r\n        // reenable fields under general tab when discount type is not BOGO anymore\r\n        for (var x = 0; x <= $inputs.length; x++) {\r\n            if (!['expiry_date', '_acfw_coupon_sort_priority', 'coupon_amount'].includes($($inputs[x]).prop('name'))) {\r\n                $($inputs[x]).prop('disabled', false);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Trigger toggle editing mode.\r\n *\r\n * @since 1.0.0\r\n */\r\nfunction trigger_toggle() {\r\n    toggle_editing_mode(true);\r\n}\r\n/**\r\n * Restrict condition quantity value.\r\n *\r\n * @since 1.0.0\r\n */\r\nfunction restrict_quantity_value() {\r\n    // @ts-ignore\r\n    var $field = jQuery(this);\r\n    if ($field.val() < 1)\r\n        $field.val(1);\r\n}\r\n","var $ = jQuery;\r\n/**\r\n * Toggle field events script.\r\n * Used by Roles Restriction and other similar modules.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport default function toggle_fields_events() {\r\n    var $module_block = $('.toggle-enable-fields');\r\n    $module_block.on('change', '.toggle-trigger-field', toggle_disable_enable_fields);\r\n    $module_block.find('.toggle-trigger-field').trigger('change');\r\n}\r\n/**\r\n * Toggle disable/enable fields.\r\n *\r\n * @since 1.0.0\r\n */\r\nfunction toggle_disable_enable_fields() {\r\n    // @ts-ignore\r\n    var $button = $(this), $module_block = $button.closest('.toggle-enable-fields'), $fields = $module_block.find('select,textarea,input:not(.toggle-trigger-field)'), toggle = !$button.prop('checked');\r\n    $fields.prop('disabled', toggle);\r\n    if (toggle)\r\n        $fields.closest('.form-field').addClass('disabled');\r\n    else\r\n        $fields.closest('.form-field').removeClass('disabled');\r\n}\r\n","var $ = jQuery;\r\n/**\r\n * URL Coupon events.\r\n *\r\n * @since 4.3.1\r\n */\r\nexport default function url_coupon_events() {\r\n    var moduleBlock = document.querySelector('#acfw_url_coupon');\r\n    $(moduleBlock).on('click', '.copy-coupon-url', showCopiedText);\r\n    initCouponUrlClipboard();\r\n}\r\n/**\r\n * Initialize coupon URL field copy to clipboard button.\r\n *\r\n * @since 4.3.1\r\n */\r\nfunction initCouponUrlClipboard() {\r\n    var $couponUrl = $('input#_acfw_coupon_url');\r\n    $couponUrl.after(\"<button type=\\\"button\\\" class=\\\"copy-coupon-url\\\" data-clipboard-target=\\\"#_acfw_coupon_url\\\">\\n    <svg width=\\\"15\\\" height=\\\"15\\\" version=\\\"1.1\\\" id=\\\"Layer_1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\" viewBox=\\\"0 0 460 460\\\" style=\\\"enable-background:new 0 0 460 460;\\\" xml:space=\\\"preserve\\\">\\n      <g>\\n        <path d=\\\"M425.934,0H171.662c-18.122,0-32.864,14.743-32.864,32.864v77.134h30V32.864c0-1.579,1.285-2.864,2.864-2.864h254.272\\n          c1.579,0,2.864,1.285,2.864,2.864v254.272c0,1.58-1.285,2.865-2.864,2.865h-74.729v30h74.729\\n          c18.121,0,32.864-14.743,32.864-32.865V32.864C458.797,14.743,444.055,0,425.934,0z\\\"/>\\n        <path d=\\\"M288.339,139.998H34.068c-18.122,0-32.865,14.743-32.865,32.865v254.272C1.204,445.257,15.946,460,34.068,460h254.272\\n          c18.122,0,32.865-14.743,32.865-32.864V172.863C321.206,154.741,306.461,139.998,288.339,139.998z M288.341,430H34.068\\n          c-1.58,0-2.865-1.285-2.865-2.864V172.863c0-1.58,1.285-2.865,2.865-2.865h254.272c1.58,0,2.865,1.285,2.865,2.865v254.273h0.001\\n          C291.206,428.715,289.92,430,288.341,430z\\\"/>\\n      </g>\\n    </svg>\\n    </button>\");\r\n    new ClipboardJS('.copy-coupon-url');\r\n}\r\n/**\r\n * Display a \"Copied\" text after clicking the copy button.\r\n *\r\n * @since 4.3.1\r\n */\r\nfunction showCopiedText() {\r\n    // @ts-ignore\r\n    var $button = $(this);\r\n    $button.after(\"<span class=\\\"coupon-url-copied\\\">\".concat(acfw_edit_coupon.copied_label, \"</span>\"));\r\n    setTimeout(function () {\r\n        $('span.coupon-url-copied').fadeOut(500);\r\n    }, 1000);\r\n}\r\n","var $ = jQuery;\r\nvar isValidating = false;\r\n/**\r\n * Edit link scheduler fields script.\r\n *\r\n * @since 2.0\r\n *\r\n * @param object $ jQuery object.\r\n */\r\nexport default function edit_link_scheduler_fields() {\r\n    // @ts-ignore\r\n    var scheduler_tab = document.querySelector('#acfw_scheduler'), schedule_start_field = scheduler_tab.querySelector('#_acfw_schedule_start'), schedule_expire_field = scheduler_tab.querySelector('#_acfw_schedule_expire'), wc_default_expiry_field = document.querySelector('#general_coupon_data p.expiry_date_field');\r\n    $(scheduler_tab).on('change', '.date-field,.date-hour,.date-minute', toggle_fields_required_prop);\r\n    $(scheduler_tab).on('click', '.clear-scheduler-fields', clear_scheduler_fields_values);\r\n    // hide the default WC coupon expiry date field from the DOM.\r\n    $(wc_default_expiry_field).css('display', 'none');\r\n    $(schedule_start_field).trigger('change acfw_load');\r\n    $(schedule_expire_field).trigger('change acfw_load');\r\n    $(scheduler_tab).on('change acfw_load', '.acfw-section-toggle input', toggleSchedulerSection);\r\n    $(scheduler_tab).find('.acfw-section-toggle input').trigger('acfw_load');\r\n    $('.wrap').on('submit', 'form#post', validateBeforeSaveCoupon);\r\n    initDateFields();\r\n}\r\n/**\r\n * Initialize date and time picker fields.\r\n *\r\n * @since 4.5\r\n */\r\nfunction initDateFields() {\r\n    var _a, _b;\r\n    var scheduleStartField = document.querySelector('#_acfw_schedule_start');\r\n    var scheduleExpireField = document.querySelector('#_acfw_schedule_expire');\r\n    // create date objects for fields default min/max values.\r\n    var startMaxDate = (_a = flatpickr.parseDate(scheduleExpireField.value, 'Y-m-d H:i:S')) !== null && _a !== void 0 ? _a : null;\r\n    var expireMinDate = (_b = flatpickr.parseDate(scheduleStartField.value, 'Y-m-d H:i:S')) !== null && _b !== void 0 ? _b : null;\r\n    // add/deduct 1 minute to the min/max values.\r\n    if (startMaxDate)\r\n        startMaxDate.setMinutes(startMaxDate.getMinutes() - 1);\r\n    if (expireMinDate)\r\n        expireMinDate.setMinutes(expireMinDate.getMinutes() + 1);\r\n    $(scheduleStartField).flatpickr({\r\n        allowInput: true,\r\n        enableTime: true,\r\n        altInput: true,\r\n        allowInvalidPreload: true,\r\n        altFormat: 'Y-m-d h:i K',\r\n        dateFormat: 'Y-m-d H:i:S',\r\n        maxDate: startMaxDate,\r\n        // change minimum datetime for expire field when start field value changes.\r\n        onChange: function (_a, dateStr, instance) {\r\n            var dateObject = _a[0];\r\n            if (dateObject) {\r\n                dateObject.setMinutes(dateObject.getMinutes() + 1);\r\n                scheduleExpireField._flatpickr.set('minDate', dateObject);\r\n                validate_date_range_field_values();\r\n            }\r\n            else {\r\n                scheduleExpireField._flatpickr.set('minDate', null);\r\n            }\r\n        },\r\n    });\r\n    $(scheduleExpireField).flatpickr({\r\n        allowInput: true,\r\n        enableTime: true,\r\n        altInput: true,\r\n        altFormat: 'Y-m-d h:i K',\r\n        dateFormat: 'Y-m-d H:i:S',\r\n        minDate: expireMinDate,\r\n        // change maximum datetime for start field when expire field value changes.\r\n        onChange: function (_a, dateStr, instance) {\r\n            var dateObject = _a[0];\r\n            if (dateObject) {\r\n                dateObject.setMinutes(dateObject.getMinutes() - 1);\r\n                scheduleStartField._flatpickr.set('maxDate', dateObject);\r\n                validate_date_range_field_values();\r\n            }\r\n            else {\r\n                scheduleStartField._flatpickr.set('maxDate', null);\r\n            }\r\n        },\r\n    });\r\n}\r\n/**\r\n * Validate date range field values when the values are changed.\r\n *\r\n * @since 4.5\r\n */\r\nfunction validate_date_range_field_values() {\r\n    var startDate = flatpickr.parseDate($('#_acfw_schedule_start').val(), 'Y-m-d H:i:S');\r\n    var expireDate = flatpickr.parseDate($('#_acfw_schedule_expire').val(), 'Y-m-d H:i:S');\r\n    if (startDate >= expireDate) {\r\n        $('#_acfw_schedule_start').parent().addClass('error');\r\n        $('#_acfw_schedule_expire').parent().addClass('error');\r\n    }\r\n    else {\r\n        $('#_acfw_schedule_start').parent().removeClass('error');\r\n        $('#_acfw_schedule_expire').parent().removeClass('error');\r\n    }\r\n}\r\n/**\r\n * Prevent saving coupon when there is an error in the date fields.\r\n *\r\n * @param e Event object\r\n */\r\nfunction validateBeforeSaveCoupon(e) {\r\n    if ($('.acfw-date-range-schedules-section span.date-time-field').hasClass('error')) {\r\n        e.preventDefault();\r\n        // display error message.\r\n        vex.dialog.alert({\r\n            unsafeMessage: acfw_edit_coupon.invalid_scheduler_time,\r\n        });\r\n        // re-enable publish button\r\n        $('#publishing-action .spinner').removeClass('is-active');\r\n        $('#publishing-action #publish').removeClass('disabled');\r\n    }\r\n}\r\n/**\r\n * Toggle scheduler fields required prop.\r\n * Set to true when at least one of the date/time fields have value, false when all fields are blank.\r\n *\r\n * @since 2.1\r\n */\r\nfunction toggle_fields_required_prop() {\r\n    // @ts-ignore\r\n    var $parent = $(this).closest('.date-time-field'), $date = $parent.find('.date-field');\r\n    if ($date.val()) {\r\n        $date.prop('required', true);\r\n    }\r\n    else {\r\n        $date.prop('required', false);\r\n    }\r\n}\r\n/**\r\n * Clear scheduler field values and set to not required.\r\n *\r\n * @since 2.1\r\n */\r\nfunction clear_scheduler_fields_values() {\r\n    var scheduler_tab = document.querySelector('#acfw_scheduler'), schedule_start_field = scheduler_tab.querySelector('#_acfw_schedule_start'), schedule_expire_field = scheduler_tab.querySelector('#_acfw_schedule_expire');\r\n    // @ts-ignore\r\n    var $datefield = $(this).siblings('.date-time-field');\r\n    $datefield.find('input').prop('required', false).val('');\r\n    $datefield.find('input')[0]._flatpickr.clear();\r\n    $(schedule_start_field).trigger('change');\r\n    $(schedule_expire_field).trigger('change');\r\n}\r\n/**\r\n * Toggle scheduler section fields when main section checkbox is checked/unchecked.\r\n *\r\n * @since 4.5\r\n */\r\nfunction toggleSchedulerSection() {\r\n    // @ts-ignore\r\n    var $input = $(this);\r\n    var $section = $input.closest('.acfw-scheduler-section');\r\n    var $options = $section.find('.options_group');\r\n    if ($input.is(':checked')) {\r\n        $options.removeClass('disabled');\r\n        $options.find('.date-field,.days-time-field label input,textarea').prop('disabled', false);\r\n        $('#acfw_scheduler .options_group input').trigger('acfw_load');\r\n    }\r\n    else {\r\n        $options.addClass('disabled');\r\n        $options.find('.date-field,.days-time-field label input,textarea').prop('disabled', true);\r\n    }\r\n    $options.find('input').trigger('change');\r\n}\r\n","var $ = jQuery;\r\nvar exludeCouponShown = false;\r\n/**\r\n * Add upsell events script.\r\n *\r\n * @since 1.0.0\r\n */\r\nexport default function upsell_events() {\r\n    $('#usage_limit_coupon_data').on('change', '#reset_usage_limit_period', upsell_advance_usage_limits);\r\n    $('#usage_restriction_coupon_data .acfw_exclude_coupons_field,#usage_restriction_coupon_data .acfw_allowed_customers_field').on('click change focus', 'input,select', upsell_exclude_coupons_restriction);\r\n    $('#acfw-auto-apply-coupon').on('change', '#acfw_auto_apply_coupon_field', upsell_auto_apply);\r\n    $('#acfw-virtual-coupon').on('change', '#acfw_enable_virtual_coupons', upsell_virtual_coupons);\r\n    $('#acfw_cart_conditions').on('change', '.condition-types', cart_condition_select_notice);\r\n    $('#woocommerce-coupon-data').on('change acfw_load', '#discount_type', hideGeneralUpsellOnBogo);\r\n    $('#woocommerce-coupon-data').on('change acfw_load', '#discount_type', displayCashbackUpsellModal);\r\n    $('#woocommerce-coupon-data').on('focusin', '#discount_type', cacheCurrentDiscountType);\r\n    $('#acfw_bogo_deals').on('change acfw_load', 'select#bogo-deals-type', toggle_bogo_auto_add_products_field);\r\n    $('#acfw_bogo_deals').on('change', \"input[name='acfw_bogo_auto_add_products']\", upsell_bogo_auto_add_get_products);\r\n    $('#acfw_scheduler').on('change', \".acfw-daytime-schedules-section .acfw-section-toggle input[type='checkbox']\", upsell_day_time_schedules);\r\n    $('#woocommerce-coupon-data #discount_type').trigger('acfw_load');\r\n    initExcludeCouponField();\r\n}\r\nfunction initExcludeCouponField() {\r\n    var $excludeField = $('p.acfw_exclude_coupons_field');\r\n    $excludeField.insertAfter('p.form-field.individual_use_field');\r\n}\r\n/**\r\n * Usage limits upsell vex dialog.\r\n *\r\n * @since 1.1\r\n */\r\nfunction upsell_advance_usage_limits() {\r\n    var usage_limits = acfw_edit_coupon.upsell.usage_limits;\r\n    vex.dialog.alert({\r\n        unsafeMessage: \"<div class=\\\"upsell-alert usage-limits\\\">\".concat(usage_limits, \"</div>\"),\r\n    });\r\n    // @ts-ignore\r\n    $(this).val('none');\r\n}\r\n/**\r\n * Usage restriction for exclude coupons upsell vex dialog.\r\n *\r\n * @since 1.1\r\n */\r\nfunction upsell_exclude_coupons_restriction() {\r\n    // prevent duplicate dialogs showing up.\r\n    if (exludeCouponShown)\r\n        return;\r\n    exludeCouponShown = true;\r\n    var usage_restriction = acfw_edit_coupon.upsell.usage_restriction;\r\n    vex.dialog.alert({\r\n        unsafeMessage: \"<div class=\\\"upsell-alert exclude-coupon\\\">\".concat(usage_restriction, \"</div>\"),\r\n        afterClose: function () { return (exludeCouponShown = false); },\r\n    });\r\n    // @ts-ignore\r\n    $(this).val('').blur();\r\n}\r\n/**\r\n * Auto apply upsell vex dialog.\r\n *\r\n * @since 1.1\r\n */\r\nfunction upsell_auto_apply() {\r\n    var auto_apply = acfw_edit_coupon.upsell.auto_apply;\r\n    vex.dialog.alert({\r\n        unsafeMessage: \"<div class=\\\"upsell-alert auto-apply\\\">\".concat(auto_apply, \"</div>\"),\r\n    });\r\n    // @ts-ignore\r\n    $(this).prop('checked', false);\r\n}\r\n/**\r\n * Virtual coupons upsell vex dialog.\r\n *\r\n * @since 4.3\r\n */\r\nfunction upsell_virtual_coupons() {\r\n    var virtual_coupons = acfw_edit_coupon.upsell.virtual_coupons;\r\n    vex.dialog.alert({\r\n        unsafeMessage: \"<div class=\\\"upsell-alert auto-apply\\\">\".concat(virtual_coupons, \"</div>\"),\r\n    });\r\n    // @ts-ignore\r\n    $(this).prop('checked', false);\r\n}\r\n/**\r\n * Display did you know notice below cart condition selector when premium option is selected.\r\n *\r\n * @since 1.6\r\n */\r\nfunction cart_condition_select_notice() {\r\n    // @ts-ignore\r\n    var $select = $(this);\r\n    var $moduleBlock = $select.closest('#acfw_cart_conditions');\r\n    var $formBlock = $select.closest('.add-condition-form');\r\n    var premiumConditions = $moduleBlock.data('premium-conditions');\r\n    var $noticeHolder = $moduleBlock.find('.acfw-dyk-notice-holder');\r\n    var $noticeBlock = $formBlock.find('.acfw-dyk-notice');\r\n    if (!$noticeBlock.length) {\r\n        $formBlock.append($noticeHolder.html());\r\n        $noticeBlock = $formBlock.find('.acfw-dyk-notice');\r\n    }\r\n    if ($.inArray($select.val(), premiumConditions) >= 0) {\r\n        $noticeBlock.show();\r\n    }\r\n    else {\r\n        $noticeBlock.hide();\r\n    }\r\n}\r\n/**\r\n * Hide did you know notice upsell under general tab when BOGO discount type is selected.\r\n *\r\n * @since 3.0\r\n */\r\nfunction hideGeneralUpsellOnBogo() {\r\n    // @ts-ignore\r\n    var type = $(this).val();\r\n    if ('acfw_bogo' === type) {\r\n        $('p.acfw-dyk-notice-general').hide();\r\n    }\r\n    else {\r\n        $('p.acfw-dyk-notice-general').show();\r\n    }\r\n}\r\n/**\r\n * Cache current discount type.\r\n *\r\n * @since 4.5.6\r\n */\r\nfunction cacheCurrentDiscountType() {\r\n    // @ts-ignore\r\n    $(this).data('cachedval', $(this).val());\r\n}\r\n/**\r\n * Display cashback upsell modal.\r\n *\r\n * @since 4.5.6\r\n */\r\nfunction displayCashbackUpsellModal() {\r\n    var _a;\r\n    // @ts-ignore\r\n    var type = $(this).val();\r\n    var cashback_coupon = acfw_edit_coupon.upsell.cashback_coupon;\r\n    if ('acfw_percentage_cashback' === type || 'acfw_fixed_cashback' === type) {\r\n        vex.dialog.alert({\r\n            unsafeMessage: \"<div class=\\\"upsell-alert usage-limits\\\">\".concat(cashback_coupon, \"</div>\"),\r\n        });\r\n        // @ts-ignore\r\n        $(this).val((_a = $(this).data('cachedval')) !== null && _a !== void 0 ? _a : 'percent');\r\n    }\r\n}\r\n/**\r\n * Toggle BOGO auto add products field.\r\n *\r\n * @since 4.1\r\n */\r\nfunction toggle_bogo_auto_add_products_field() {\r\n    // @ts-ignore\r\n    var $this = $(this);\r\n    var $module = $this.closest('#acfw_bogo_deals');\r\n    var $field = $module.find('.bogo-auto-add-products-field');\r\n    var $input = $field.find(\"input[type='checkbox']\");\r\n    var applyType = $this.val();\r\n    if (applyType === 'specific-products') {\r\n        $input.prop('disabled', false);\r\n        $field.addClass('show');\r\n    }\r\n    else {\r\n        $input.prop('disabled', false);\r\n        $field.removeClass('show');\r\n    }\r\n}\r\n/**\r\n * Upsell BOGO auto add get products feature.\r\n *\r\n * @since 4.1\r\n */\r\nfunction upsell_bogo_auto_add_get_products() {\r\n    // @ts-ignore\r\n    var $this = $(this);\r\n    $this.prop('checked', false);\r\n    var bogo_auto_add_get_products = acfw_edit_coupon.upsell.bogo_auto_add_get_products;\r\n    vex.dialog.alert({\r\n        unsafeMessage: \"<div class=\\\"upsell-alert usage-limits\\\">\".concat(bogo_auto_add_get_products, \"</div>\"),\r\n    });\r\n    // @ts-ignore\r\n    $(this).val('none');\r\n}\r\n/**\r\n * Display upsell for day time schedules when section checkbox is checked.\r\n *\r\n * @since 4.5\r\n */\r\nfunction upsell_day_time_schedules() {\r\n    // @ts-ignore\r\n    var $checkbox = $(this);\r\n    var day_time_schedules = acfw_edit_coupon.upsell.day_time_schedules;\r\n    vex.dialog.alert({\r\n        unsafeMessage: \"<div class=\\\"upsell-alert day-time-schedules\\\">\".concat(day_time_schedules, \"</div>\"),\r\n    });\r\n    $checkbox.prop('checked', false).trigger('acfw_load');\r\n}\r\n","import searchWidgetTemplate from \"./search_widget_template\";\r\n/**\r\n * Links list template markup.\r\n *\r\n * @since 1.5\r\n *\r\n * @param {ILinksListArguments} args\r\n */\r\nexport default function linksListTemplate(args) {\r\n    var title = args.title, className = args.className;\r\n    var links = args.links;\r\n    var is_premium = acfw_edit_coupon.help_modal.is_premium;\r\n    if (is_premium) {\r\n        links = links.filter(function (l) { return (l === null || l === void 0 ? void 0 : l.freeOnly) === undefined || !(l === null || l === void 0 ? void 0 : l.freeOnly); });\r\n    }\r\n    return \"\\n    <div class=\\\"links-list \".concat(className, \"\\\">\\n      <h3>\").concat(title, \"</h3>\\n\\n      \").concat((args === null || args === void 0 ? void 0 : args.search) ? searchWidgetTemplate(args === null || args === void 0 ? void 0 : args.search) : \"\", \"\\n\\n      <ul>\\n        \").concat(links.map(function (link) { return \"<li>\".concat(generateLink(link), \"</li>\"); }).join(\"\"), \"\\n      </ul>\\n    </div>\\n  \");\r\n}\r\n/**\r\n * Generate link <a> markup.\r\n *\r\n * @since 1.5\r\n *\r\n * @param {ILink} link\r\n */\r\nfunction generateLink(link) {\r\n    var title = link.title, url = link.url;\r\n    var is_premium = acfw_edit_coupon.help_modal.is_premium;\r\n    return \"<a href=\\\"\".concat(is_premium && (link === null || link === void 0 ? void 0 : link.premiumUrl) ? link === null || link === void 0 ? void 0 : link.premiumUrl : url, \"\\\">\").concat(title, \"</a>\");\r\n}\r\n","/**\r\n * Search widget template.\r\n *\r\n * @param {ISearchArgs} search\r\n * @returns\r\n */\r\nexport default function searchWidgetTemplate(search) {\r\n    var slug = search.slug, action = search.action, placeholder = search.placeholder;\r\n    return \"\\n    <div class=\\\"search-widget search-\".concat(slug, \"\\\">\\n      <input class=\\\"search-input\\\" type=\\\"text\\\" placeholder=\\\"\").concat(placeholder, \"\\\" data-action=\\\"\").concat(action, \"\\\" />\\n      <button type=\\\"button\\\" class=\\\"clear-search dashicons-before dashicons-no-alt\\\"></button>\\n      <div class=\\\"search-results\\\"></div>\\n    </div>\\n  \");\r\n}\r\n/**\r\n * Search results template.\r\n *\r\n * @param {ISearchResult[]} results\r\n * @param {string} term\r\n * @returns\r\n */\r\nexport function searchResultsTemplate(results, term) {\r\n    var list = results\r\n        .map(function (_a) {\r\n        var url = _a.url, title = _a.title;\r\n        return \"<li><a href=\\\"\".concat(generateUrl(url, term), \"\\\" rel=\\\"noopener noreferrer nofollow\\\" target=\\\"_blank\\\">\").concat(title, \"</a></li>\");\r\n    })\r\n        .join(\"\");\r\n    return \"<ul>\".concat(list, \"</ul>\");\r\n}\r\n/**\r\n * Add UTM parameters to KB article URL.\r\n *\r\n * @param {string} url\r\n * @param {string} term\r\n * @returns\r\n */\r\nfunction generateUrl(url, term) {\r\n    return \"\".concat(url, \"?utm_source=acfwf&utm_medium=help_modal&utm_campaign=kb_search&utm_term=\").concat(term);\r\n}\r\n","import linksListTemplate from \"./links_list_template\";\r\n/**\r\n * Help modal template markup.\r\n *\r\n * @since 1.5\r\n *\r\n * @param {IHelpModalArguments} args\r\n */\r\nexport default function modalTemplate(args) {\r\n    var _a = acfw_edit_coupon.help_modal, labels = _a.labels, images_url = _a.images_url, is_premium = _a.is_premium;\r\n    var target = args.target, _b = args.left, title = _b.title, content = _b.content, videos = _b.videos, _c = args.right, links = _c.links, kbs = _c.kbs, tutorials = _c.tutorials;\r\n    var kbSearchArgs = {\r\n        slug: \"kb-articles\",\r\n        action: \"acfw_search_help_kb_articles\",\r\n        placeholder: labels.search_placeholder,\r\n    };\r\n    var source = is_premium ? \"acfwp\" : \"acfwf\";\r\n    var upgradeLink = \"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=help_modal&utm_campaign=help_modal_\".concat(target, \"_upgrade_link\");\r\n    var logoUrl = \"https://advancedcouponsplugin.com/?utm_source=\".concat(source, \"&utm_medium=help_modal&utm_campaign=help_brand_link_\").concat(target);\r\n    return \"\\n    <div class=\\\"header\\\">\\n      <div class=\\\"logo\\\">\\n        <a href=\\\"\".concat(logoUrl, \"\\\" target=\\\"_blank\\\"><img src=\\\"\").concat(images_url, \"acfw-logo.png\\\" alt=\\\"Advanced Coupons logo\\\" /></a>\\n      </div>\\n      \").concat(!is_premium\r\n        ? \"\\n        <div class=\\\"upgrade-link\\\">\\n          <a href=\\\"\".concat(upgradeLink, \"\\\" target=\\\"_blank\\\">\\n            <span>\").concat(labels.upgrade_to_premium, \"</span>\\n            <i class=\\\"dashicons dashicons-external\\\"></i>\\n          </a>\\n        </div>\\n      \")\r\n        : \"\", \"\\n    </div>\\n    <main>\\n      <h1 class=\\\"title\\\">\").concat(title, \"</h1>\\n      <div class=\\\"content\\\">\\n        \").concat(content, \"\\n      </div>\\n      \").concat(videos.length\r\n        ? \"<div class=\\\"video-gallery-placeholder\\\"><img src=\\\"\".concat(images_url, \"spinner-2x.gif\\\" alt=\\\"Loading videos\\\" /><p>\").concat(labels.loading_videos, \"</p></div>\")\r\n        : \"\", \"\\n    </main>\\n    <aside>\\n      \").concat(linksListTemplate({\r\n        title: labels.rel_links,\r\n        className: \"relevant-links\",\r\n        links: links,\r\n    }), \"\\n      \").concat(linksListTemplate({\r\n        title: labels.kb_articles,\r\n        className: \"knowledge-base-articles\",\r\n        links: kbs,\r\n        search: kbSearchArgs,\r\n    }), \"\\n      \").concat(linksListTemplate({\r\n        title: labels.tut_guides,\r\n        className: \"tutorials-guides\",\r\n        links: tutorials,\r\n    }), \"\\n    </aside>\\n  \");\r\n}\r\n","export default function permissionRequestTemplate(module) {\r\n    var images_url = acfw_edit_coupon.help_modal.images_url;\r\n    var _a = acfw_edit_coupon.help_modal.labels, permission_request = _a.permission_request, allow = _a.allow, cancel = _a.cancel;\r\n    return \"\\n  <div id=\\\"acfw-help-modal-permission-request\\\" data-module=\\\"\".concat(module, \"\\\">\\n    <img src=\\\"\").concat(images_url, \"acfw-logo.png\\\" />\\n    <p>\").concat(permission_request, \"</p>\\n    <p class=\\\"actions\\\">\\n      <button class=\\\"button-primary allow\\\" type=\\\"button\\\">\").concat(allow, \"</button>\\n      <button class=\\\"button cancel\\\" type=\\\"button\\\">\").concat(cancel, \"</button>\\n    </p>\\n  </div>\\n  \");\r\n}\r\n","export default function placeholderTemplate() {\r\n    var _a = acfw_edit_coupon.help_modal, images_url = _a.images_url, labels = _a.labels;\r\n    return \"<div id=\\\"acfw-help-modal-placeholder\\\">\\n    <img src=\\\"\".concat(images_url, \"spinner-2x.gif\\\" />\\n    <p>\").concat(labels.loading_content, \"</p>\\n  </div>\");\r\n}\r\n","/**\r\n * Video gallery template.\r\n *\r\n * @param {IVideoEmbed[]} videoEmbeds\r\n * @returns\r\n */\r\nexport default function videoGalleryTemplate(videoEmbeds) {\r\n    return \"\\n  <div class=\\\"acfw-help-video-gallery\\\">\\n    <div class=\\\"videos\\\">\\n      \".concat(videoEmbeds[0].embed\r\n        ? videoEmbeds[0].embed\r\n        : noVideoTemplate(videoEmbeds[0]), \"\\n    </div>\\n    \").concat(videoEmbeds.length > 1\r\n        ? \"\\n      <ul class=\\\"thumbnails\\\">\\n        \".concat(videoEmbeds\r\n            .map(function (ve, i) { return \"\\n            <li \".concat(i === 0 ? \"class=\\\"active\\\"\" : \"\", \">\\n              <a href=\\\"javascript:void(0);\\\" data-videoid=\\\"\").concat(ve.videoid, \"\\\">\\n                <img src=\\\"\").concat(ve.thumbnail, \"\\\" title=\\\"\").concat(ve.title, \"\\\" />\\n              </a>\\n              <span class=\\\"title\\\">\").concat(ve.title, \"</span>\\n            </li>\\n            \"); })\r\n            .join(\"\"), \"\\n      </ul>\\n      \")\r\n        : \"\", \"\\n    \\n  </div>\\n  \");\r\n}\r\nexport function noVideoTemplate(videoEmbed) {\r\n    return \"\\n  <div class=\\\"no-video\\\" style=\\\"background-image:url(\".concat(videoEmbed.thumbnail, \");\\\">\\n    <a href=\\\"\").concat(videoEmbed.url, \"\\\" rel=\\\"noreferer noopener\\\" >\\n      <span>\").concat(acfw_edit_coupon.help_modal.labels.no_video, \"</span>\\n    </a>\\n  </div>\\n  \");\r\n}\r\n","import videoGalleryTemplate, { noVideoTemplate } from './templates/video_gallery_template';\r\nvar $ = jQuery;\r\nvar videoEmbedsState = [];\r\nvar videoModuleState = '';\r\n/**\r\n * Fetch Videos oembed markups via AJAX and update video gallery content.\r\n *\r\n * @since 1.5\r\n *\r\n * @param {IHelpVideo[]} videos\r\n * @returns\r\n */\r\nexport default function loadVideosOembed(videos, module) {\r\n    var _secure_nonce = acfw_edit_coupon.help_modal._secure_nonce;\r\n    // skip if there are no videos to load.\r\n    if (!videos.length)\r\n        return;\r\n    $.post(ajaxurl, {\r\n        action: 'acfw_get_help_videos_oembed',\r\n        urls: videos.map(function (v) { return v.url; }),\r\n        width: $('.acfw-help-vex .vex-content main').width(),\r\n        _nonce: _secure_nonce,\r\n    }, function (videoEmbeds) {\r\n        // map video title to embeds data.\r\n        videoEmbeds = videoEmbeds.map(function (ve) {\r\n            var index = videos.findIndex(function (v) { return v.url === ve.url; });\r\n            ve.title = index >= 0 ? videos[index].title : '';\r\n            return ve;\r\n        });\r\n        // update state variable for video embeds.\r\n        videoEmbedsState = videoEmbeds;\r\n        videoModuleState = module;\r\n        updateVideoGalleryContent(videoEmbeds);\r\n    }, 'json');\r\n}\r\n/**\r\n * Load video gallery content from cached data if present.\r\n *\r\n * @since 1.5\r\n *\r\n * @param {IHelpVideo[]} videos\r\n * @returns\r\n */\r\nexport function loadVideoGalleryContentCache(videos, module) {\r\n    if (!videoEmbedsState.length || module !== videoModuleState) {\r\n        loadVideosOembed(videos, module);\r\n        return;\r\n    }\r\n    updateVideoGalleryContent(videoEmbedsState);\r\n}\r\n/**\r\n * Update video gallery content markup.\r\n *\r\n * @since 1.5\r\n *\r\n * @param {IVideoEmbed[]} videoEmbeds\r\n */\r\nfunction updateVideoGalleryContent(videoEmbeds) {\r\n    var $placeholder = $('.acfw-help-vex .video-gallery-placeholder');\r\n    // replace placeholder with video gallery markup.\r\n    if ($placeholder.length) {\r\n        $placeholder.replaceWith(videoGalleryTemplate(videoEmbeds));\r\n    }\r\n}\r\n/**\r\n * Switch active video displayed when thumbnail is clicked and autoplay video.\r\n *\r\n * @since 1.5\r\n */\r\nexport function switchActiveVideo() {\r\n    // @ts-ignore\r\n    var $this = jQuery(this);\r\n    var $li = $this.closest('li');\r\n    var $wrap = $this.closest('.acfw-help-video-gallery');\r\n    var $video = $wrap.find('.videos');\r\n    var $thumbs = $wrap.find('ul.thumbnails li');\r\n    var videoId = $this.data('videoid');\r\n    // skip if thumbnail is for current active video.\r\n    if ($li.hasClass('active')) {\r\n        return;\r\n    }\r\n    // switch active class to clicked thumbnail.\r\n    $thumbs.removeClass('active');\r\n    $li.addClass('active');\r\n    // search index of video ombed markup of matching video ID.\r\n    var index = videoEmbedsState.findIndex(function (ve) { return ve.videoid === videoId; });\r\n    // replace main video oembed markup.\r\n    if (index >= 0) {\r\n        $video.html(videoEmbedsState[index].embed\r\n            ? videoEmbedsState[index].embed.replace('oembed', 'oembed&autoplay=1')\r\n            : noVideoTemplate(videoEmbedsState[index]));\r\n    }\r\n}\r\n","import modalTemplate from './templates/modal_template';\r\nimport errorTemplate from './templates/error_template';\r\nimport permissionRequestTemplate from './templates/permission_template';\r\nimport placeholderTemplate from './templates/placeholder_template';\r\nimport loadVideosOembed, { loadVideoGalleryContentCache } from './videos';\r\nvar $ = jQuery;\r\nvar dataCache = []; // state variable that holds cached data.\r\n/**\r\n * Show the help modal content.\r\n *\r\n * @since 1.5\r\n */\r\nexport function showHelpModal() {\r\n    var allow_fetch = acfw_edit_coupon.help_modal.allow_fetch;\r\n    // @ts-ignore\r\n    var $this = $(this);\r\n    var module = $this.closest('.acfw-help-link').data('module');\r\n    // display vex dialog with placeholder div and spinner.\r\n    vex.dialog.open({\r\n        unsafeMessage: \"\\n      <a class=\\\"vex-close\\\" href=\\\"javascript:void(0);\\\"></a>\\n      \".concat(allow_fetch ? placeholderTemplate() : permissionRequestTemplate(module), \"\\n    \"),\r\n        className: 'vex-theme-plain acfw-help-vex',\r\n        showCloseButton: false,\r\n        buttons: {},\r\n    });\r\n    // fetch data and update modal content.\r\n    if (allow_fetch)\r\n        fetchContentDataUpdateModal(module);\r\n}\r\n/**\r\n * Replace content in vex modal.\r\n * make sure placeholder still exists before replacing it with relative content.\r\n *\r\n * @param {string} markupTemplate\r\n */\r\nfunction replaceModalContent(markupTemplate) {\r\n    var $placeholder = $('#acfw-help-modal-placeholder');\r\n    if ($placeholder.length) {\r\n        $placeholder.replaceWith(markupTemplate);\r\n        $('.acfw-help-vex').find('main a,aside a').attr('target', '_blank').attr('rel', 'noopener noreferrer nofollow');\r\n    }\r\n}\r\n/**\r\n * Fetch content data from JSON url and update modal content.\r\n *\r\n * @since 1.5\r\n *\r\n * @param {string} module\r\n */\r\nexport function fetchContentDataUpdateModal(module) {\r\n    var _secure_nonce = acfw_edit_coupon.help_modal._secure_nonce;\r\n    var cachedData = null;\r\n    // serve cached data and videos embeds for module if already present.\r\n    if ((cachedData = getCachedData(module))) {\r\n        replaceModalContent(modalTemplate(cachedData));\r\n        loadVideoGalleryContentCache(cachedData.left.videos, module);\r\n        return;\r\n    }\r\n    $.post(ajaxurl, {\r\n        action: 'acfw_fetch_help_data',\r\n        module: module,\r\n        _nonce: _secure_nonce,\r\n    }, function (data) {\r\n        dataCache.push(data);\r\n        replaceModalContent(modalTemplate(data));\r\n        loadVideosOembed(data.left.videos, module);\r\n    }, 'json').fail(function (data) {\r\n        replaceModalContent(errorTemplate(data.responseJSON));\r\n    });\r\n}\r\n/**\r\n * Get cached data for module.\r\n *\r\n * @since 1.5\r\n *\r\n * @param {string} module\r\n */\r\nfunction getCachedData(module) {\r\n    var index = dataCache.findIndex(function (data) { return data.target === module; });\r\n    return index >= 0 ? dataCache[index] : null;\r\n}\r\n","export default function errorTemplate(response) {\r\n    var errorMsg = response.errorMsg;\r\n    return \"\\n    <div class=\\\"acfw-help-modal-error\\\">\\n      <p>\".concat(errorMsg, \"</p>\\n    </div>\\n  \");\r\n}\r\n","import { searchResultsTemplate } from './templates/search_widget_template';\r\nvar $ = jQuery;\r\nvar searchTimeoutState = null;\r\nvar searchResultsCache = null;\r\n/**\r\n * Trigger search event when on keyboard input.\r\n *\r\n * @since 1.5\r\n */\r\nexport function triggerSearchEvent() {\r\n    // @ts-ignore\r\n    var $button = $(this);\r\n    var $wrap = $button.closest('.search-widget');\r\n    var $input = $wrap.find('input.search-input');\r\n    var $results = $wrap.find('.search-results');\r\n    var _a = acfw_edit_coupon.help_modal, labels = _a.labels, images_url = _a.images_url, _secure_nonce = _a._secure_nonce;\r\n    var term = $input.val();\r\n    // if search input is emptied, clear state and remove results.\r\n    if (!term) {\r\n        clearTimeout(searchTimeoutState);\r\n        searchTimeoutState = null;\r\n        $results.height(0).html('');\r\n        $wrap.removeClass('show-clear');\r\n        return;\r\n    }\r\n    $wrap.addClass('show-clear');\r\n    // run search query.\r\n    doSearchQuery({\r\n        action: $input.data('action'),\r\n        term: $input.val(),\r\n        _nonce: _secure_nonce,\r\n    }, \r\n    // callback to run before running ajax.\r\n    function () {\r\n        $results.height(35).html(\"<div class=\\\"loading\\\"><img src=\\\"\".concat(images_url, \"spinner.gif\\\" /></div>\"));\r\n    }, \r\n    // callback to run to process results.\r\n    function (data) {\r\n        if (!$wrap.hasClass('show-clear')) {\r\n            return;\r\n        }\r\n        if (data.length) {\r\n            searchResultsCache = { term: term, results: data };\r\n            $results.html(searchResultsTemplate(data, term));\r\n        }\r\n        else {\r\n            $results.html(\"<div class=\\\"no-result\\\">\".concat(labels.search_no_results, \"</div>\"));\r\n        }\r\n        // adjust the height to match the content (css transform).\r\n        $results.height($results.find('ul,.no-result').height() + 3);\r\n    });\r\n}\r\n/**\r\n * Function that handles the search query scheduling (delay 1 second after no more keyboard inputs).\r\n *\r\n * @since 1.5\r\n *\r\n * @param {ISearchArgs} args\r\n * @param {CallableFunction} beforeCB\r\n * @param {CallableFunction} successCB\r\n */\r\nfunction doSearchQuery(args, beforeCB, successCB) {\r\n    // clear saved timeout everytime search term value is changed.\r\n    if (searchTimeoutState) {\r\n        clearTimeout(searchTimeoutState);\r\n        searchTimeoutState = null;\r\n    }\r\n    // if search term is the same from previous, then serve cached results.\r\n    if (args.term === (searchResultsCache === null || searchResultsCache === void 0 ? void 0 : searchResultsCache.term)) {\r\n        successCB(searchResultsCache.results);\r\n        return;\r\n    }\r\n    // schedule AJAX query after 1 second.\r\n    searchTimeoutState = setTimeout(function () {\r\n        beforeCB();\r\n        $.post(ajaxurl, args, successCB, 'json');\r\n    }, 1000);\r\n}\r\n/**\r\n * Clear the search text and hide results list.\r\n *\r\n * @since 1.5\r\n */\r\nexport function clearSearchEvent() {\r\n    // @ts-ignore\r\n    var $button = $(this);\r\n    var $wrap = $button.closest('.search-widget');\r\n    var $input = $wrap.find('input.search-input');\r\n    var $results = $wrap.find('.search-results');\r\n    clearTimeout(searchTimeoutState);\r\n    searchTimeoutState = null;\r\n    $input.val('');\r\n    $results.height(0).html('');\r\n    $wrap.removeClass('show-clear');\r\n}\r\n","import { fetchContentDataUpdateModal } from './modal';\r\nimport placeholderTemplate from './templates/placeholder_template';\r\nvar $ = jQuery;\r\nexport function allowFetchPermission() {\r\n    var _secure_nonce = acfw_edit_coupon.help_modal._secure_nonce;\r\n    // @ts-ignore\r\n    var $button = jQuery(this);\r\n    var $div = $button.closest('#acfw-help-modal-permission-request');\r\n    var module = $div.data('module');\r\n    $div.replaceWith(placeholderTemplate());\r\n    $.post(ajaxurl, {\r\n        action: 'acfw_save_fetch_help_permission',\r\n        _nonce: _secure_nonce,\r\n    }, function () {\r\n        fetchContentDataUpdateModal(module);\r\n        acfw_edit_coupon.help_modal.allow_fetch = true;\r\n    }, 'json');\r\n}\r\nexport function closePermisionModal() {\r\n    vex.closeAll();\r\n}\r\n","import { showHelpModal } from './modal';\r\nimport { switchActiveVideo } from './videos';\r\nimport { triggerSearchEvent, clearSearchEvent } from './search';\r\nimport { allowFetchPermission, closePermisionModal } from './permission';\r\nvar $ = jQuery;\r\n/**\r\n * Register events related to help modal.\r\n *\r\n * @since 1.5\r\n */\r\nexport default function helpLinkRegisterEvents() {\r\n    $('#post-body').on('click', '.acfw-help-modal-trigger', showHelpModal);\r\n    $('body').on('click', '.acfw-help-vex .vex-close', function () { return vex.closeAll(); });\r\n    $('body').on('click', '.acfw-help-vex .acfw-help-video-gallery ul.thumbnails li a', switchActiveVideo);\r\n    $('body').on('keyup', '.acfw-help-vex .search-widget input.search-input', triggerSearchEvent);\r\n    $('body').on('click', '.acfw-help-vex .search-widget button.clear-search', clearSearchEvent);\r\n    $('body').on('click', '.acfw-help-vex #acfw-help-modal-permission-request button.allow', allowFetchPermission);\r\n    $('body').on('click', '.acfw-help-vex #acfw-help-modal-permission-request button.cancel', closePermisionModal);\r\n}\r\n/**\r\n * Generate help links in the tabs.\r\n *\r\n * @since 1.5\r\n */\r\nexport function generateHelpLinks() {\r\n    var helpLinkDivs = document.querySelectorAll('#post-body .acfw-help-link');\r\n    var _a = acfw_edit_coupon.help_modal, help_text = _a.help_text, images_url = _a.images_url;\r\n    helpLinkDivs.forEach(function (div) {\r\n        var markup = \"\\n      <a class=\\\"acfw-help-modal-trigger\\\" href=\\\"javascript:void(0);\\\">\".concat(help_text, \" \\n        <img class=\\\"acfw-icon\\\" src=\\\"\").concat(images_url, \"help-icon.svg\\\" alt=\\\"\").concat(help_text, \"\\\" />\\n      </a>\\n    \");\r\n        $(div).html(markup);\r\n    });\r\n}\r\n","var labels = acfw_edit_coupon.send_coupon.labels;\r\nexport default labels;\r\n","import labels from \"../labels\";\r\n/**\r\n * Get the html markup for the \"send coupon to\" section of the modal.\r\n *\r\n * @since 4.5.3\r\n *\r\n * @param {boolean} isCurrentSection Flag to determine if the section is the current one being displayed or not.\r\n * @returns {string} Section html markup.\r\n */\r\nexport default function sendCouponToSectionMarkup(isCurrentSection) {\r\n    if (isCurrentSection === void 0) { isCurrentSection = false; }\r\n    return \"\\n  <div class=\\\"acfw-send-coupon-form-section \".concat(isCurrentSection ? \"current\" : \"\", \"\\\" data-section=\\\"send_coupon_to\\\">\\n    <div class=\\\"section-number\\\">\\n      <span>1</span>\\n    </div>\\n    <div class=\\\"section-inner\\\">\\n      <h3>\").concat(labels.send_coupon_to, \"</h3>\\n      <div class=\\\"section-content\\\">\\n        <label>\\n          <input type=\\\"radio\\\" name=\\\"acfw_send_coupon[to]\\\" value=\\\"user\\\" data-key=\\\"send_to\\\" checked />\\n           <span>\").concat(labels.existing_customer_account, \"<span>\\n        </label>\\n        <label>\\n          <input type=\\\"radio\\\" name=\\\"acfw_send_coupon[to]\\\" value=\\\"email\\\" data-key=\\\"send_to\\\" />\\n           <span>\").concat(labels.new_customer, \"<span>\\n        </label>\\n        <button type=\\\"button\\\" class=\\\"button-primary acfw-next-section-btn\\\" data-next_section=\\\"customer_details\\\">\").concat(labels.next, \"</button>\\n      </div>\\n    </div>\\n  </div>\\n  \");\r\n}\r\n","import labels from \"../labels\";\r\n/**\r\n * Get the html markup for the customer details section of the modal.\r\n *\r\n * @since 4.5.3\r\n *\r\n * @param {boolean} isCurrentSection Flag to determine if the section is the current one being displayed or not.\r\n * @returns {string} Section html markup.\r\n */\r\nexport default function customerDetailsSectionMarkup(isCurrentSection) {\r\n    if (isCurrentSection === void 0) { isCurrentSection = false; }\r\n    return \"\\n  <div class=\\\"acfw-send-coupon-form-section \".concat(isCurrentSection ? \"current\" : \"\", \"\\\" data-section=\\\"customer_details\\\">\\n    <div class=\\\"section-number\\\">\\n      <span>2</span>\\n    </div>\\n    <div class=\\\"section-inner\\\">\\n      <h3>\").concat(labels.customer_details, \"</h3>\\n      <div class=\\\"section-content\\\">\\n        <div class=\\\"customer-details-form user-form show\\\">\\n          <select data-placeholder=\\\"\").concat(labels.search, \"\\\" name=\\\"acfw_send_coupon[user]\\\" data-key=\\\"user\\\" class=\\\"wc-customer-search\\\" style=\\\"width:100%\\\"></select>\\n        </div>\\n        <div class=\\\"customer-details-form guest-form\\\">\\n          <input type=\\\"text\\\" placeholder=\\\"\").concat(labels.name, \"\\\" name=\\\"acfw_send_coupon[name]\\\" data-key=\\\"name\\\" />\\n          <input type=\\\"email\\\" placeholder=\\\"\").concat(labels.email, \"\\\" name=\\\"acfw_send_coupon[email]\\\" data-key=\\\"email\\\" />\\n          <label>\\n            <input type=\\\"checkbox\\\" data-key=\\\"create_account\\\" value=\\\"yes\\\" /> \\n            <span>\").concat(labels.create_new_user_account, \"</span>\\n        </div>\\n        <button type=\\\"button\\\" class=\\\"button-primary acfw-next-section-btn\\\" data-next_section=\\\"confirm_and_send\\\">\").concat(labels.next, \"</button>\\n      </div>\\n    </div>\\n  </div>\\n  \");\r\n}\r\n","import { validateEmail } from '../helper';\r\nimport { reRenderSection } from './templates/modalMarkup';\r\nvar $ = jQuery;\r\nvar formState = new Map();\r\n/**\r\n * Initialize the send coupon form state.\r\n *\r\n * @since 4.5.3\r\n */\r\nexport function initFormState(section) {\r\n    if (section === void 0) { section = 'send_coupon_to'; }\r\n    formState.set('section', section);\r\n    formState.set('send_to', 'user');\r\n    formState.set('user_id', '0');\r\n    formState.set('name', '');\r\n    formState.set('email', '');\r\n    formState.set('create_account', '');\r\n}\r\n/**\r\n * Update state from input.\r\n * Triggered when an form input value is changed.\r\n *\r\n * @since 4.5.3\r\n */\r\nexport function updateStateFromInput() {\r\n    // @ts-ignore\r\n    var $input = $(this);\r\n    var key = $input.data('key');\r\n    var value = $input.val() ? $input.val().toString() : '';\r\n    switch (key) {\r\n        case 'user':\r\n            var $selected = $input.find('option:selected');\r\n            formState.set('user_id', value);\r\n            formState.set('name', lodash.first($selected.text().split(' (')));\r\n            formState.set('email', lodash.last($selected.text().split('&ndash; ')).replace(')', ''));\r\n            break;\r\n        case 'email':\r\n            $input.removeClass('error');\r\n            if (validateEmail(value) || value === '') {\r\n                formState.set(key, value);\r\n                formState.set('user_id', '0'); // clear the user_id value.\r\n            }\r\n            else {\r\n                formState.set(key, ''); // clear email value.\r\n                $input.addClass('error');\r\n            }\r\n            break;\r\n        case 'create_account':\r\n            value = $input.is(':checked') ? value : '';\r\n            formState.set(key, value);\r\n            break;\r\n        default:\r\n            formState.set(key, value);\r\n    }\r\n    reRenderSection('confirm_and_send', formState.get('section') === 'confirm_and_send');\r\n}\r\nexport default formState;\r\n","import labels from \"../labels\";\r\nimport sendCouponToSectionMarkup from \"./sendCouponToSection\";\r\nimport customerDetailsSectionMarkup from \"./customerDetailsSection\";\r\nimport confirmAndSendSection from \"./confirmAndSendSection\";\r\nvar $ = jQuery;\r\n/**\r\n * Get the html markup of the send coupon modal UI.\r\n *\r\n * @since 4.5.3\r\n *\r\n * @param {string} currentSection The current section to display.\r\n * @returns {string} Modal html markup.\r\n */\r\nexport default function modalMarkup(currentSection) {\r\n    return \"\\n    <div id=\\\"acfw-send-coupon\\\">\\n      <h2>\".concat(labels.title, \"</h2>\\n      <div class=\\\"description\\\">\\n        <p>\").concat(labels.description, \"</p>\\n      </div>\\n\\n      <div class=\\\"acfw-send-coupon-form-sections\\\">\\n        \").concat(getSectionRenderer(\"send_coupon_to\")(\"send_coupon_to\" === currentSection), \"\\n        \").concat(getSectionRenderer(\"customer_details\")(\"customer_details\" === currentSection), \"\\n        \").concat(getSectionRenderer(\"confirm_and_send\")(\"confirm_and_send\" === currentSection), \"\\n      </div>\\n    </div>\\n  \");\r\n}\r\n/**\r\n * Rerender a given section in the modal.\r\n *\r\n * @since 4.5.3\r\n *\r\n * @param {string} section The section to rerender.\r\n * @param {boolean} isCurrent Flag to determine if the section is the current one displayed or not.\r\n */\r\nexport function reRenderSection(section, isCurrent) {\r\n    if (isCurrent === void 0) { isCurrent = false; }\r\n    var $modal = $(\".acfw-send-coupon-modal\");\r\n    $modal.find(\"[data-section='\".concat(section, \"']\")).replaceWith(getSectionRenderer(section)(isCurrent));\r\n}\r\n/**\r\n * Returns the renderer callback for a given section.\r\n *\r\n * @since 4.5.3\r\n *\r\n * @param {string} section Section id.\r\n * @returns {function} Section renderer callback.\r\n */\r\nfunction getSectionRenderer(section) {\r\n    switch (section) {\r\n        case \"send_coupon_to\":\r\n            return sendCouponToSectionMarkup;\r\n        case \"customer_details\":\r\n            return customerDetailsSectionMarkup;\r\n        case \"confirm_and_send\":\r\n            return confirmAndSendSection;\r\n    }\r\n    return function () { };\r\n}\r\n","import labels from \"../labels\";\r\nimport formState from \"../state\";\r\n/**\r\n * Get the html markup for the confirm and send section of the modal.\r\n *\r\n * @since 4.5.3\r\n *\r\n * @param {boolean} isCurrentSection Flag to determine if the section is the current one being displayed or not.\r\n * @returns {string} Section html markup.\r\n */\r\nexport default function confirmAndSendSection(isCurrentSection) {\r\n    var _a;\r\n    if (isCurrentSection === void 0) { isCurrentSection = false; }\r\n    var isDisabled = !formState.get(\"name\") || !formState.get(\"email\") ? \"disabled\" : \"\";\r\n    return \"\\n  <div class=\\\"acfw-send-coupon-form-section \".concat(isCurrentSection ? \"current\" : \"\", \"\\\" data-section=\\\"confirm_and_send\\\">\\n    <div class=\\\"section-number\\\">\\n      <span>3</span>\\n    </div>\\n    <div class=\\\"section-inner\\\">\\n      <h3>\").concat(labels.confirm_and_send, \"</h3>\\n      <div class=\\\"section-content\\\">\\n        <p>\\n          <strong>\").concat(labels.customer, \":</strong> \").concat((_a = formState.get(\"name\")) !== null && _a !== void 0 ? _a : \"\", \"\\n          \").concat(formState.get(\"email\") ? \"&lt;\".concat(formState.get(\"email\"), \">\") : \"\", \"\\n        </p>\\n        <p><a class=\\\"preview-email-link  \").concat(isDisabled, \"\\\" href=\\\"#\\\">\").concat(labels.preview_email, \" \").concat(externalIconSvg(), \"</a></p>\\n        <button type=\\\"button\\\" class=\\\"button-primary acfw-send-email-btn\\\" \").concat(isDisabled, \">\").concat(labels.send_email, \" \").concat(envelopeIconSvg(), \"</button>\\n        <p class=\\\"request-message\\\"></p>\\n      </div>\\n    </div>\\n  </div>\\n  \");\r\n}\r\n/**\r\n * External icon SVG markup.\r\n *\r\n * @returns {string} Icon markup.\r\n */\r\nfunction externalIconSvg() {\r\n    return \"\\n  <svg width=\\\"10\\\" height=\\\"10\\\" viewBox=\\\"0 0 10 10\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n    <path d=\\\"M8.90625 8.59363V1.40613C8.90625 1.23328 8.7666 1.09363 8.59375 1.09363L1.40625 1.09363C1.2334 1.09363 1.09375 1.23328 1.09375 1.40613V4.92175C1.09375 4.96472 1.12891 4.99988 1.17188 4.99988H1.71875C1.76172 4.99988 1.79688 4.96472 1.79688 4.92175V1.79675L8.20313 1.79675V8.203H5.07813C5.03516 8.203 5 8.23816 5 8.28113V8.828C5 8.87097 5.03516 8.90613 5.07813 8.90613H8.59375C8.7666 8.90613 8.90625 8.76648 8.90625 8.59363ZM4.14648 6.37976L4.65625 6.88953C4.66663 6.89985 4.6797 6.90706 4.69397 6.91033C4.70824 6.91359 4.72314 6.91279 4.73697 6.90801C4.75081 6.90323 4.76303 6.89466 4.77224 6.88328C4.78145 6.8719 4.78728 6.85816 4.78906 6.84363L4.99414 5.09167C5 5.04187 4.95801 4.9989 4.90723 5.00476L3.15527 5.20984C3.09082 5.21765 3.06348 5.29675 3.10938 5.34265L3.62109 5.85437L1.11914 8.35632C1.08887 8.3866 1.08887 8.4364 1.11914 8.46667L1.5332 8.88074C1.56348 8.91101 1.61328 8.91101 1.64356 8.88074L4.14648 6.37976Z\\\" fill=\\\"#3A6FAC\\\"/>\\n  </svg>\\n  \";\r\n}\r\n/**\r\n * Envelope icon SVG markup.\r\n *\r\n * @returns {string} Icon markup.\r\n */\r\nfunction envelopeIconSvg() {\r\n    return \"\\n  <svg width=\\\"12\\\" height=\\\"12\\\" viewBox=\\\"0 0 12 12\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n    <path d=\\\"M10.875 1.87512H1.125C0.917578 1.87512 0.75 2.0427 0.75 2.25012V9.75012C0.75 9.95754 0.917578 10.1251 1.125 10.1251H10.875C11.0824 10.1251 11.25 9.95754 11.25 9.75012V2.25012C11.25 2.0427 11.0824 1.87512 10.875 1.87512ZM10.4062 3.17356V9.28137H1.59375V3.17356L1.27031 2.92161L1.73086 2.32981L2.23242 2.72004H9.76875L10.2703 2.32981L10.7309 2.92161L10.4062 3.17356ZM9.76875 2.71887L6 5.64856L2.23125 2.71887L1.72969 2.32864L1.26914 2.92043L1.59258 3.17239L5.5957 6.28489C5.71083 6.37433 5.85246 6.42288 5.99824 6.42288C6.14403 6.42288 6.28566 6.37433 6.40078 6.28489L10.4062 3.17356L10.7297 2.92161L10.2691 2.32981L9.76875 2.71887Z\\\" fill=\\\"white\\\"/>\\n  </svg>\\n  \";\r\n}\r\n","import sendCouponButtonMarkup from './templates/sendCouponButton';\r\nimport modalMarkup from './templates/modalMarkup';\r\nimport formState, { initFormState, updateStateFromInput } from './state';\r\nvar $ = jQuery;\r\n/**\r\n * Register events related to the send coupon feature.\r\n *\r\n * @since 4.5.3\r\n */\r\nexport default function sendCouponEvents() {\r\n    appendSendCouponButton();\r\n    initFormState();\r\n    $('body').on('click', 'button.acfw-send-coupon-btn', showSendCouponModal);\r\n    $('body').on('change clearForm', \".acfw-send-coupon-form-section input[type='radio']:checked\", toggleCustomerDetailsForm);\r\n    $('body').on('click', '.acfw-send-coupon-form-section .acfw-next-section-btn', toggleFormNextSection);\r\n    $('body').on('click', '.acfw-send-coupon-form-section .section-number,.acfw-send-coupon-form-section h3', navigateToSection);\r\n    $('body').on('change', '.acfw-send-coupon-form-section input, .acfw-send-coupon-form-section select', updateStateFromInput);\r\n    $('body').on('click', '.acfw-send-coupon-form-section .preview-email-link', previewCouponEmail);\r\n    $('body').on('click', '.acfw-send-coupon-form-section .acfw-send-email-btn', sendCouponEmail);\r\n}\r\n/**\r\n * Append the send coupon button next to the \"Add coupon\" button.\r\n *\r\n * @since 4.5.3\r\n */\r\nfunction appendSendCouponButton() {\r\n    $('.page-title-action').after(sendCouponButtonMarkup());\r\n}\r\n/**\r\n * Show the send coupon modal UI.\r\n *\r\n * @since 4.5.3\r\n */\r\nfunction showSendCouponModal() {\r\n    // display vex dialog.\r\n    vex.dialog.open({\r\n        unsafeMessage: modalMarkup(formState.get('section')),\r\n        className: 'vex-theme-plain acfw-send-coupon-modal',\r\n        showCloseButton: true,\r\n        buttons: {},\r\n        afterOpen: function () { return $(document.body).trigger('wc-enhanced-select-init'); },\r\n    });\r\n}\r\n/**\r\n * Toggle the customer details form depending on the \"Send to\" option value selected.\r\n *\r\n * @since 4.5.3\r\n */\r\nfunction toggleCustomerDetailsForm() {\r\n    // @ts-ignore\r\n    var $radio = $(this);\r\n    var sendTo = $radio.val().toString();\r\n    var formClassName = 'user' === sendTo ? '.user-form' : '.guest-form';\r\n    $('.acfw-send-coupon-form-section .customer-details-form')\r\n        .removeClass('show')\r\n        .find('input,select')\r\n        .prop('disabled', true);\r\n    $(\".acfw-send-coupon-form-section \".concat(formClassName)).addClass('show').find('input,select').prop('disabled', false);\r\n}\r\n/**\r\n * Navigate to the next section when the \"Next\" button is clicked.\r\n *\r\n * @since 4.5.3\r\n */\r\nfunction toggleFormNextSection() {\r\n    // @ts-ignore\r\n    var $button = $(this);\r\n    var sectionName = $button.data('next_section');\r\n    $('.acfw-send-coupon-form-section').removeClass('current');\r\n    $(\".acfw-send-coupon-form-section[data-section='\".concat(sectionName, \"']\")).addClass('current');\r\n}\r\n/**\r\n * Navigate to a section when the section number or header text is clicked.\r\n *\r\n * @since 4.5.3\r\n */\r\nfunction navigateToSection() {\r\n    // @ts-ignore\r\n    var $section = $(this).closest('.acfw-send-coupon-form-section');\r\n    if (!$section.hasClass('current')) {\r\n        $('.acfw-send-coupon-form-section').removeClass('current');\r\n        $section.addClass('current');\r\n    }\r\n}\r\n/**\r\n * Preview the coupon email content in a new tab.\r\n *\r\n * @since 4.5.3\r\n */\r\nfunction previewCouponEmail() {\r\n    // @ts-ignore\r\n    var $button = $(this);\r\n    if ($button.hasClass('disabled')) {\r\n        return;\r\n    }\r\n    var query = new URLSearchParams();\r\n    query.append('action', 'acfw_advanced_coupon_preview_email');\r\n    query.append('email_id', 'acfw_coupon_email');\r\n    query.append('args[coupon_id]', $('#post_ID').val());\r\n    query.append('args[name]', formState.get('name'));\r\n    query.append('args[email]', formState.get('email'));\r\n    query.append('args[user_id]', formState.get('user_id'));\r\n    query.append('_wpnonce', acfw_edit_coupon.send_coupon.form_nonce);\r\n    window.open(\"\".concat(ajaxurl, \"?\").concat(query.toString()), '_blank');\r\n}\r\n/**\r\n * Send the coupon email API request.\r\n *\r\n * @since 4.5.3\r\n */\r\nfunction sendCouponEmail() {\r\n    // @ts-ignore\r\n    var $button = $(this);\r\n    $button.prop('disabled', true);\r\n    $('#acfw-send-coupon .request-message').html('').removeClass('success error');\r\n    wp.apiFetch({\r\n        path: '/coupons/v1/sendcoupon',\r\n        method: 'POST',\r\n        data: {\r\n            coupon_id: $('#post_ID').val(),\r\n            customer: parseInt(formState.get('user_id')) ? formState.get('user_id') : formState.get('email'),\r\n            name: formState.get('name'),\r\n            create_account: formState.get('create_account'),\r\n        },\r\n    })\r\n        .then(function (res) {\r\n        clearForm();\r\n        displayResponseMessage('success', res.message);\r\n    })\r\n        .catch(function (error) { return displayResponseMessage('error', error.message); });\r\n}\r\n/**\r\n * Clear all form fields.\r\n *\r\n * @since 4.5.3\r\n */\r\nfunction clearForm() {\r\n    initFormState('confirm_and_send');\r\n    $('#acfw-send-coupon').find(\"select,input[type='text'],input[type='email']\").val('').trigger('change');\r\n    $('#acfw-send-coupon').find(\"input[type='radio']\").prop('checked', false);\r\n    $('#acfw-send-coupon').find(\"label:first-child input[type='radio']\").prop('checked', true).trigger('clearForm');\r\n    $('#acfw-send-coupon').find(\"input[type='checkbox']\").prop('checked', false);\r\n}\r\n/**\r\n * Display form response message notice.\r\n *\r\n * @since 4.5.3\r\n *\r\n * @param {string} type Notice type.\r\n * @param {string} message Notice message.\r\n */\r\nfunction displayResponseMessage(type, message) {\r\n    $('#acfw-send-coupon .request-message').html(message).addClass(type);\r\n}\r\n","import labels from \"../labels\";\r\n/**\r\n * Get the html markup for the send coupon button.\r\n *\r\n * @since 4.5.3\r\n *\r\n * @returns {string} Send coupon button markup.\r\n */\r\nexport default function sendCouponButtonMarkup() {\r\n    return \"<button type=\\\"button\\\" class=\\\"button acfw-send-coupon-btn\\\">\".concat(labels.title, \"</button>\");\r\n}\r\n","import cart_conditions_module_events from \"./cart_conditions/index\";\r\nimport bogo_deals_module_events from \"./bogo_deals/index\";\r\nimport toggle_fields_events from \"./toggle_fields\";\r\nimport url_coupon_events from \"./url_coupons\";\r\nimport edit_link_scheduler_fields from \"./scheduler\";\r\nimport upsell_events from \"./upsell\";\r\nimport helpLinkRegisterEvents, { generateHelpLinks } from \"./help_modal/index\";\r\nimport sendCouponEvents from \"./send_coupon/index\";\r\nimport \"./assets/styles/index.scss\";\r\nvar modules = acfw_edit_coupon.modules, upsell = acfw_edit_coupon.upsell;\r\njQuery(document).ready(function ($) {\r\n    if (modules.indexOf(\"acfw_cart_conditions_module\") > -1)\r\n        cart_conditions_module_events();\r\n    if (modules.indexOf(\"acfw_bogo_deals_module\") > -1)\r\n        bogo_deals_module_events();\r\n    if (modules.indexOf(\"acfw_url_coupons_module\") > -1)\r\n        url_coupon_events();\r\n    if (modules.indexOf(\"acfw_scheduler_module\") > -1)\r\n        edit_link_scheduler_fields();\r\n    if (upsell)\r\n        upsell_events();\r\n    toggle_fields_events();\r\n    generateHelpLinks();\r\n    helpLinkRegisterEvents();\r\n    preSelectCouponTypeFromUrl();\r\n    sendCouponEvents();\r\n});\r\n/**\r\n * Pre select the coupon type when the parameter is available on the URL during new coupon creation.\r\n *\r\n * @since 4.3\r\n */\r\nfunction preSelectCouponTypeFromUrl() {\r\n    var queryString = new URLSearchParams(window.location.search);\r\n    var type = queryString.get(\"type\");\r\n    // only do this when creating a new coupon.\r\n    if (type && window.location.pathname.includes(\"post-new.php\")) {\r\n        jQuery(\"select#discount_type\").val(type).trigger(\"change\");\r\n    }\r\n}\r\n"],"names":["conditionFieldOptionsTemplate","cart_condition_fields","acfw_edit_coupon","fieldGroups","cart_condition_field_groups","btnLabels","product_table_buttons","add_new_and_rule","conditionFields","Object","keys","map","key","concat","f","fieldGroup","group","label","matchedFields","filter","c","undefined","length","title","join","conditionFieldGroupTemplate","add","cancel","$","jQuery","module_block","document","querySelector","toggle_add_condition_form","$button","this","$condition_actions","closest","hasClass","find","show","select2","hide","toggle_editing_mode","toggle","data","prop","popuplate_taxonomy_term_options","$taxonomy","$condition_block","$tax_terms","taxonomy","val","terms","taxonomy_data","t","slug","taxonomy_terms","remove","_i","taxonomy_terms_1","term","name_1","name","term_id","optionObj","Option","append","trigger","popuplate_shipping_region_options","$shipping_zone","$shipping_region","zone_id","regions","region_labels","region_options","region_options_1","code","toggleNoticeTypeField","$checkbox","$noticeTypeField","$wrapper","is","toggle_overlay","overlay","type","display","css","esc_attr","text","replace","m","remove_leading_zeros","decimal_separator","$input","value","substring","get_allowed_minimum_value","condition","selected","value_1","value_2","selected_multiple","array","indexOf","condition_options","_a","condition_field_options","exactly","anyexcept","morethan","lessthan","price_to_float","price","parseFloat","validateDiscount","condition_logic_template","logic_field_options","and","or","condition_group_template","fields_markup","empty_cart_conditions_field","cgroup_actions","empty_conditions_markup","add_condition_group","condition_groups","blur","removeClass","remove_condition_group","$condition_group","$cgroup_logic","index","next","prev","no_condition_group_msg","logic_template","product_category_template","categories","quantity","product_category","placeholder","field","quantityLabel","cart_quantity","condition_label","condOption","options","markup","x","category_options","customer_logged_in_status_template","customer_logged_in_status","get_options","customer_user_role_template","customer_user_role","user_role_options","disallowed_customer_user_role_template","disallowed_customer_user_role","cart_condition_premium_notice","upsell","add_condition_field","$condition_type","$condition_fields","premiumConditions","condition_type","fields_count","vex","dialog","alert","unsafeMessage","cart_condition_field","condition_field_markup","get_condition_field","fail_add_condition_field","remove_condition_field","$condition_field","$cfield_logic","desc","cart_quantity_template","include_tax","cart_subtotal","tax_label","cart_subtotal_template","field_key","template_callback","default_data_value","label_premium","includes","cart_condition_field_premium_notice","JSON","stringify","condition_premium_template","is_condition_field","cart_conditon_field_options","scrape_condition_group_data","condition_group","condition_fields","querySelectorAll","fields","classList","contains","forEach","condition_field","push","temp","temp2","temp3","dataset","field_data","parseInt","includeTax","checked","scraper_callback","premium","parse","scrape_condition_field_data","post_id","woocommerce_admin_meta_boxes","save_cart_conditions","post_status","form_data","objects","min","prevGroupType","form_data_1","_b","_c","Number","isInteger","validate_form_data","cart_conditions_invalid","addClass","notice_settings","message","btn_text","btn_url","notice_type","auto_apply_display","test","cart_notice_url_invalid","ajax_save","cart_conditions","nonce","response","status","click","error_msg","save_on_coupon_publish","e","preventDefault","setTimeout","submit","callback","action","coupon_id","post","ajaxurl","bogo_form_fields","trigger_add_table_row_form","$table","$tbody","exclude","get_add_edit_form_row_markup","trigger_edit_table_row_form","$row","splice","product_id","replaceWith","add_edit_table_row","$search","$condition","$quantity","minimum","productId","product_exists_in_table","product_label","fill_form_propery_error_msg","cancel_add_edit_table_row","colspan","append_blank_placeholder_table_row","product_table_remove_product","no_products_added","prodOption","edit","type_to_search","btnText","restrict_number_min_value","attr","update_input_minimum_value","$select","$field","field_type","selector","update_has_ordered_before_condition_label","within_a_period_label","number_of_orders_label","$label","validate_price_field_value","input_price","minimum_price","condition_value_type_change","$type","$value","extract_premium_cart_conditions","conditions","entries","row","_loop_1","index_1","_d","_e","premium_cart_condition_notice","premium_cart_conditions","logo_img","actions","external","url","condition_notice_template","window","acfw_edit_coupon_triggers","remove_all_premium_condition","each","navigate_tabs","$tab","$module_block","tab","set_active_tab","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","result","done","then","apply","__generator","body","y","g","_","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","init_cart_conditions","_this","data_1","load_condition_group_fields","html","addLogic","fields_1","field_markup","upsell_template","bogo_deals_type","combination_products_template","is_deals","products","discount_type","discount_value","bogo_instructions","productsLabel","priceDiscountLabel","price_discount","priceType","priceCol","currency_symbol","discount_field_options","override","percent","fixed","get_price_column","priceTh","products_1","p","instructions","combination_get","combination_get_2","combination_buy","product_categories_template","categoriesLabel","categories_1","category_id","categories_get","categories_buy","product_first_column_template","placeholder_table_row_template","no_categories_added","any_products_template","isDeals","discountTypeLabel","anyproducts_get","apply_template","anyproducts_buy","trigger_quantity","trigger_template","toggle_block_data_type","block_type","condition_block","deals_block","bogo_deals","deals","block_data_type","conditions_type","deals_type","block_data","tempBlock","isDeal","isPremium","data_type","add_product_label","productLabel","product","specific_get","specific_buy","tbody","specific_products_template","$multipleDesc","toggleRepeatLimitField","$this","$module","__assign","assign","s","i","arguments","prototype","hasOwnProperty","save_bogo_deals","condition_rows","deal_rows","type_field","repeat_limit","$notice_options","get_data","isTriggerError","isApplyError","bogo_deals_save_error_msg","discount_type_value_error_msg","button_text","button_url","dataToSave","rows","clear_bogo_deals","confirm","_wpnonce","update_combined_objects_list","$temp","current_data","$options","dataType","toString","$discount_type","$discount_value","discount_val","isNaN","update_any_products_trigger_data","$block","update_any_products_apply_data","discountType","discountValue","add_edit_row_template","option","category_label","get_option","table_row_template","category_first_column_template","get_first_column_markup","object_id","object","get_table_row_data","$object_row","toggleBogoInterface","$discountType","$general","$inputs","trigger_toggle","restrict_quantity_value","bogo_toggle_editing_mode","toggle_disable_enable_fields","$fields","url_coupon_events","moduleBlock","on","showCopiedText","after","ClipboardJS","copied_label","fadeOut","edit_link_scheduler_fields","scheduler_tab","schedule_start_field","schedule_expire_field","wc_default_expiry_field","toggle_fields_required_prop","clear_scheduler_fields_values","toggleSchedulerSection","validateBeforeSaveCoupon","scheduleStartField","scheduleExpireField","startMaxDate","flatpickr","parseDate","expireMinDate","setMinutes","getMinutes","allowInput","enableTime","altInput","allowInvalidPreload","altFormat","dateFormat","maxDate","onChange","dateStr","instance","dateObject","_flatpickr","set","validate_date_range_field_values","minDate","initDateFields","parent","invalid_scheduler_time","$date","$datefield","siblings","clear","exludeCouponShown","upsell_events","upsell_advance_usage_limits","upsell_exclude_coupons_restriction","upsell_auto_apply","upsell_virtual_coupons","cart_condition_select_notice","hideGeneralUpsellOnBogo","displayCashbackUpsellModal","cacheCurrentDiscountType","toggle_bogo_auto_add_products_field","upsell_bogo_auto_add_get_products","upsell_day_time_schedules","insertAfter","usage_limits","usage_restriction","afterClose","auto_apply","virtual_coupons","$moduleBlock","$formBlock","$noticeHolder","$noticeBlock","inArray","cashback_coupon","bogo_auto_add_get_products","day_time_schedules","linksListTemplate","args","search","className","links","help_modal","is_premium","l","freeOnly","link","premiumUrl","generateLink","modalTemplate","labels","images_url","target","left","content","videos","right","kbs","tutorials","kbSearchArgs","search_placeholder","source","upgradeLink","logoUrl","upgrade_to_premium","loading_videos","rel_links","kb_articles","tut_guides","permissionRequestTemplate","module","permission_request","allow","placeholderTemplate","loading_content","noVideoTemplate","videoEmbed","thumbnail","no_video","videoEmbedsState","videoModuleState","loadVideosOembed","_secure_nonce","urls","width","_nonce","videoEmbeds","ve","findIndex","updateVideoGalleryContent","$placeholder","embed","videoid","videoGalleryTemplate","switchActiveVideo","$li","$wrap","$video","$thumbs","videoId","dataCache","showHelpModal","allow_fetch","open","showCloseButton","buttons","fetchContentDataUpdateModal","replaceModalContent","markupTemplate","cachedData","getCachedData","loadVideoGalleryContentCache","fail","errorMsg","responseJSON","searchTimeoutState","searchResultsCache","triggerSearchEvent","$results","clearTimeout","height","beforeCB","successCB","results","doSearchQuery","list","generateUrl","searchResultsTemplate","search_no_results","clearSearchEvent","allowFetchPermission","$div","closePermisionModal","closeAll","send_coupon","sendCouponToSectionMarkup","isCurrentSection","send_coupon_to","existing_customer_account","new_customer","customerDetailsSectionMarkup","customer_details","email","create_new_user_account","formState","Map","initFormState","section","updateStateFromInput","$selected","lodash","first","split","last","RegExp","isCurrent","getSectionRenderer","reRenderSection","get","confirmAndSendSection","isDisabled","confirm_and_send","customer","preview_email","send_email","sendCouponEvents","showSendCouponModal","toggleCustomerDetailsForm","toggleFormNextSection","navigateToSection","previewCouponEmail","sendCouponEmail","currentSection","description","afterOpen","formClassName","sectionName","$section","query","URLSearchParams","form_nonce","wp","apiFetch","path","method","create_account","res","displayResponseMessage","catch","error","modules","ready","helpLinkDivs","help_text","div","location","pathname"],"sourceRoot":""}