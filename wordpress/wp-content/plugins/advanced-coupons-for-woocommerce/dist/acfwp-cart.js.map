{"version":3,"file":"acfwp-cart.js","mappings":"yBACAA,OAAOC,UAAUC,OAAM,SAAUC,GAC7B,IAAIC,EAAa,CACbC,4BAA6B,WACzB,IAAIC,EAEAC,EAAsC,QAAxBD,EADJH,EAAEK,MACeC,aAA0B,IAAPH,OAAgB,EAASA,EAAGI,WAAWC,OACzFP,EAAWQ,MAAMT,EAAE,2BACnBA,EAAEU,KAAKC,eAAeC,YACjBL,WACAM,QAAQ,eAAgB,gBAAiB,CAC1CC,YAAaV,EACbW,SAAUJ,eAAeK,qBAC1B,SAAUC,GACTjB,EAAE,+DAA+DkB,SACjElB,EAAEF,SAASqB,MAAMC,QAAQ,iBAAkB,CAAChB,IAC5CH,EAAWoB,WAAWJ,EAC1B,IAAGK,QAAO,WACNrB,EAAWsB,QAAQvB,EAAE,2BACrBA,EAAEF,UAAUsB,QAAQ,kBAAkB,EAC1C,GACJ,EACAI,gCAAiC,WAC7B,IAAIrB,EAEAC,EAAsC,QAAxBD,EADJH,EAAEK,MACeC,aAA0B,IAAPH,OAAgB,EAASA,EAAGI,WAAWC,OACrFiB,EAAQzB,EAAE,6BACdC,EAAWQ,MAAMgB,GACjBzB,EAAEU,KAAKgB,mBAAmBd,YACrBL,WACAM,QAAQ,eAAgB,gBAAiB,CAC1CC,YAAaV,EACbW,SAAUW,mBAAmBV,qBAC9B,SAAUW,GACT3B,EAAE,4CAA4CkB,SAC9CjB,EAAWsB,QAAQE,GACfE,IACAF,EAAMG,OAAOD,GACb3B,EAAEF,SAASqB,MAAMC,QAAQ,6BAA8B,CACnDhB,IAEJJ,EAAEF,SAASqB,MAAMC,QAAQ,kBAAmB,CACxCS,wBAAwB,IAGpC,GACJ,EACAR,WAAY,SAAUS,EAAcC,QAChB,IAAZA,IAAsBA,EAAU,MAChC,OAASA,IACTA,EACI/B,EAAE,uCACEA,EAAE,eAAegC,QAAQ,iBACzBhC,EAAE,2BAEd+B,SAAkDA,EAAQE,QAAQH,EACtE,EACArB,MAAO,SAAUyB,GACbA,EAAMC,SAAS,cAAc1B,MAAM,CAC/B2B,QAAS,KACTC,WAAY,CACRC,WAAY,OACZC,QAAS,KAGrB,EACAhB,QAAS,SAAUW,GACfA,EAAMM,YAAY,cAAcjB,SACpC,EACAkB,KAAM,WACFzC,EAAE,yBAAyB0C,GAAG,QAAS,iCAAkCrC,KAAKH,6BAC9EF,EAAE,6BAA6B0C,GAAG,QAAS,iCAAkCrC,KAAKmB,gCACtF,GAEJvB,EAAWwC,MACf,G","sources":["webpack://advanced-coupons-premium/./packages/acfwp-cart/index.ts"],"sourcesContent":["\"use strict\";\r\njQuery(document).ready(function ($) {\r\n    var eventFuncs = {\r\n        applyNotificationCouponCart: function () {\r\n            var _a;\r\n            var $button = $(this);\r\n            var couponCode = (_a = $button.val()) === null || _a === void 0 ? void 0 : _a.toString().trim();\r\n            eventFuncs.block($(\".woocommerce-cart-form\"));\r\n            $.post(wc_cart_params.wc_ajax_url\r\n                .toString()\r\n                .replace(\"%%endpoint%%\", \"apply_coupon\"), {\r\n                coupon_code: couponCode,\r\n                security: wc_cart_params.apply_coupon_nonce,\r\n            }, function (response) {\r\n                $(\".woocommerce-error, .woocommerce-message, .woocommerce-info\").remove();\r\n                $(document.body).trigger(\"applied_coupon\", [couponCode]);\r\n                eventFuncs.showNotice(response);\r\n            }).always(function () {\r\n                eventFuncs.unblock($(\".woocommerce-cart-form\"));\r\n                $(document).trigger(\"wc_update_cart\", true);\r\n            });\r\n        },\r\n        applyNotificationCouponCheckout: function () {\r\n            var _a;\r\n            var $button = $(this);\r\n            var couponCode = (_a = $button.val()) === null || _a === void 0 ? void 0 : _a.toString().trim();\r\n            var $form = $(\"form.woocommerce-checkout\");\r\n            eventFuncs.block($form);\r\n            $.post(wc_checkout_params.wc_ajax_url\r\n                .toString()\r\n                .replace(\"%%endpoint%%\", \"apply_coupon\"), {\r\n                coupon_code: couponCode,\r\n                security: wc_checkout_params.apply_coupon_nonce,\r\n            }, function (code) {\r\n                $(\".woocommerce-error, .woocommerce-message\").remove();\r\n                eventFuncs.unblock($form);\r\n                if (code) {\r\n                    $form.before(code);\r\n                    $(document.body).trigger(\"applied_coupon_in_checkout\", [\r\n                        couponCode,\r\n                    ]);\r\n                    $(document.body).trigger(\"update_checkout\", {\r\n                        update_shipping_method: false,\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        showNotice: function (html_element, $target) {\r\n            if ($target === void 0) { $target = null; }\r\n            if (null !== $target) {\r\n                $target =\r\n                    $(\".woocommerce-notices-wrapper:first\") ||\r\n                        $(\".cart-empty\").closest(\".woocommerce\") ||\r\n                        $(\".woocommerce-cart-form\");\r\n            }\r\n            $target === null || $target === void 0 ? void 0 : $target.prepend(html_element);\r\n        },\r\n        block: function ($node) {\r\n            $node.addClass(\"processing\").block({\r\n                message: null,\r\n                overlayCSS: {\r\n                    background: \"#fff\",\r\n                    opacity: 0.6,\r\n                },\r\n            });\r\n        },\r\n        unblock: function ($node) {\r\n            $node.removeClass(\"processing\").unblock();\r\n        },\r\n        init: function () {\r\n            $(\"body.woocommerce-cart\").on(\"click\", \"button.acfw_apply_notification\", this.applyNotificationCouponCart);\r\n            $(\"body.woocommerce-checkout\").on(\"click\", \"button.acfw_apply_notification\", this.applyNotificationCouponCheckout);\r\n        },\r\n    };\r\n    eventFuncs.init();\r\n});\r\n"],"names":["jQuery","document","ready","$","eventFuncs","applyNotificationCouponCart","_a","couponCode","this","val","toString","trim","block","post","wc_cart_params","wc_ajax_url","replace","coupon_code","security","apply_coupon_nonce","response","remove","body","trigger","showNotice","always","unblock","applyNotificationCouponCheckout","$form","wc_checkout_params","code","before","update_shipping_method","html_element","$target","closest","prepend","$node","addClass","message","overlayCSS","background","opacity","removeClass","init","on"],"sourceRoot":""}