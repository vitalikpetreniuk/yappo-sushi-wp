function getCookie(name){const value=`; ${document.cookie}`;const parts=value.split(`; ${name}=`);if(parts.length===2)return parts.pop().split(';').shift()}
function setCookie(name,value){let d=new Date();d.setTime(d.getTime()+86400000*10);document.cookie=name+"="+value+"; expires="+d.toUTCString()+"; path=/"}
jQuery(function($){window.dataLayer=window.dataLayer||[];$('body').on('added_to_cart',function(e,fragments,hash,button){$('#added_product_name').text(button.data('name'));$('.added-success').addClass('added-success-active');setTimeout(function(){$('.added-success').removeClass('added-success-active')},4000)})
$('.product-section .product-section-ajax-btn').click(function(){let button=$(this);let data={'action':'loadmore','func':button.data('func'),'paged':Number(button.data('paged'))+1,};if(button.data('category')){data.category=button.data('category')}
$.ajax({url:wc_add_to_cart_params.ajax_url,data:data,type:'POST',success:function(data){console.log(data)
let{posts=!1}=data.data;const paged=Number(button.data('paged'))+1;console.log(paged)
button.data('paged',paged);if(posts){button.closest('.product-section').find('.row').append(posts)}else{button.remove()}
if(Number(button.data('max'))<=paged)button.remove()}})});$('body').on('change input','.cart__preview-item .qty',(event)=>{let cart_item_key=$(event.target).attr('name').replace(/cart\[([\w]+)\]\[qty\]/g,"$1");let item_quantity=parseFloat($(event.target).val());$.ajax({type:'POST',url:wc_add_to_cart_params.ajax_url,data:{action:'update_item_from_cart','cart_item_key':cart_item_key,'qty':item_quantity,},success:function(data){if(data.fragments){$.each(data.fragments,function(key,value){$(key).replaceWith(value)})}}})});$('.added-success .orange-btn').click(function(){if(toggleCart){toggleCart()}
$('.added-success').removeClass('added-success-active')});$("#city-chooser button").on('click',function(e){e.preventDefault();const cityid=$(this).closest('#city-chooser').find('a.active').data('id');setCookie('choosedcity',cityid);window.location.reload()})
function checkoutFields(e){if($('.shipping_method:checked').val()=='local_pickup:2'){$('#billing_address_1_field, #billing_address_2_field, #billing_address_3_field').hide()}else{$('#billing_address_1_field, #billing_address_2_field, #billing_address_3_field').show()}}
$('.shipping_method:checked').on('change',checkoutFields);$('body').on('updated_checkout',function(){checkoutFields()})
$("#city-chooser ul li a").on('click',function(){$("#city-chooser .orange-btn").removeAttr('disabled')})
if(!getCookie('choosedcity')){$('.modal-city-wrap').removeClass('modal-city-wrap-none')}
$('body').on('update_checkout',function(){$("#billing_phone").mask("+38 (999) 999-99-99",{placeholder:"+38 (___) ___-__-__"})})
$('#shipping_method .delivery-label').on('click',function(){$(this).find('input').prop("checked",!0).trigger('change')})
$('.city-list a').on('click',function(e){e.preventDefault();let cityid=$(this).data('id');setCookie('choosedcity',cityid);window.location.reload()})
$(document.body).on('added_to_cart',function(e,fragments,cart_hash,button){let item=JSON.parse($(button).data('seo'));if($(button).data('index')){item.index=$(button).data('index')}
window.dataLayer.push({ecommerce:null});window.dataLayer.push({event:"add_to_cart",ecommerce:{items:[item]}})});$(document.body).on('removed_from_cart',function(e,fragments,cart_hash,button){let item=JSON.parse($(button).data('seo'));window.dataLayer.push({ecommerce:null});window.dataLayer.push({event:"remove_from_cart",ecommerce:{items:[item]}})});$('.product-list-cart .remove-button').on('click',function(){let item=JSON.parse($(this).data('seo'));window.dataLayer.push({ecommerce:null});window.dataLayer.push({event:"remove_from_cart",ecommerce:{items:[item]}})})
$('body').on('click','.product__item',function(e){let item=JSON.parse($(this).closest('.product__item').find('.add_to_cart_button').data('seo'));window.dataLayer.push({ecommerce:null});window.dataLayer.push({event:"select_item",ecommerce:{items:[item]}});window.dataLayer.push({ecommerce:null});window.dataLayer.push({event:"view_item",ecommerce:{items:[item]}})})})